<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Al'Majid - Portfolio</title>
    <meta name="description" content="Portfolio Al'Majid - Web Developer, Designer, Creator.">
    <meta name="keywords" content="web developer, portfolio, indonesia, programmer">
    <meta property="og:title" content="Al'Majid - Portfolio">
    <meta property="og:description" content="Website resmi Al'Majid. Projects, apps, games, gallery, chat, dan lainnya.">
    <meta property="og:image" content="profil.jpg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-analytics.js";
        import { getDatabase, ref, push, onValue, remove, set, get, child } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";
        import { getStorage, ref as storageRef, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAvpWiPJfJgDlZqIGdY4pjbrOGSePbwG7Q",
            authDomain: "almajidnara.firebaseapp.com",
            projectId: "almajidnara",
            storageBucket: "almajidnara.firebasestorage.app",
            messagingSenderId: "822037022910",
            appId: "1:822037022910:web:abc54d34b0e65ea030b6ef",
            measurementId: "G-XEH7Z99W78",
            databaseURL: "https://almajidnara-default-rtdb.asia-southeast1.firebasedatabase.app/"
        };

        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        window.firebaseApp = app;
        window.firebaseDatabase = getDatabase(app);
        window.firebaseStorage = getStorage(app);
        window.firebaseRef = ref;
        window.firebasePush = push;
        window.firebaseOnValue = onValue;
        window.firebaseRemove = remove;
        window.firebaseSet = set;
        window.firebaseGet = get;
        window.firebaseChild = child;
        window.firebaseStorageRef = storageRef;
        window.firebaseUploadBytes = uploadBytes;
        window.firebaseGetDownloadURL = getDownloadURL;
    </script>
    
    <style>
        /* RESET & GLOBAL STYLES */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }
        
        /* Mencegah scroll selama loading dan saat modal terbuka */
        body.loading,
        body.modal-open {
            overflow: hidden !important;
            height: 100vh !important;
            position: fixed !important;
            width: 100% !important;
        }
        
        body {
            overflow-x: hidden;
            background-color: #000;
            color: #fff;
            transition: background-color 0.4s ease, color 0.4s ease;
            perspective: 1000px;
        }
        
        body.light-mode {
            background-color: #f8f9fa;
            color: #121212;
        }
        
        
        /* NEW: Online Now Badge */
        .online-badge {
            position: fixed;
            top: 20px;
            right: 250px;
            background: linear-gradient(90deg, #00ff88, #00ccff);
            color: #000;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 5px;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
            animation: pulse 2s infinite;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .light-mode .online-badge {
            color: #000;
        }
        
        .online-dot {
            width: 8px;
            height: 8px;
            background-color: #00ff00;
            border-radius: 50%;
            animation: blink 1.5s infinite;
        }
        
        /* NEW: Status Real-Time */
        .status-container {
            position: fixed;
            top: 60px;
            right: 250px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 8px 15px;
            font-size: 0.8rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 1000;
            display: none;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .light-mode .status-container {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .status-text {
            color: #4a6cf7;
            font-weight: 600;
        }
        
        /* NEW: Parallax Container */
        .parallax-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            overflow: hidden;
        }
        
        .parallax-layer {
            position: absolute;
            width: 120%;
            height: 120%;
            top: -10%;
            left: -10%;
            background-image: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), 
                rgba(74, 108, 247, 0.1) 0%, 
                rgba(74, 108, 247, 0.05) 25%, 
                transparent 70%);
            transition: transform 0.5s ease-out, background-image 0.5s ease;
            pointer-events: none;
        }
        
        /* Oradev Intro Overlay */
        #oradev-intro {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 1;
            visibility: visible;
            transition: opacity 0.8s ease, visibility 0.8s ease;
        }
        
        #oradev-intro.fade-out {
            opacity: 0;
            visibility: hidden;
        }
        
        .oradev-container {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .oradev-logo-container {
            position: absolute;
            width: 120px;
            height: 120px;
            z-index: 20;
        }
        
        .oradev-logo {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: contain;
            filter: drop-shadow(0 4px 12px rgba(255, 255, 255, 0.3));
        }
        
        .oradev-text {
            position: absolute;
            font-family: 'Poppins', sans-serif;
            font-weight: 800;
            font-size: 3.5rem;
            color: #fff;
            opacity: 0;
            z-index: 30;
            white-space: nowrap;
        }
        
        @keyframes oradev-roll-in {
            0% { transform: translateX(300px) rotate(0deg); opacity: 0; }
            100% { transform: translateX(0) rotate(360deg); opacity: 1; }
        }
        
        @keyframes oradev-return-center {
            0% { transform: translateX(0) rotate(360deg); }
            100% { transform: translateX(0) rotate(720deg); }
        }
        
        @keyframes oradev-grow-logo {
            0% { width: 120px; height: 120px; transform: translateX(0) rotate(720deg); }
            100% { width: 140px; height: 140px; transform: translateX(0) rotate(720deg); }
        }
        
        @keyframes oradev-move-left {
            0% { transform: translateX(0) rotate(720deg); }
            100% { transform: translateX(-130px) rotate(720deg); }
        }
        
        @keyframes oradev-text-slide {
            0% { opacity: 0; transform: translateX(0) scale(0.5); letter-spacing: 20px; }
            100% { opacity: 1; transform: translateX(60px) scale(1); letter-spacing: normal; }
        }
        
        /* Enhanced Loading Screen */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.8s ease, visibility 0.8s ease;
        }
        
        .light-mode #loading-screen {
            background-color: #f8f9fa;
        }
        
        .loading-container {
            text-align: center;
            max-width: 600px;
            padding: 2rem;
        }
        
        .loading-text {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #4a6cf7;
        }
        
        .light-mode .loading-text {
            color: #4a6cf7;
        }
        
        .loading-quote {
            font-size: 1.3rem;
            font-style: italic;
            margin-bottom: 2rem;
            min-height: 3rem;
            color: rgba(255, 255, 255, 0.8);
            padding: 1rem;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            transition: all 0.5s ease;
        }
        
        .light-mode .loading-quote {
            color: rgba(0, 0, 0, 0.8);
            background: rgba(0, 0, 0, 0.05);
        }
        
        .loading-progress {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            color: #fff;
        }
        
        .light-mode .loading-progress {
            color: #121212;
        }
        
        .loading-bar {
            width: 300px;
            height: 6px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin: 0 auto 1rem;
        }
        
        .light-mode .loading-bar {
            background-color: rgba(0, 0, 0, 0.1);
        }
        
        .loading-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #4a6cf7, #8a6cf7);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        .loading-percent-text {
            font-size: 1rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.7);
            letter-spacing: 1px;
        }
        
        .light-mode .loading-percent-text {
            color: rgba(0, 0, 0, 0.7);
        }
        
        /* NEW: Announcement System */
        .announcement-btn {
            position: fixed;
            top: 90px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
            z-index: 1000;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s ease forwards;
            animation-delay: 0.6s;
        }
        
        .light-mode .announcement-btn {
            background-color: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #121212;
        }
        
        .announcement-btn:hover {
            transform: scale(1.1);
            background-color: #ff6b6b;
            color: white;
        }
        
        .announcement-btn.has-news::after {
            content: '';
            position: absolute;
            top: 5px;
            right: 5px;
            width: 10px;
            height: 10px;
            background-color: #ff4757;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        /* Announcement Modal */
        .announcement-modal .modal-content {
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            cursor: default;
        }
        
        .announcement-list {
            margin-top: 1rem;
        }
        
        .announcement-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 1.2rem;
            margin-bottom: 1rem;
            border-left: 4px solid #4a6cf7;
            transition: all 0.3s ease;
        }
        
        .light-mode .announcement-item {
            background: rgba(0, 0, 0, 0.03);
        }
        
        .announcement-item:hover {
            transform: translateX(5px);
            background: rgba(74, 108, 247, 0.1);
        }
        
        .announcement-date {
            font-size: 0.85rem;
            color: #4a6cf7;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .announcement-text {
            font-size: 1rem;
            line-height: 1.5;
        }
        
        .announcement-new {
            border-left-color: #ff6b6b;
            animation: newPulse 2s infinite;
        }
        
        @keyframes newPulse {
            0%, 100% { box-shadow: 0 0 5px rgba(255, 107, 107, 0.3); }
            50% { box-shadow: 0 0 15px rgba(255, 107, 107, 0.5); }
        }
        
        /* NEW: Chatbox System */
        .chatbox-btn {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #4a6cf7;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(74, 108, 247, 0.4);
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s ease forwards;
            animation-delay: 0.7s;
        }
        
        .chatbox-btn:hover {
            transform: scale(1.1) translateY(-5px);
            box-shadow: 0 10px 20px rgba(74, 108, 247, 0.6);
        }
        
        .chatbox-btn.has-messages::after {
            content: '';
            position: absolute;
            top: 5px;
            right: 5px;
            width: 12px;
            height: 12px;
            background-color: #ff4757;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        /* Chatbox Modal */
        .chatbox-modal .modal-content {
            max-width: 500px;
            max-height: 85vh;
            display: flex;
            flex-direction: column;
            padding: 1.5rem;
            cursor: default;
        }
        
        .chatbox-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 1.5rem;
        }
        
        .chatbox-icon {
            font-size: 1.5rem;
            color: #4a6cf7;
        }
        
        .chatbox-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #4a6cf7;
        }
        
        .chatbox-messages {
            flex-grow: 1;
            overflow-y: auto;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            max-height: 400px;
            min-height: 300px;
        }
        
        .light-mode .chatbox-messages {
            background: rgba(0, 0, 0, 0.03);
        }
        
        .message-item {
            margin-bottom: 1rem;
            padding: 0.8rem 1rem;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            border-left: 4px solid #4a6cf7;
            position: relative;
            cursor: default;
        }
        
        .light-mode .message-item {
            background: rgba(0, 0, 0, 0.05);
        }
        
        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .message-name {
            font-weight: 600;
            color: #4a6cf7;
            font-size: 0.95rem;
        }
        
        .message-time {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.6);
            font-style: italic;
        }
        
        .light-mode .message-time {
            color: rgba(0, 0, 0, 0.6);
        }
        
        .message-text {
            font-size: 0.95rem;
            line-height: 1.4;
            word-break: break-word;
        }
        
        .message-delete {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: rgba(255, 255, 255, 0.5);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: none;
            font-size: 0.7rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .message-item:hover .message-delete {
            opacity: 1;
        }
        
        .message-delete:hover {
            background: rgba(255, 107, 107, 0.8);
            color: white;
        }
        
        /* Input Form Styles */
        .chatbox-input-form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .name-input-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .name-input-label {
            font-size: 0.9rem;
            font-weight: 500;
            white-space: nowrap;
            cursor: default;
        }
        
        .chatbox-name-input {
            flex-grow: 1;
            padding: 0.6rem 0.8rem;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 0.9rem;
            cursor: text;
        }
        
        .light-mode .chatbox-name-input {
            border: 1px solid rgba(0, 0, 0, 0.2);
            background: rgba(0, 0, 0, 0.05);
            color: #121212;
        }
        
        .chatbox-input-container {
            display: flex;
            gap: 10px;
        }
        
        .chatbox-input {
            flex-grow: 1;
            padding: 0.8rem 1rem;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 0.95rem;
            cursor: text;
        }
        
        .light-mode .chatbox-input {
            border: 1px solid rgba(0, 0, 0, 0.2);
            background: rgba(0, 0, 0, 0.05);
            color: #121212;
        }
        
        .chatbox-input:focus {
            outline: none;
            border-color: #4a6cf7;
        }
        
        .chatbox-send {
            padding: 0.8rem 1.5rem;
            background: #4a6cf7;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: none;
            font-weight: 600;
            transition: all 0.3s ease;
            min-width: 80px;
        }
        
        .chatbox-send:hover {
            background: #3a5ce5;
            transform: translateY(-2px);
        }
        
        /* Simulate Chat Button */
        .simulate-chat-btn {
            padding: 0.6rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            cursor: none;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            margin-top: 0.5rem;
            text-align: center;
        }
        
        .light-mode .simulate-chat-btn {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #121212;
        }
        
        .simulate-chat-btn:hover {
            background: rgba(74, 108, 247, 0.2);
        }
        
        /* NEW: Real-time Clock & Date */
        .clock-container {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 12px 18px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 1000;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s ease forwards;
            animation-delay: 0.4s;
            cursor: default;
        }
        
        .light-mode .clock-container {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .time-display {
            font-size: 1.8rem;
            font-weight: 700;
            color: #4a6cf7;
            margin-bottom: 5px;
            font-variant-numeric: tabular-nums;
        }
        
        .date-display {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
        }
        
        .light-mode .date-display {
            color: rgba(0, 0, 0, 0.8);
        }
        
        /* Jumpscare Overlay */
        #jumpscare-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .jumpscare-image {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            animation: jumpscareZoom 0.1s ease-out;
        }
        
        @keyframes jumpscareZoom {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        /* Header Controls */
        .header-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }
        
        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .light-mode .control-btn {
            background-color: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #121212;
        }
        
        .control-btn:hover {
            transform: scale(1.1);
            background-color: #4a6cf7;
            color: white;
        }
        
        .theme-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
        }
        
        /* Slider Container */
        .slider-container {
            position: relative;
            width: 100%;
            min-height: 100vh;
            overflow: hidden;
        }
        
        .slider-wrapper {
            display: flex;
            width: 300%;
            height: 100%;
            transition: transform 0.7s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        
        .slider-wrapper.slide-2 {
            transform: translateX(-33.33%);
        }
        
        .slider-wrapper.slide-3 {
            transform: translateX(-66.66%);
        }
        
        .slide {
            width: 33.33%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            position: relative;
        }
        
        /* Main Content */
        .content {
            position: relative;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            width: 100%;
        }
        
        .profile-section {
            text-align: center;
            margin-bottom: 3rem;
            max-width: 800px;
            animation: fadeInUp 1s ease forwards;
            opacity: 0;
            animation-delay: 0.3s;
        }
        
        .profile-pic {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            margin-bottom: 2rem;
            transition: transform 0.3s ease, border-color 0.3s ease;
            cursor: none;
        }
        
        .light-mode .profile-pic {
            border: 5px solid rgba(0, 0, 0, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .profile-pic:hover {
            transform: scale(1.05);
            border-color: #4a6cf7;
            animation: glow 1.5s infinite ease-in-out;
        }
        
        .name {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 1rem;
            color: inherit;
        }
        
        .welcome-text {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 2rem;
            color: #4a6cf7;
            text-align: center;
        }
        
        .bio {
            font-size: 1.3rem;
            font-weight: 500;
            line-height: 1.8;
            margin-bottom: 0.5rem;
            color: inherit;
        }
        
        .light-mode .bio {
            color: #333;
        }
        
        .bio-icon {
            margin-right: 8px;
            font-size: 1.2rem;
        }
        
        .roles-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .role-tag {
            background-color: rgba(74, 108, 247, 0.15);
            color: #4a6cf7;
            padding: 0.5rem 1.2rem;
            border-radius: 20px;
            font-size: 1rem;
            font-weight: 600;
            border: 1px solid rgba(74, 108, 247, 0.3);
            transition: all 0.3s ease;
            cursor: default;
        }
        
        .light-mode .role-tag {
            background-color: rgba(74, 108, 247, 0.1);
            border: 1px solid rgba(74, 108, 247, 0.2);
        }
        
        .role-tag:hover {
            background-color: rgba(74, 108, 247, 0.25);
            transform: translateY(-2px);
            animation: float 0.6s ease-in-out;
        }
        
        /* Buttons Container */
        .buttons-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            max-width: 400px;
            width: 100%;
            animation: fadeInUp 1s ease forwards;
            opacity: 0;
            animation-delay: 0.5s;
        }
        
        .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 1.2rem 1.5rem;
            background-color: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: #fff;
            font-size: 1.1rem;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s ease forwards;
        }
        
        .light-mode .btn {
            background-color: rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #121212;
        }
        
        .btn:hover {
            background-color: rgba(255, 255, 255, 0.9);
            color: #121212;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            animation: pulse 0.3s ease, shake 0.5s ease;
        }
        
        .light-mode .btn:hover {
            background-color: rgba(255, 255, 255, 0.9);
            color: #121212;
        }
        
        .btn i {
            font-size: 1.3rem;
            width: 24px;
            text-align: center;
        }
        
        .btn-text {
            flex-grow: 1;
            text-align: center;
            font-weight: 500;
        }
        
        /* Music Controls */
        .music-controls {
            position: fixed;
            top: 20px;
            left: 90px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }
        
        .music-control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.2rem;
            cursor: none;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s ease forwards;
            animation-delay: 0.3s;
        }
        
        .light-mode .music-control-btn {
            background-color: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #121212;
        }
        
        .music-control-btn:hover {
            transform: scale(1.1);
            background-color: #4a6cf7;
            color: white;
        }
        
        .music-control-btn.playing {
            background-color: #4a6cf7;
            color: white;
        }
        
        .light-mode .music-control-btn.playing {
            background-color: #4a6cf7;
            color: white;
        }
        
        /* New Modals */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
        
        .light-mode .modal {
            background-color: rgba(0, 0, 0, 0.95);
        }
        
        .modal-content {
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: fadeInUp 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
            opacity: 0;
            cursor: default;
        }
        
        .light-mode .modal-content {
            background-color: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #4a6cf7;
        }
        
        .light-mode .modal-title {
            color: #4a6cf7;
        }
        
        .close-modal {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: none;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .close-modal:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        /* Programming Languages Modal */
        .languages-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
            margin-top: 1.5rem;
        }
        
        .language-category {
            margin-bottom: 1.5rem;
        }
        
        .language-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .light-mode .language-header {
            border-bottom: 2px solid rgba(0, 0, 0, 0.1);
        }
        
        .language-icon {
            font-size: 1.5rem;
            color: #4a6cf7;
        }
        
        .language-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #fff;
        }
        
        .light-mode .language-title {
            color: #121212;
        }
        
        .language-items {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
        }
        
        .language-item {
            background-color: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            padding: 0.8rem 1.2rem;
            font-size: 0.95rem;
            font-weight: 500;
            color: #fff;
            transition: all 0.3s ease;
            cursor: default;
        }
        
        .light-mode .language-item {
            background-color: rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #121212;
        }
        
        .language-item:hover {
            transform: translateY(-2px);
            background-color: rgba(74, 108, 247, 0.2);
        }
        
        /* Gallery Styles */
        .gallery-content {
            max-width: 90%;
            max-height: 90%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .gallery-image {
            max-width: 100%;
            max-height: 70vh;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            object-fit: contain;
        }
        
        .gallery-nav {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1.5rem;
            justify-content: center;
        }
        
        .gallery-thumbnail {
            width: 80px;
            height: 60px;
            object-fit: cover;
            border-radius: 5px;
            cursor: none;
            opacity: 0.6;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .gallery-thumbnail:hover, .gallery-thumbnail.active {
            opacity: 1;
            transform: scale(1.1);
        }
        
        .close-gallery-btn {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-size: 1rem;
            cursor: none;
            transition: background-color 0.3s ease;
        }
        
        .close-gallery-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        /* Favorite Person Modal */
        .favorite-person-image {
            max-width: 100%;
            max-height: 70vh;
            border-radius: 10px;
            object-fit: contain;
            margin-bottom: 1.5rem;
        }
        
        /* Favorite Musician Podium */
        .podium-container {
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        
        .podium-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .podium {
            width: 120px;
            height: 80px;
            border-radius: 8px 8px 0 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .podium-1 {
            background-color: #FFD700;
            height: 100px;
            color: #000;
        }
        
        .podium-2 {
            background-color: #C0C0C0;
            height: 85px;
            color: #000;
        }
        
        .podium-3 {
            background-color: #CD7F32;
            height: 70px;
            color: #000;
        }
        
        .podium-4 {
            background-color: #333;
            height: 55px;
            color: #fff;
        }
        
        .podium-name {
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 0.5rem;
        }
        
        .podium-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 50%;
            margin-bottom: 1rem;
            border: 3px solid;
        }
        
        .podium-1 .podium-image {
            border-color: #FFD700;
        }
        
        .podium-2 .podium-image {
            border-color: #C0C0C0;
        }
        
        .podium-3 .podium-image {
            border-color: #CD7F32;
        }
        
        .podium-4 .podium-image {
            border-color: #333;
        }
        
        /* Footer */
        .footer {
            margin-top: 3rem;
            text-align: center;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
            animation: fadeInUp 1s ease forwards;
            opacity: 0;
            animation-delay: 0.7s;
            cursor: default;
        }
        
        .light-mode .footer {
            color: rgba(0, 0, 0, 0.6);
        }
        
        /* Music Status Indicator */
        .music-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 8px 15px;
            font-size: 0.9rem;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: none;
            z-index: 1000;
            cursor: default;
        }
        
        .light-mode .music-status {
            background-color: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #121212;
        }
        
        .music-status.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        /* Slider Navigation Buttons */
        .slider-nav {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 1000;
        }
        
        .slider-nav-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s ease forwards;
            animation-delay: 0.5s;
        }
        
        .light-mode .slider-nav-btn {
            background-color: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #121212;
        }
        
        .slider-nav-btn:hover {
            transform: scale(1.1);
            background-color: #4a6cf7;
            color: white;
        }
        
        .slider-nav-btn.active {
            background-color: #4a6cf7;
            color: white;
        }
        
        .slide-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 8px 15px;
            font-size: 0.9rem;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 1000;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s ease forwards;
            animation-delay: 0.4s;
            cursor: default;
        }
        
        .light-mode .slide-indicator {
            background-color: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #121212;
        }
        
        /* Slide 2 Styles */
        .slide-2-content {
            width: 100%;
            max-width: 800px;
            text-align: center;
        }
        
        .slide-2-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 2rem;
            color: #4a6cf7;
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .apps-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
            width: 100%;
        }
        
        .app-btn {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 1.5rem;
            background-color: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: #fff;
            font-size: 1.1rem;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: none;
            backdrop-filter: blur(10px);
            text-align: left;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .light-mode .app-btn {
            background-color: rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #121212;
        }
        
        .app-btn:hover {
            background-color: rgba(255, 255, 255, 0.9);
            color: #121212;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .light-mode .app-btn:hover {
            background-color: rgba(255, 255, 255, 0.9);
            color: #121212;
        }
        
        .app-icon {
            font-size: 1.8rem;
            width: 40px;
            text-align: center;
            color: #4a6cf7;
        }
        
        .app-text {
            flex-grow: 1;
        }
        
        .app-title {
            font-weight: 600;
            margin-bottom: 0.3rem;
        }
        
        .app-desc {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        /* Music Player Section */
        .music-section {
            width: 100%;
            max-width: 800px;
            margin-top: 2rem;
        }
        
        .music-section-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #4a6cf7;
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .music-player-container {
            background-color: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            padding: 1.5rem;
            margin-bottom: 2rem;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .light-mode .music-player-container {
            background-color: rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .music-track {
            display: flex;
            align-items: center;
            padding: 1rem;
            margin-bottom: 1rem;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .light-mode .music-track {
            background-color: rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .music-track:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }
        
        .track-image {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
            margin-right: 1rem;
            flex-shrink: 0;
        }
        
        .track-info {
            flex-grow: 1;
            overflow: hidden;
        }
        
        .track-title {
            font-weight: 600;
            margin-bottom: 0.3rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .track-artist {
            font-size: 0.9rem;
            opacity: 0.8;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .track-controls {
            display: flex;
            gap: 10px;
            flex-shrink: 0;
        }
        
        .play-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #4a6cf7;
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: none;
            transition: all 0.3s ease;
        }
        
        .play-btn:hover {
            transform: scale(1.1);
            background-color: #3a5ce5;
        }
        
        .play-btn.playing {
            background-color: #ff4757;
        }
        
        .play-btn.playing:hover {
            background-color: #ff3742;
        }
        
        .play-btn.disabled {
            background-color: #666;
            cursor: not-allowed;
        }
        
        .play-btn.disabled:hover {
            transform: none;
            background-color: #666;
        }
        
        .request-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
            flex-wrap: wrap;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .request-btn {
            padding: 1rem 1.5rem;
            background-color: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            color: #fff;
            font-size: 1rem;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: none;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .light-mode .request-btn {
            background-color: rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #121212;
        }
        
        .request-btn:hover {
            background-color: #4a6cf7;
            color: white;
            transform: translateY(-2px);
        }
        
        /* Gallery Request Modal */
        .gallery-request-content {
            max-width: 90%;
            max-height: 90%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .empty-gallery-message {
            text-align: center;
            padding: 3rem 2rem;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.2rem;
            max-width: 500px;
            cursor: default;
        }
        
        .light-mode .empty-gallery-message {
            color: rgba(0, 0, 0, 0.7);
        }
        
        /* NEW: Particle Container */
        #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }
        
        /* NEW: Typing Effect */
        .typing-effect {
            position: relative;
            display: inline-block;
        }
        
        .typing-effect::after {
            content: '|';
            position: absolute;
            right: -5px;
            top: 0;
            color: #4a6cf7;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        /* NEW: Scroll Animation Class */
        .scroll-reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }
        
        .scroll-reveal.revealed {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* NEW: Particles Control Button */
        .particles-control-btn {
            position: fixed;
            top: 20px;
            right: 150px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.2rem;
            cursor: none;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
            z-index: 1000;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s ease forwards;
            animation-delay: 0.5s;
        }
        
        .light-mode .particles-control-btn {
            background-color: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #121212;
        }
        
        .particles-control-btn:hover {
            transform: scale(1.1);
            background-color: #4a6cf7;
            color: white;
        }
        
        .particles-control-btn.active {
            background-color: #4a6cf7;
            color: white;
        }
        
        /* NEW: Slide 3 Styles */
        .slide-3-content {
            width: 100%;
            max-width: 800px;
            text-align: center;
        }
        
        .slide-3-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 2rem;
            color: #4a6cf7;
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .coming-soon-container {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            padding: 3rem 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .light-mode .coming-soon-container {
            background: rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .coming-soon-icon {
            font-size: 4rem;
            color: #4a6cf7;
            margin-bottom: 1.5rem;
        }
        
        .coming-soon-text {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: inherit;
        }
        
        .light-mode .coming-soon-text {
            color: #121212;
        }
        
        /* NEW: Mini Games Styles */
        .games-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
            margin-bottom: 2rem;
            width: 100%;
        }
        
        .game-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
            cursor: none;
            text-align: center;
        }
        
        .light-mode .game-card {
            background: rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .game-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .game-icon {
            font-size: 2.5rem;
            color: #4a6cf7;
            margin-bottom: 1rem;
        }
        
        .game-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #fff;
        }
        
        .light-mode .game-title {
            color: #121212;
        }
        
        .game-desc {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 1.5rem;
        }
        
        .light-mode .game-desc {
            color: rgba(0, 0, 0, 0.7);
        }
        
        .play-game-btn {
            padding: 0.8rem 1.5rem;
            background: #4a6cf7;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: none;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .play-game-btn:hover {
            background: #3a5ce5;
            transform: translateY(-2px);
        }
        
        /* Game Modal Styles */
        .game-modal .modal-content {
            max-width: 600px;
            max-height: 85vh;
            overflow-y: auto;
        }
        
        .game-screen {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            text-align: center;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .light-mode .game-screen {
            background: rgba(0, 0, 0, 0.03);
        }
        
        .game-instructions {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
        }
        
        .light-mode .game-instructions {
            color: rgba(0, 0, 0, 0.8);
        }
        
        .reaction-box {
            width: 200px;
            height: 200px;
            background-color: #4a6cf7;
            border-radius: 10px;
            cursor: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1.2rem;
            transition: background-color 0.3s ease;
            margin: 1rem auto;
        }
        
        .reaction-box.waiting {
            background-color: #4a6cf7;
        }
        
        .reaction-box.ready {
            background-color: #00ff88;
        }
        
        .reaction-box.too-fast {
            background-color: #ff4757;
        }
        
        .number-input {
            padding: 1rem;
            font-size: 1.5rem;
            width: 200px;
            text-align: center;
            border-radius: 8px;
            border: 2px solid #4a6cf7;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            margin: 1rem 0;
        }
        
        .light-mode .number-input {
            background: rgba(0, 0, 0, 0.05);
            color: #121212;
        }
        
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 1rem auto;
            max-width: 400px;
        }
        
        .memory-card {
            width: 80px;
            height: 80px;
            background-color: #4a6cf7;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 600;
            cursor: none;
            user-select: none;
            transition: transform 0.3s ease, background-color 0.3s ease;
        }
        
        .memory-card.flipped {
            background-color: #3a5ce5;
            transform: rotateY(180deg);
        }
        
        .memory-card.matched {
            background-color: #00ff88;
            cursor: default;
        }
        
        .tic-tac-toe-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            margin: 1rem auto;
            max-width: 300px;
        }
        
        .ttt-cell {
            width: 90px;
            height: 90px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: 600;
            cursor: none;
        }
        
        .light-mode .ttt-cell {
            background-color: rgba(0, 0, 0, 0.05);
        }
        
        .ttt-cell.x {
            color: #ff6b6b;
        }
        
        .ttt-cell.o {
            color: #4a6cf7;
        }
        
        .typing-text {
            font-size: 1.5rem;
            margin: 1.5rem 0;
            color: #fff;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .light-mode .typing-text {
            color: #121212;
            background: rgba(0, 0, 0, 0.03);
        }
        
        .typing-input {
            padding: 1rem;
            font-size: 1.2rem;
            width: 100%;
            max-width: 400px;
            border-radius: 8px;
            border: 2px solid #4a6cf7;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            margin: 1rem 0;
        }
        
        .light-mode .typing-input {
            background: rgba(0, 0, 0, 0.05);
            color: #121212;
        }
        
        .trivia-question {
            font-size: 1.2rem;
            margin: 1.5rem 0;
            color: #fff;
        }
        
        .light-mode .trivia-question {
            color: #121212;
        }
        
        .trivia-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 1rem 0;
        }
        
        .trivia-option {
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            cursor: none;
            transition: all 0.3s ease;
            text-align: left;
        }
        
        .light-mode .trivia-option {
            background: rgba(0, 0, 0, 0.05);
        }
        
        .trivia-option:hover {
            background: rgba(74, 108, 247, 0.2);
        }
        
        .trivia-option.correct {
            background: rgba(0, 255, 136, 0.2);
            border-left: 4px solid #00ff88;
        }
        
        .trivia-option.incorrect {
            background: rgba(255, 107, 107, 0.2);
            border-left: 4px solid #ff6b6b;
        }
        
        .game-stats {
            display: flex;
            justify-content: space-around;
            margin: 1.5rem 0;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        .light-mode .game-stats {
            background: rgba(0, 0, 0, 0.03);
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #4a6cf7;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .light-mode .stat-label {
            color: rgba(0, 0, 0, 0.7);
        }
        
        /* Login/Register Modal */
        .auth-modal .modal-content {
            max-width: 400px;
        }
        
        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .auth-input {
            padding: 0.8rem 1rem;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }
        
        .light-mode .auth-input {
            border: 1px solid rgba(0, 0, 0, 0.2);
            background: rgba(0, 0, 0, 0.05);
            color: #121212;
        }
        
        .auth-btn {
            padding: 0.8rem 1rem;
            background: #4a6cf7;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: none;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }
        
        .auth-btn:hover {
            background: #3a5ce5;
        }
        
        .auth-switch {
            text-align: center;
            margin-top: 1rem;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .light-mode .auth-switch {
            color: rgba(0, 0, 0, 0.7);
        }
        
        .auth-link {
            color: #4a6cf7;
            cursor: none;
            text-decoration: underline;
        }
        
        /* Leaderboard Styles */
        .leaderboard-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 2rem;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .light-mode .leaderboard-container {
            background: rgba(0, 0, 0, 0.03);
        }
        
        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .leaderboard-table th {
            text-align: left;
            padding: 0.8rem;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            color: #4a6cf7;
            font-weight: 600;
        }
        
        .light-mode .leaderboard-table th {
            border-bottom: 2px solid rgba(0, 0, 0, 0.1);
        }
        
        .leaderboard-table td {
            padding: 0.8rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .light-mode .leaderboard-table td {
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .leaderboard-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .light-mode .leaderboard-table tr:hover {
            background: rgba(0, 0, 0, 0.03);
        }
        
        .rank-1 {
            background: linear-gradient(90deg, rgba(255, 215, 0, 0.1), transparent);
        }
        
        .rank-2 {
            background: linear-gradient(90deg, rgba(192, 192, 192, 0.1), transparent);
        }
        
        .rank-3 {
            background: linear-gradient(90deg, rgba(205, 127, 50, 0.1), transparent);
        }
        
        /* File Sharing Styles */
        .file-sharing-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 2rem;
        }
        
        .light-mode .file-sharing-container {
            background: rgba(0, 0, 0, 0.03);
        }
        
        .file-upload-area {
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            cursor: none;
            transition: all 0.3s ease;
            margin-bottom: 1.5rem;
        }
        
        .light-mode .file-upload-area {
            border: 2px dashed rgba(0, 0, 0, 0.2);
        }
        
        .file-upload-area:hover {
            border-color: #4a6cf7;
            background: rgba(74, 108, 247, 0.05);
        }
        
        .file-upload-area.dragover {
            border-color: #00ff88;
            background: rgba(0, 255, 136, 0.05);
        }
        
        .file-list {
            margin-top: 1.5rem;
        }
        
        .file-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 8px;
            margin-bottom: 0.8rem;
        }
        
        .light-mode .file-item {
            background: rgba(0, 0, 0, 0.03);
        }
        
        .file-icon {
            font-size: 1.5rem;
            color: #4a6cf7;
            margin-right: 1rem;
            width: 40px;
        }
        
        .file-info {
            flex-grow: 1;
        }
        
        .file-name {
            font-weight: 600;
            margin-bottom: 0.3rem;
        }
        
        .file-size {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
        }
        
        .light-mode .file-size {
            color: rgba(0, 0, 0, 0.6);
        }
        
        .file-actions {
            display: flex;
            gap: 10px;
        }
        
        .file-action-btn {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 5px;
            color: white;
            cursor: none;
            transition: all 0.3s ease;
        }
        
        .light-mode .file-action-btn {
            background: rgba(0, 0, 0, 0.05);
            color: #121212;
        }
        
        .file-action-btn:hover {
            background: #4a6cf7;
            color: white;
        }
        
        /* Video Call Styles */
        .video-call-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 2rem;
        }
        
        .light-mode .video-call-container {
            background: rgba(0, 0, 0, 0.03);
        }
        
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .video-item {
            position: relative;
            background: #000;
            border-radius: 10px;
            overflow: hidden;
            aspect-ratio: 16/9;
        }
        
        .video-player {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .video-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            padding: 0.5rem;
            color: white;
        }
        
        .call-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .call-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: none;
            transition: all 0.3s ease;
        }
        
        .call-btn:hover {
            background: #4a6cf7;
            transform: scale(1.1);
        }
        
        .call-btn.active {
            background: #ff4757;
        }
        
        .call-btn.end-call {
            background: #ff4757;
        }
        
        .chat-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 1rem;
            margin-top: 1.5rem;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .light-mode .chat-container {
            background: rgba(0, 0, 0, 0.03);
        }
        
        /* AI Assistant Styles */
        .ai-assistant-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 2rem;
        }
        
        .light-mode .ai-assistant-container {
            background: rgba(0, 0, 0, 0.03);
        }
        
        .ai-messages {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 1.5rem;
        }
        
        .ai-message {
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 10px;
            max-width: 80%;
        }
        
        .ai-message.user {
            background: rgba(74, 108, 247, 0.2);
            margin-left: auto;
            border-bottom-right-radius: 2px;
        }
        
        .ai-message.assistant {
            background: rgba(255, 255, 255, 0.1);
            margin-right: auto;
            border-bottom-left-radius: 2px;
        }
        
        .light-mode .ai-message.assistant {
            background: rgba(0, 0, 0, 0.05);
        }
        
        .ai-question-choices {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 1rem;
        }

        .ai-question-btn {
            padding: 0.6rem 1rem;
            background: rgba(74, 108, 247, 0.1);
            border: 1px solid rgba(74, 108, 247, 0.3);
            border-radius: 6px;
            color: #4a6cf7;
            cursor: none;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .light-mode .ai-question-btn {
            background: rgba(74, 108, 247, 0.05);
            border: 1px solid rgba(74, 108, 247, 0.2);
        }

        .ai-question-btn:hover {
            background: rgba(74, 108, 247, 0.2);
            transform: translateY(-1px);
        }

        .ai-input-container {
            display: flex;
            gap: 10px;
        }

        .ai-input {
            flex-grow: 1;
            padding: 0.8rem 1rem;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }

        .light-mode .ai-input {
            border: 1px solid rgba(0, 0, 0, 0.2);
            background: rgba(0, 0, 0, 0.05);
            color: #121212;
        }

        .ai-send-btn {
            padding: 0.8rem 1.5rem;
            background: #4a6cf7;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: none;
            font-weight: 600;
        }
        
        /* Progress Container */
        .progress-container {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 2rem 0;
        }
        
        .progress-bar {
            height: 20px;
            background: linear-gradient(90deg, #4a6cf7, #8a6cf7);
            border-radius: 10px;
            width: 45%;
            transition: width 0.5s ease;
        }
        
        .progress-text {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 0.5rem;
        }
        
        .light-mode .progress-text {
            color: rgba(0, 0, 0, 0.8);
        }
        
        .features-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .feature-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .light-mode .feature-item {
            background: rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .feature-item:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.1);
        }
        
        .feature-icon {
            font-size: 2rem;
            color: #4a6cf7;
            margin-bottom: 1rem;
        }
        
        .feature-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .feature-desc {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .light-mode .feature-desc {
            color: rgba(0, 0, 0, 0.7);
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(0, 255, 136, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(0, 255, 136, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(0, 255, 136, 0); }
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px #4a6cf7; }
            50% { box-shadow: 0 0 20px #4a6cf7; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        /* Enhanced Animations */
        .theme-toggle {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s ease forwards;
            animation-delay: 0.2s;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            }

            .slider-container {
                min-height: auto;
                height: auto;
            }

            .slide {
                min-height: auto;
                height: auto;
                padding: 1rem;
            }

            .content {
                min-height: auto;
                padding: 1rem;
            }

            .name {
                font-size: 2.5rem;
            }

            .welcome-text {
                font-size: 1.8rem;
            }

            .bio {
                font-size: 1.1rem;
            }

            .profile-pic {
                width: 150px;
                height: 150px;
            }

            .btn {
                padding: 1rem 1.2rem;
                font-size: 1rem;
            }
            
            .control-btn {
                width: 45px;
                height: 45px;
                font-size: 1rem;
            }
            
            .music-controls {
                top: 15px;
                left: 75px;
            }
            
            .theme-toggle {
                top: 15px;
                left: 15px;
            }
            
            .music-status {
                bottom: 15px;
                right: 15px;
            }
            
            .loading-progress {
                font-size: 2.5rem;
            }
            
            .loading-bar {
                width: 250px;
            }
            
            .modal-content {
                padding: 1.5rem;
                width: 95%;
            }
            
            .chatbox-modal .modal-content {
                padding: 1rem;
            }
            
            .role-tag {
                font-size: 0.9rem;
                padding: 0.4rem 1rem;
            }
            
            .podium-container {
                gap: 1rem;
            }
            
            .podium {
                width: 100px;
            }
            
            .podium-image {
                width: 80px;
                height: 80px;
            }
            
            .slider-nav {
                bottom: 15px;
            }
            
            .slider-nav-btn {
                width: 45px;
                height: 45px;
                font-size: 1rem;
            }
            
            .slide-indicator {
                top: 15px;
                right: 15px;
                font-size: 0.8rem;
                padding: 6px 12px;
            }
            
            .slide-2-title {
                font-size: 2rem;
            }
            
            .apps-container {
                grid-template-columns: 1fr;
            }
            
            .app-btn {
                padding: 1.2rem;
            }
            
            .app-icon {
                font-size: 1.5rem;
            }
            
            .music-section-title {
                font-size: 1.5rem;
            }
            
            .music-track {
                padding: 0.8rem;
            }
            
            .track-image {
                width: 50px;
                height: 50px;
            }
            
            .play-btn {
                width: 35px;
                height: 35px;
            }
            
            /* NEW: Responsive particles controls */
            .particles-control-btn {
                top: 15px;
                right: 125px;
                width: 45px;
                height: 45px;
                font-size: 1rem;
            }
            
            /* Oradev Intro Responsive */
            .oradev-text {
                font-size: 2.5rem;
            }
            
            .oradev-logo-container {
                width: 100px;
                height: 100px;
            }
            
            @keyframes oradev-move-left {
                0% { transform: translateX(0) rotate(720deg); }
                100% { transform: translateX(-100px) rotate(720deg); }
            }
            
            @keyframes oradev-grow-logo {
                0% { width: 100px; height: 100px; transform: translateX(0) rotate(720deg); }
                100% { width: 120px; height: 120px; transform: translateX(0) rotate(720deg); }
            }
            
            /* NEW: Responsive Announcement & Chatbox */
            .announcement-btn {
                top: 80px;
                right: 15px;
                width: 45px;
                height: 45px;
                font-size: 1rem;
            }
            
            .chatbox-btn {
                bottom: 80px;
                right: 15px;
                width: 55px;
                height: 55px;
                font-size: 1.3rem;
            }
            
            .clock-container {
                bottom: 15px;
                left: 15px;
                padding: 10px 15px;
            }
            
            .time-display {
                font-size: 1.5rem;
            }
            
            .date-display {
                font-size: 0.8rem;
            }
            
            /* NEW: Online Badge Responsive */
            .online-badge {
                right: 200px;
                font-size: 0.7rem;
                padding: 5px 10px;
            }
            
            .status-container {
                right: 200px;
                top: 50px;
                font-size: 0.7rem;
                padding: 6px 12px;
            }
            
            /* NEW: Slide 3 Responsive */
            .slide-3-title {
                font-size: 2rem;
            }
            
            .coming-soon-icon {
                font-size: 3rem;
            }
            
            .coming-soon-text {
                font-size: 1.3rem;
            }
            
            .features-list {
                grid-template-columns: 1fr;
            }
            
            /* Games Responsive */
            .games-container {
                grid-template-columns: 1fr;
            }
            
            .memory-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .memory-card {
                width: 70px;
                height: 70px;
            }
            
            .video-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .name {
                font-size: 2rem;
            }
            
            .welcome-text {
                font-size: 1.5rem;
            }
            
            .bio {
                font-size: 1rem;
            }
            
            .content {
                padding: 1rem;
            }
            
            .profile-pic {
                width: 130px;
                height: 130px;
            }
            
            .buttons-container {
                max-width: 100%;
            }
            
            .gallery-thumbnail {
                width: 60px;
                height: 45px;
            }
            
            .music-controls {
                left: 70px;
            }
            
            .loading-progress {
                font-size: 2rem;
            }
            
            .loading-bar {
                width: 200px;
            }
            
            .roles-container {
                gap: 0.5rem;
            }
            
            .role-tag {
                font-size: 0.85rem;
                padding: 0.3rem 0.8rem;
            }
            
            .podium-container {
                flex-direction: column;
                align-items: center;
            }
            
            .podium-item {
                flex-direction: row;
                gap: 1rem;
                align-items: center;
            }
            
            .podium {
                width: 80px;
                height: 60px;
            }
            
            .podium-1 {
                height: 70px;
            }
            
            .podium-2 {
                height: 65px;
            }
            
            .podium-3 {
                height: 60px;
            }
            
            .podium-4 {
                height: 55px;
            }
            
            .slider-nav {
                gap: 5px;
            }
            
            .slider-nav-btn {
                width: 40px;
                height: 40px;
            }
            
            .slide-2-title {
                font-size: 1.8rem;
            }
            
            .app-btn {
                flex-direction: column;
                text-align: center;
                gap: 10px;
                padding: 1rem;
            }
            
            .app-icon {
                margin-bottom: 0.5rem;
            }
            
            .music-track {
                flex-direction: column;
                text-align: center;
                padding: 1rem;
            }
            
            .track-image {
                margin-right: 0;
                margin-bottom: 1rem;
            }
            
            .track-info {
                text-align: center;
                margin-bottom: 1rem;
            }
            
            .request-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .request-btn {
                width: 100%;
                max-width: 250px;
                justify-content: center;
            }
            
            /* NEW: Mobile particles controls */
            .particles-control-btn {
                right: 115px;
                width: 40px;
                height: 40px;
                font-size: 0.9rem;
            }
            
            /* Oradev Intro Mobile */
            .oradev-text {
                font-size: 2rem;
            }
            
            .oradev-logo-container {
                width: 80px;
                height: 80px;
            }
            
            @keyframes oradev-move-left {
                0% { transform: translateX(0) rotate(720deg); }
                100% { transform: translateX(-80px) rotate(720deg); }
            }
            
            @keyframes oradev-grow-logo {
                0% { width: 80px; height: 80px; transform: translateX(0) rotate(720deg); }
                100% { width: 100px; height: 100px; transform: translateX(0) rotate(720deg); }
            }
            
            @keyframes oradev-text-slide {
                0% { opacity: 0; transform: translateX(0) scale(0.5); letter-spacing: 15px; }
                100% { opacity: 1; transform: translateX(40px) scale(1); letter-spacing: normal; }
            }
            
            /* NEW: Mobile Announcement & Chatbox */
            .announcement-btn {
                right: 105px;
                width: 40px;
                height: 40px;
            }
            
            .chatbox-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
            
            .clock-container {
                padding: 8px 12px;
            }
            
            .time-display {
                font-size: 1.3rem;
            }
            
            .date-display {
                font-size: 0.75rem;
            }
            
            /* NEW: Online Badge Mobile */
            .online-badge {
                right: 150px;
                font-size: 0.65rem;
                padding: 4px 8px;
            }
            
            .status-container {
                right: 150px;
                top: 45px;
                font-size: 0.65rem;
                padding: 5px 10px;
            }
            
            /* Chatbox mobile improvements */
            .chatbox-input-form {
                gap: 8px;
            }
            
            .name-input-container {
                flex-direction: column;
                align-items: stretch;
                gap: 5px;
            }
            
            .name-input-label {
                font-size: 0.85rem;
            }
            
            .chatbox-name-input {
                padding: 0.5rem 0.7rem;
            }
            
            .chatbox-input {
                padding: 0.7rem 0.9rem;
                font-size: 0.9rem;
            }
            
            .chatbox-send {
                padding: 0.7rem 1rem;
                font-size: 0.9rem;
            }
            
            /* NEW: Slide 3 Mobile */
            .slide-3-title {
                font-size: 1.8rem;
            }
            
            .coming-soon-container {
                padding: 2rem 1rem;
            }
            
            .coming-soon-icon {
                font-size: 2.5rem;
            }
            
            .coming-soon-text {
                font-size: 1.2rem;
            }
            
            .progress-bar {
                height: 15px;
            }
            
            .feature-item {
                padding: 1rem;
            }
            
            .feature-icon {
                font-size: 1.5rem;
            }
            
            .feature-title {
                font-size: 1.1rem;
            }
            
            /* Games Mobile */
            .memory-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 5px;
            }
            
            .memory-card {
                width: 60px;
                height: 60px;
                font-size: 1.2rem;
            }
            
            .ttt-cell {
                width: 70px;
                height: 70px;
                font-size: 2rem;
            }
            
            .reaction-box {
                width: 150px;
                height: 150px;
            }
            
            .typing-text {
                font-size: 1.2rem;
                padding: 0.8rem;
            }
            
            .typing-input {
                font-size: 1rem;
                padding: 0.8rem;
            }
        }
        
        /* NEW: Mobile Stack untuk kontrol yang banyak */
        @media (max-width: 380px) {
            .header-controls {
                flex-wrap: wrap;
                justify-content: flex-end;
            }
            
            .theme-toggle {
                top: 15px;
                left: 15px;
            }
            
            .music-controls {
                top: 15px;
                left: 65px;
            }
            
            .particles-control-btn {
                top: 15px;
                right: 110px;
            }
            
            .announcement-btn {
                top: 70px;
                right: 15px;
            }
            
            .online-badge {
                right: 130px;
                font-size: 0.6rem;
            }
            
            .status-container {
                right: 130px;
            }
            
            /* Games extra small */
            .memory-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 4px;
            }
            
            .memory-card {
                width: 55px;
                height: 55px;
                font-size: 1rem;
            }
        }
        
        /* NEW: Touch device optimizations */
        @media (hover: none) and (pointer: coarse) {
            .control-btn,
            .music-control-btn,
            .slider-nav-btn,
            .particles-control-btn,
            .announcement-btn,
            .chatbox-btn,
            .btn,
            .app-btn,
            .request-btn,
            .play-game-btn,
            .call-btn,
            .file-action-btn,
            .ai-send-btn,
            .auth-btn {
                cursor: pointer;
            }
        }
    </style>
</head>
<body class="loading">
    <!-- NEW: Parallax Container -->
    <div class="parallax-container">
        <div class="parallax-layer" id="parallax-layer-1"></div>
        <div class="parallax-layer" id="parallax-layer-2"></div>
    </div>
    
    <!-- Oradev Intro -->
    <div id="oradev-intro">
        <div class="oradev-container">
            <div class="oradev-logo-container">
                <img src="logo.png" alt="Oradev Logo" class="oradev-logo">
            </div>
            <div class="oradev-text">ORADEV</div>
        </div>
    </div>
    
    <!-- Enhanced Loading Screen -->
    <div id="loading-screen">
        <div class="loading-container">
            <div class="loading-text">Al'Majid</div>
            <div class="loading-quote" id="loading-quote">"Peler Bapak kau..."</div>
            <div class="loading-progress" id="loading-percentage">0%</div>
            <div class="loading-bar">
                <div class="loading-fill" id="loading-fill"></div>
            </div>
            <div class="loading-percent-text">Loading Portfolio</div>
        </div>
    </div>
    
    <!-- Jumpscare Overlay -->
    <div id="jumpscare-overlay">
        <img src="jumpscare.jpeg" alt="Jumpscare" class="jumpscare-image">
    </div>
    
    <!-- NEW: Particle Container -->
    <div id="particles-js"></div>
    
    <!-- NEW: Online Now Badge -->
    <div class="online-badge" id="online-badge">
        <div class="online-dot"></div>
        ONLINE NOW
    </div>
    
    <!-- NEW: Status Real-Time -->
    <div class="status-container" id="status-container">
        <span class="status-text" id="status-text">Available</span>
    </div>
    
    <!-- NEW: Clock & Date Display -->
    <div class="clock-container" id="clock-container">
        <div class="time-display" id="time-display">00:00:00</div>
        <div class="date-display" id="date-display">Hari, DD/MM/YYYY</div>
    </div>
    
    <!-- NEW: Announcement Button -->
    <button class="announcement-btn" id="announcement-btn">
        <i class="fas fa-bullhorn"></i>
    </button>
    
    <!-- NEW: Chatbox Button -->
    <button class="chatbox-btn" id="chatbox-btn">
        <i class="fas fa-comment-dots"></i>
    </button>
    
    <!-- Theme Toggle -->
    <button class="control-btn theme-toggle" id="theme-toggle">
        <i class="fas fa-moon"></i>
    </button>
    
    <!-- Particles Control Button -->
    <button class="particles-control-btn" id="particles-toggle">
        <i class="fas fa-star"></i>
    </button>
    
    <!-- Music Controls -->
    <div class="music-controls">
        <button class="music-control-btn" id="music-control">
            <i class="fas fa-music"></i>
        </button>
    </div>
    
    <!-- Music Status -->
    <div class="music-status" id="music-status">Musik dimatikan</div>
    
    <!-- Slide Indicator -->
    <div class="slide-indicator" id="slide-indicator">Slide 1/3</div>
    
    <!-- Slider Navigation -->
    <div class="slider-nav">
        <button class="slider-nav-btn active" id="slide-1-btn">
            <i class="fas fa-user"></i>
        </button>
        <button class="slider-nav-btn" id="slide-2-btn">
            <i class="fas fa-th-large"></i>
        </button>
        <button class="slider-nav-btn" id="slide-3-btn">
            <i class="fas fa-cogs"></i>
        </button>
    </div>
    
    <!-- Slider Container -->
    <div class="slider-container">
        <div class="slider-wrapper" id="slider-wrapper">
            <!-- Slide 1: Original Content -->
            <div class="slide" id="slide-1">
                <main class="content">
                    <section class="profile-section">
                        <img src="profil.jpg" alt="Al'Majid" class="profile-pic" id="profile-img">
                        <h1 class="welcome-text">Oi lek, selamat datang di website ku</h1>
                        <h1 class="name">Al'Majid</h1>
                        
                        <!-- Bio dengan Typing Effect -->
                        <p class="bio">
                            <i class="fas fa-code bio-icon"></i>
                            <span class="typing-effect" id="typing-text"></span>
                        </p>
                        
                        <!-- Roles Container -->
                        <div class="roles-container">
                            <span class="role-tag">UI/UX Designer</span>
                            <span class="role-tag">Website Programming</span>
                            <span class="role-tag">Frontend Developer</span>
                            <span class="role-tag">Backend Developer</span>
                            <span class="role-tag">Vibecoding</span>
                        </div>
                    </section>
                    
                    <div class="buttons-container">
                        <a href="https://oradevstore.vercel.app/" class="btn" target="_blank">
                            <i class="fas fa-globe"></i>
                            <span class="btn-text">Website</span>
                        </a>
                        
                        <a href="https://instagram.com/al_majid.16" class="btn" target="_blank">
                            <i class="fab fa-instagram"></i>
                            <span class="btn-text">Instagram</span>
                        </a>
                        
                        <a href="https://wa.me/6283853185739" class="btn" target="_blank">
                            <i class="fab fa-whatsapp"></i>
                            <span class="btn-text">WhatsApp</span>
                        </a>
                        
                        <a href="https://tiktok.com/@orasampurna" class="btn" target="_blank">
                            <i class="fab fa-tiktok"></i>
                            <span class="btn-text">TikTok</span>
                        </a>
                        
                        <!-- Tombol Spotify di atas Facebook -->
                        <button class="btn" id="spotify-btn">
                            <i class="fab fa-spotify"></i>
                            <span class="btn-text">Spotify</span>
                        </button>
                        
                        <a href="https://facebook.com/almajid.nafi" class="btn" target="_blank">
                            <i class="fab fa-facebook"></i>
                            <span class="btn-text">Facebook</span>
                        </a>
                        
                        <a href="mailto:almajidnafi@gmail.com" class="btn">
                            <i class="fas fa-envelope"></i>
                            <span class="btn-text">Email</span>
                        </a>

                        <a href="https://github.com/NaraToMajid" class="btn" target="_blank">
                            <i class="fab fa-github"></i>
                            <span class="btn-text">GitHub</span>
                        </a>

                        <!-- New Buttons -->
                        <button class="btn" id="programming-btn">
                            <i class="fas fa-code"></i>
                            <span class="btn-text">Programming Language</span>
                        </button>
                        
                        <button class="btn" id="favorite-person-btn">
                            <i class="fas fa-heart"></i>
                            <span class="btn-text">My Favorite Person</span>
                        </button>
                        
                        <button class="btn" id="myself-btn">
                            <i class="fas fa-user"></i>
                            <span class="btn-text">My Self</span>
                        </button>
                        
                        <button class="btn" id="friend-btn">
                            <i class="fas fa-user-friends"></i>
                            <span class="btn-text">My Friend</span>
                        </button>
                        
                        <button class="btn" id="randomize-btn">
                            <i class="fas fa-dice"></i>
                            <span class="btn-text">Randomize</span>
                        </button>
                        
                        <button class="btn" id="longing-btn">
                            <i class="fas fa-heartbeat"></i>
                            <span class="btn-text">My Longing</span>
                        </button>
                        
                        <button class="btn" id="favorite-musician-btn">
                            <i class="fas fa-guitar"></i>
                            <span class="btn-text">Favorite Musician</span>
                        </button>
                        
                        <button class="btn" id="family-btn">
                            <i class="fas fa-home"></i>
                            <span class="btn-text">Family</span>
                        </button>
                        
                        <button class="btn" id="gallery-btn">
                            <i class="fas fa-images"></i>
                            <span class="btn-text">Gallery</span>
                        </button>
                    </div>
                    
                    <div class="footer">
                        <p>&copy; 2025 Al'Majid. All rights reserved.</p>
                    </div>
                </main>
            </div>
            
            <!-- Slide 2: New Features -->
            <div class="slide" id="slide-2">
                <main class="content">
                    <section class="profile-section">
                        <h1 class="slide-2-title scroll-reveal">Tools & Features</h1>
                        <p class="bio scroll-reveal">Akses aplikasi dan fitur menarik lainnya</p>
                    </section>
                    
                    <div class="slide-2-content">
                        <!-- Apps Container -->
                        <div class="apps-container">
                            <!-- 3 Tombol Utama -->
                            <a href="https://kalkulator-one-beta.vercel.app/" class="app-btn scroll-reveal" target="_blank">
                                <div class="app-icon">
                                    <i class="fas fa-calculator"></i>
                                </div>
                                <div class="app-text">
                                    <div class="app-title">Kalkulator</div>
                                    <div class="app-desc">Kalkulator online dengan fitur lengkap</div>
                                </div>
                            </a>
                            
                            <a href="https://notepad-lake-tau.vercel.app/" class="app-btn scroll-reveal" target="_blank">
                                <div class="app-icon">
                                    <i class="fas fa-sticky-note"></i>
                                </div>
                                <div class="app-text">
                                    <div class="app-title">Notepad</div>
                                    <div class="app-desc">Catatan online dengan penyimpanan cloud</div>
                                </div>
                            </a>
                            
                            <a href="https://photobooth-beta-steel.vercel.app/" class="app-btn scroll-reveal" target="_blank">
                                <div class="app-icon">
                                    <i class="fas fa-camera"></i>
                                </div>
                                <div class="app-text">
                                    <div class="app-title">Photobooth</div>
                                    <div class="app-desc">Ambil foto dengan efek dan filter menarik</div>
                                </div>
                            </a>
                            
                            <!-- Tombol Embed dari iframe -->
                            <button class="app-btn scroll-reveal" id="deepseek-embed-btn">
                                <div class="app-icon">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div class="app-text">
                                    <div class="app-title">DeepSeek AI Chat</div>
                                    <div class="app-desc">Chat dengan AI canggih langsung di website</div>
                                </div>
                            </button>
                            
                            <button class="app-btn scroll-reveal" id="youtube-embed-btn">
                                <div class="app-icon">
                                    <i class="fab fa-youtube"></i>
                                </div>
                                <div class="app-text">
                                    <div class="app-title">YouTube Player</div>
                                    <div class="app-desc">Nonton YouTube langsung di website</div>
                                </div>
                            </button>
                            
                            <!-- Tombol Komiku Embed -->
                            <button class="app-btn scroll-reveal" id="komiku-embed-btn">
                                <div class="app-icon">
                                    <i class="fas fa-book"></i>
                                </div>
                                <div class="app-text">
                                    <div class="app-title">Komiku</div>
                                    <div class="app-desc">Baca komik online gratis di website</div>
                                </div>
                            </button>
                        </div>
                        
                        <!-- Music Player Section -->
                        <div class="music-section">
                            <h2 class="music-section-title scroll-reveal">Music For You</h2>
                            
                            <div class="music-player-container" id="music-player-container">
                                <!-- Music tracks akan ditambahkan secara dinamis -->
                            </div>
                            
                            <!-- Request Buttons -->
                            <div class="request-buttons scroll-reveal">
                                <button class="request-btn" id="request-music-btn">
                                    <i class="fab fa-whatsapp"></i>
                                    <span>Minta Tambahin Musikmu</span>
                                </button>
                                
                                <button class="request-btn" id="request-picture-btn">
                                    <i class="fas fa-images"></i>
                                    <span>Request Picture</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="footer scroll-reveal">
                        <p>&copy; 2025 Al'Majid. All rights reserved. | Slide 2: Tools & Features</p>
                    </div>
                </main>
            </div>
            
            <!-- NEW: Slide 3: Coming Soon -->
            <div class="slide" id="slide-3">
                <main class="content">
                    <section class="profile-section">
                        <h1 class="slide-3-title scroll-reveal">New Features & Games</h1>
                        <p class="bio scroll-reveal">Akses fitur baru dan kumpulan mini games seru!</p>
                    </section>
                    
                    <div class="slide-3-content">
                        <!-- Mini Games Section -->
                        <h2 class="music-section-title scroll-reveal">Mini Games Collection</h2>
                        
                        <div class="games-container scroll-reveal">
                            <!-- Game 1: Reaction Time Test -->
                            <div class="game-card">
                                <div class="game-icon">
                                    <i class="fas fa-bolt"></i>
                                </div>
                                <h3 class="game-title">Reaction Time Test</h3>
                                <p class="game-desc">Tes seberapa cepat reaksi Anda dengan mengklik saat warna berubah</p>
                                <button class="play-game-btn" data-game="reaction">
                                    <i class="fas fa-play"></i> Mainkan
                                </button>
                            </div>
                            
                            <!-- Game 2: Tebak Angka -->
                            <div class="game-card">
                                <div class="game-icon">
                                    <i class="fas fa-brain"></i>
                                </div>
                                <h3 class="game-title">Tebak Angka</h3>
                                <p class="game-desc">Tebak angka 1-100 dengan clue dari komputer</p>
                                <button class="play-game-btn" data-game="number">
                                    <i class="fas fa-play"></i> Mainkan
                                </button>
                            </div>
                            
                            <!-- Game 3: Memory Card -->
                            <div class="game-card">
                                <div class="game-icon">
                                    <i class="fas fa-memory"></i>
                                </div>
                                <h3 class="game-title">Memory Card</h3>
                                <p class="game-desc">Temukan pasangan kartu dengan mengingat posisinya</p>
                                <button class="play-game-btn" data-game="memory">
                                    <i class="fas fa-play"></i> Mainkan
                                </button>
                            </div>
                            
                            <!-- Game 4: Tic-Tac-Toe -->
                            <div class="game-card">
                                <div class="game-icon">
                                    <i class="fas fa-times"></i>
                                </div>
                                <h3 class="game-title">Tic-Tac-Toe</h3>
                                <p class="game-desc">Mainkan XO klasik melawan teman atau komputer</p>
                                <button class="play-game-btn" data-game="tic-tac-toe">
                                    <i class="fas fa-play"></i> Mainkan
                                </button>
                            </div>
                            
                            <!-- Game 5: Typing Speed Test -->
                            <div class="game-card">
                                <div class="game-icon">
                                    <i class="fas fa-keyboard"></i>
                                </div>
                                <h3 class="game-title">Typing Speed Test</h3>
                                <p class="game-desc">Ukur kecepatan mengetik Anda dalam WPM</p>
                                <button class="play-game-btn" data-game="typing">
                                    <i class="fas fa-play"></i> Mainkan
                                </button>
                            </div>
                            
                            <!-- Game 6: Trivia Quiz -->
                            <div class="game-card">
                                <div class="game-icon">
                                    <i class="fas fa-question-circle"></i>
                                </div>
                                <h3 class="game-title">Trivia Quiz</h3>
                                <p class="game-desc">Jawab pertanyaan pengetahuan umum</p>
                                <button class="play-game-btn" data-game="trivia">
                                    <i class="fas fa-play"></i> Mainkan
                                </button>
                            </div>
                        </div>
                        
                        <!-- Leaderboard -->
                        <h2 class="music-section-title scroll-reveal" style="margin-top: 3rem;">Leaderboard</h2>
                        <div class="leaderboard-container scroll-reveal">
                            <table class="leaderboard-table" id="leaderboard-table">
                                <thead>
                                    <tr>
                                        <th>Rank</th>
                                        <th>Username</th>
                                        <th>Game</th>
                                        <th>Score</th>
                                        <th>Date</th>
                                    </tr>
                                </thead>
                                <tbody id="leaderboard-body">
                                    <!-- Leaderboard data akan dimuat di sini -->
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- New Features Section -->
                        <h2 class="music-section-title scroll-reveal" style="margin-top: 3rem;">New Features</h2>
                        
                        <div class="features-list">
                            <div class="feature-item scroll-reveal">
                                <div class="feature-icon">
                                    <i class="fas fa-gamepad"></i>
                                </div>
                                <h3 class="feature-title">Mini Games</h3>
                                <p class="feature-desc">Koleksi mini games seru yang bisa dimainkan langsung di website.</p>
                            </div>
                            
                            <div class="feature-item scroll-reveal">
                                <div class="feature-icon">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                </div>
                                <h3 class="feature-title">File Sharing</h3>
                                <p class="feature-desc">Upload dan share file hingga 20MB secara aman.</p>
                            </div>
                            
                            <div class="feature-item scroll-reveal">
                                <div class="feature-icon">
                                    <i class="fas fa-video"></i>
                                </div>
                                <h3 class="feature-title">Video Conference</h3>
                                <p class="feature-desc">Video call dan meeting langsung di website tanpa install aplikasi.</p>
                            </div>
                            
                            <div class="feature-item scroll-reveal">
                                <div class="feature-icon">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <h3 class="feature-title">AI Assistant</h3>
                                <p class="feature-desc">Asisten AI pribadi yang bisa membantu berbagai kebutuhan.</p>
                            </div>
                        </div>
                        
                        <div class="request-buttons scroll-reveal" style="margin-top: 3rem;">
                            <button class="request-btn" id="file-sharing-btn">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <span>File Sharing</span>
                            </button>
                            
                            <button class="request-btn" id="video-call-btn">
                                <i class="fas fa-video"></i>
                                <span>Video Conference</span>
                            </button>
                            
                            <button class="request-btn" id="ai-assistant-btn">
                                <i class="fas fa-robot"></i>
                                <span>AI Assistant</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="footer scroll-reveal">
                        <p>&copy; 2025 Al'Majid. All rights reserved. | Slide 3: New Features & Games</p>
                    </div>
                </main>
            </div>
        </div>
    </div>
    
    <!-- NEW: Announcement Modal -->
    <div class="modal announcement-modal" id="announcement-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">System Announcement</h2>
                <button class="close-modal" id="close-announcement">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="announcement-list" id="announcement-list">
                <!-- Announcements will be loaded here -->
            </div>
        </div>
    </div>
    
    <!-- NEW: Chatbox Modal -->
    <div class="modal chatbox-modal" id="chatbox-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="chatbox-header">
                    <i class="fas fa-comments chatbox-icon"></i>
                    <h2 class="chatbox-title">Chatbox Komentar</h2>
                </div>
                <button class="close-modal" id="close-chatbox">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="chatbox-messages" id="chatbox-messages">
                <!-- Messages will be loaded here -->
            </div>
            
            <div class="chatbox-input-form">
                <div class="name-input-container">
                    <label class="name-input-label" for="chatbox-name-input">Nama Anda:</label>
                    <input type="text" class="chatbox-name-input" id="chatbox-name-input" placeholder="Masukkan nama Anda..." maxlength="30" value="Pengunjung">
                </div>
                
                <div class="chatbox-input-container">
                    <input type="text" class="chatbox-input" id="chatbox-input" placeholder="Tulis komentar kamu di sini..." maxlength="200">
                    <button class="chatbox-send" id="chatbox-send">Kirim</button>
                </div>
            </div>
            
            <div class="simulate-chat-btn" id="simulate-chat-btn">
                <i class="fas fa-robot"></i> Simulasi Komentar (Testing)
            </div>
            
            <p style="font-size: 0.8rem; color: rgba(255, 255, 255, 0.5); margin-top: 1rem; text-align: center;">
                Komentar akan ditampilkan secara realtime. Max 200 karakter.
            </p>
        </div>
    </div>
    
    <!-- Existing Modals -->
    <!-- Fav Song Modal -->
    <div class="modal" id="favsong-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Favorite Playlist</h2>
                <button class="close-modal" id="close-favsong">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="spotify-iframe-container">
                <iframe src="https://open.spotify.com/embed/playlist/5nKOoaqObDaARYtLFaY6Tc?si=toteXpGCQsW-MQKCFVzTkA" 
                        style="border:0px #ffffff none;" 
                        name="myiFrame" 
                        scrolling="yes" 
                        frameborder="1" 
                        marginheight="0px" 
                        marginwidth="0px" 
                        height="400px" 
                        width="100%" 
                        allowfullscreen>
                </iframe>
            </div>
        </div>
    </div>
    
    <!-- Programming Languages Modal -->
    <div class="modal" id="programming-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Programming Languages</h2>
                <button class="close-modal" id="close-programming">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="languages-container">
                <div class="language-category">
                    <div class="language-header">
                        <i class="fab fa-js-square language-icon"></i>
                        <h3 class="language-title">Javascript</h3>
                    </div>
                    <div class="language-items">
                        <div class="language-item">Three.Js</div>
                        <div class="language-item">React.Js</div>
                        <div class="language-item">Node.Js</div>
                        <div class="language-item">Next.Js</div>
                        <div class="language-item">Vue.Js</div>
                    </div>
                </div>
                
                <div class="language-category">
                    <div class="language-header">
                        <i class="fab fa-php language-icon"></i>
                        <h3 class="language-title">PHP</h3>
                    </div>
                    <div class="language-items">
                        <div class="language-item">Laravel</div>
                        <div class="language-item">Slim</div>
                        <div class="language-item">CodeIgniter</div>
                    </div>
                </div>
                
                <div class="language-category">
                    <div class="language-header">
                        <i class="fab fa-python language-icon"></i>
                        <h3 class="language-title">Python</h3>
                    </div>
                    <div class="language-items">
                        <div class="language-item">TensorFlow</div>
                        <div class="language-item">PyTorch</div>
                        <div class="language-item">Flask</div>
                        <div class="language-item">NumPy</div>
                        <div class="language-item">Matplotlib</div>
                        <div class="language-item">PyGame</div>
                        <div class="language-item">OpenCV</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Favorite Person Modal -->
    <div class="modal" id="favorite-person-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">My Favorite Person</h2>
                <button class="close-modal" id="close-favorite-person">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <img class="favorite-person-image" id="favorite-person-image" src="" alt="My Favorite Person">
        </div>
    </div>
    
    <!-- Gallery Modal -->
    <div class="modal" id="gallery-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="gallery-title">Gallery</h2>
                <button class="close-modal" id="close-gallery">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="gallery-content">
                <img class="gallery-image" id="main-gallery-image" src="" alt="Gallery Image">
                
                <div class="gallery-nav" id="gallery-nav">
                    <!-- Thumbnails will be added dynamically -->
                </div>
                
                <button class="close-gallery-btn" id="close-gallery-btn">Tutup Gallery</button>
            </div>
        </div>
    </div>
    
    <!-- Favorite Musician Modal -->
    <div class="modal" id="favorite-musician-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Favorite Musician</h2>
                <button class="close-modal" id="close-favorite-musician">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="podium-container">
                <div class="podium-item podium-1">
                    <img src="artis1.jpeg" class="podium-image" alt="Hindia" onerror="this.src='https://ui-avatars.com/api/?name=Hindia&background=FFD700&color=000&size=100&bold=true'">
                    <div class="podium podium-1">1</div>
                    <div class="podium-name">Hindia</div>
                </div>
                
                <div class="podium-item podium-2">
                    <img src="artis2.jpeg" class="podium-image" alt="Dv4d" onerror="this.src='https://ui-avatars.com/api/?name=Dv4d&background=C0C0C0&color=000&size=100&bold=true'">
                    <div class="podium podium-2">2</div>
                    <div class="podium-name">Dv4d</div>
                </div>
                
                <div class="podium-item podium-3">
                    <img src="artis3.jpeg" class="podium-image" alt="Feast" onerror="this.src='https://ui-avatars.com/api/?name=Feast&background=CD7F32&color=000&size=100&bold=true'">
                    <div class="podium podium-3">3</div>
                    <div class="podium-name">.Feast</div>
                </div>
                
                <div class="podium-item podium-4">
                    <img src="artis4.jpeg" class="podium-image" alt="Raavfy" onerror="this.src='https://ui-avatars.com/api/?name=Raavfy&background=333&color=fff&size=100&bold=true'">
                    <div class="podium podium-4">4</div>
                    <div class="podium-name">Raavfy</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Gallery Request Modal -->
    <div class="modal" id="gallery-request-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Gallery Request</h2>
                <button class="close-modal" id="close-gallery-request">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="gallery-request-content">
                <div class="empty-gallery-message" id="gallery-request-message">
                    <!-- Konten akan ditampilkan berdasarkan apakah ada gambar atau tidak -->
                </div>
                
                <div class="gallery-nav" id="gallery-request-nav">
                    <!-- Thumbnails will be added dynamically if images exist -->
                </div>
                
                <button class="close-gallery-btn" id="close-gallery-request-btn">Tutup</button>
            </div>
        </div>
    </div>
    
    <!-- DeepSeek Embed Modal -->
    <div class="modal" id="deepseek-embed-modal">
        <div class="modal-content" style="width: 95%; max-width: 1200px; height: 85vh;">
            <div class="modal-header">
                <h2 class="modal-title">DeepSeek AI Chat</h2>
                <button class="close-modal" id="close-deepseek">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div style="width: 100%; height: 80%;">
                <iframe 
                    src="https://chat.deepseek.com/" 
                    style="width: 100%; height: 100%; border: none; border-radius: 10px;"
                    allow="fullscreen"
                    title="DeepSeek AI Chat">
                </iframe>
            </div>
            <div style="margin-top: 1rem; text-align: center;">
                <p style="color: rgba(255, 255, 255, 0.7); font-size: 0.9rem;">
                    Powered by DeepSeek AI | Chat langsung dengan AI canggih
                </p>
            </div>
        </div>
    </div>
    
    <!-- YouTube Embed Modal -->
    <div class="modal" id="youtube-embed-modal">
        <div class="modal-content" style="width: 95%; max-width: 1200px; height: 85vh;">
            <div class="modal-header">
                <h2 class="modal-title">YouTube Player</h2>
                <button class="close-modal" id="close-youtube">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div style="width: 100%; height: 80%;">
                <iframe 
                    src="https://www.youtube.com/embed?listType=search&list=" 
                    style="width: 100%; height: 100%; border: none; border-radius: 10px;"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen
                    title="YouTube Player">
                </iframe>
            </div>
            <div style="margin-top: 1rem; text-align: center;">
                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                    <input type="text" id="youtube-search" placeholder="Cari video YouTube..." style="flex-grow: 1; max-width: 400px; padding: 0.8rem; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.2); background: rgba(255, 255, 255, 0.1); color: white;">
                    <button class="request-btn" id="youtube-search-btn">
                        <i class="fas fa-search"></i>
                        <span>Search</span>
                    </button>
                </div>
                <p style="color: rgba(255, 255, 255, 0.7); font-size: 0.9rem; margin-top: 1rem;">
                    Cari dan tonton video YouTube langsung di website
                </p>
            </div>
        </div>
    </div>
    
    <!-- Komiku Embed Modal -->
    <div class="modal" id="komiku-embed-modal">
        <div class="modal-content" style="width: 95%; max-width: 1200px; height: 85vh;">
            <div class="modal-header">
                <h2 class="modal-title">Komiku - Baca Komik Online</h2>
                <button class="close-modal" id="close-komiku">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div style="width: 100%; height: 80%;">
                <iframe 
                    src="https://komiku.org/" 
                    style="width: 100%; height: 100%; border: none; border-radius: 10px;"
                    allow="fullscreen"
                    title="Komiku - Baca Komik Online">
                </iframe>
            </div>
            <div style="margin-top: 1rem; text-align: center;">
                <p style="color: rgba(255, 255, 255, 0.7); font-size: 0.9rem;">
                    Baca komik online gratis di Komiku | Update terbaru setiap hari
                </p>
            </div>
        </div>
    </div>
    
    <!-- NEW: Game Login Modal -->
    <div class="modal auth-modal" id="game-login-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Login untuk Bermain Games</h2>
                <button class="close-modal" id="close-game-login">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="auth-form" id="login-form">
                <input type="text" class="auth-input" id="login-username" placeholder="Username" required>
                <input type="password" class="auth-input" id="login-password" placeholder="Password" required>
                <button class="auth-btn" id="login-btn">Login</button>
                <div class="auth-switch">
                    Belum punya akun? <span class="auth-link" id="show-register">Daftar di sini</span>
                </div>
            </div>
            <div class="auth-form" id="register-form" style="display: none;">
                <input type="text" class="auth-input" id="register-username" placeholder="Username" required>
                <input type="password" class="auth-input" id="register-password" placeholder="Password" required>
                <input type="password" class="auth-input" id="register-confirm-password" placeholder="Konfirmasi Password" required>
                <button class="auth-btn" id="register-btn">Daftar</button>
                <div class="auth-switch">
                    Sudah punya akun? <span class="auth-link" id="show-login">Login di sini</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- NEW: Game Modals -->
    <div class="modal game-modal" id="reaction-game-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Reaction Time Test</h2>
                <button class="close-modal" id="close-reaction-game">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="game-screen">
                <div class="game-instructions">
                    Klik kotak saat berubah warna hijau! Jangan klik terlalu cepat.
                </div>
                <div class="reaction-box waiting" id="reaction-box">
                    Tunggu...
                </div>
                <div class="game-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="reaction-score">0</div>
                        <div class="stat-label">Reaksi (ms)</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="reaction-best">0</div>
                        <div class="stat-label">Terbaik</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="reaction-tries">0</div>
                        <div class="stat-label">Percobaan</div>
                    </div>
                </div>
                <button class="play-game-btn" id="start-reaction">Mulai Test</button>

                <div class="game-leaderboard" id="reaction-leaderboard">
                    <h4 style="color: #4a6cf7; margin: 1rem 0 0.5rem;">Leaderboard Reaction Test</h4>
                    <div class="leaderboard-container" style="max-height: 200px;">
                        <table class="leaderboard-table">
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>Username</th>
                                    <th>Score</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody id="reaction-leaderboard-body">
                                <!-- Per-game leaderboard will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal game-modal" id="number-game-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Tebak Angka</h2>
                <button class="close-modal" id="close-number-game">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="game-screen">
                <div class="game-instructions" id="number-instructions">
                    Komputer telah memilih angka antara 1-100. Coba tebak!
                </div>
                <input type="number" class="number-input" id="number-guess" min="1" max="100" placeholder="Masukkan tebakan (1-100)">
                <div class="game-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="number-attempts">0</div>
                        <div class="stat-label">Percobaan</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="number-hint">-</div>
                        <div class="stat-label">Petunjuk</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="number-best">0</div>
                        <div class="stat-label">Skor Terbaik</div>
                    </div>
                </div>
                <button class="play-game-btn" id="submit-guess">Tebak!</button>
                <button class="play-game-btn" id="new-number-game" style="margin-top: 10px;">Game Baru</button>
            </div>
        </div>
    </div>
    
    <div class="modal game-modal" id="memory-game-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Memory Card Game</h2>
                <button class="close-modal" id="close-memory-game">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="game-screen">
                <div class="game-instructions" id="memory-instructions">
                    Temukan semua pasangan kartu! Klik dua kartu untuk membalik.
                </div>
                <div class="memory-grid" id="memory-grid">
                    <!-- Memory cards will be generated here -->
                </div>
                <div class="game-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="memory-moves">0</div>
                        <div class="stat-label">Gerakan</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="memory-matches">0</div>
                        <div class="stat-label">Pasangan</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="memory-time">0</div>
                        <div class="stat-label">Waktu (s)</div>
                    </div>
                </div>
                <button class="play-game-btn" id="new-memory-game">Game Baru</button>
            </div>
        </div>
    </div>
    
    <div class="modal game-modal" id="tic-tac-toe-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Tic-Tac-Toe</h2>
                <button class="close-modal" id="close-tic-tac-toe">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="game-screen">
                <div class="game-instructions" id="ttt-instructions">
                    Giliran: <span id="current-player">X</span> (Anda adalah X)
                </div>
                <div class="tic-tac-toe-grid" id="tic-tac-toe-grid">
                    <!-- Tic-tac-toe cells will be generated here -->
                </div>
                <div class="game-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="ttt-wins">0</div>
                        <div class="stat-label">Menang</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="ttt-losses">0</div>
                        <div class="stat-label">Kalah</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="ttt-draws">0</div>
                        <div class="stat-label">Seri</div>
                    </div>
                </div>
                <button class="play-game-btn" id="new-ttt-game">Game Baru</button>
                <button class="play-game-btn" id="ttt-vs-computer" style="margin-top: 10px;">Lawan Komputer</button>
            </div>
        </div>
    </div>
    
    <div class="modal game-modal" id="typing-game-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Typing Speed Test</h2>
                <button class="close-modal" id="close-typing-game">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="game-screen">
                <div class="game-instructions" id="typing-instructions">
                    Ketik teks di bawah secepat dan seakurat mungkin!
                </div>
                <div class="typing-text" id="typing-text-display">
                    <!-- Text to type will appear here -->
                </div>
                <input type="text" class="typing-input" id="typing-input" placeholder="Ketik di sini...">
                <div class="game-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="typing-wpm">0</div>
                        <div class="stat-label">WPM</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="typing-accuracy">100%</div>
                        <div class="stat-label">Akurasi</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="typing-time">60</div>
                        <div class="stat-label">Waktu</div>
                    </div>
                </div>
                <button class="play-game-btn" id="start-typing">Mulai Test</button>
                <button class="play-game-btn" id="new-typing-text" style="margin-top: 10px;">Teks Baru</button>
            </div>
        </div>
    </div>
    
    <div class="modal game-modal" id="trivia-game-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Trivia Quiz</h2>
                <button class="close-modal" id="close-trivia-game">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="game-screen">
                <div class="game-instructions" id="trivia-instructions">
                    Jawab pertanyaan berikut dengan benar!
                </div>
                <div class="trivia-question" id="trivia-question">
                    <!-- Question will appear here -->
                </div>
                <div class="trivia-options" id="trivia-options">
                    <!-- Options will appear here -->
                </div>
                <div class="game-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="trivia-score">0</div>
                        <div class="stat-label">Skor</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="trivia-question-number">1/10</div>
                        <div class="stat-label">Pertanyaan</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="trivia-best">0</div>
                        <div class="stat-label">Terbaik</div>
                    </div>
                </div>
                <button class="play-game-btn" id="next-trivia" style="display: none;">Lanjut</button>
                <button class="play-game-btn" id="new-trivia-game">Game Baru</button>
            </div>
        </div>
    </div>
    
    <!-- NEW: File Sharing Modal -->
    <div class="modal" id="file-sharing-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">File Sharing</h2>
                <button class="close-modal" id="close-file-sharing">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="file-sharing-container">
                <div class="file-upload-area" id="file-upload-area">
                    <i class="fas fa-cloud-upload-alt" style="font-size: 3rem; color: #4a6cf7; margin-bottom: 1rem;"></i>
                    <h3>Upload File</h3>
                    <p>Drag & drop file di sini atau klik untuk memilih file</p>
                    <p style="font-size: 0.9rem; color: rgba(255, 255, 255, 0.6); margin-top: 0.5rem;">
                        Maksimal 20MB per file
                    </p>
                    <input type="file" id="file-input" style="display: none;">
                </div>
                
                <div class="file-list" id="file-list">
                    <!-- Uploaded files will appear here -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- NEW: Video Conference Modal -->
    <div class="modal" id="video-conference-modal">
        <div class="modal-content" style="width: 95%; max-width: 1200px; height: 90vh;">
            <div class="modal-header">
                <h2 class="modal-title">Video Conference</h2>
                <button class="close-modal" id="close-video-conference">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="video-call-container">
                <div style="margin-bottom: 1rem; text-align: center;">
                    <div style="display: flex; gap: 10px; justify-content: center; margin-bottom: 10px;">
                        <input type="text" id="room-id-input" placeholder="Masukkan Room ID (6 digit)" style="padding: 0.5rem; border-radius: 5px; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.1); color: white; width: 200px;">
                        <button class="call-btn" id="join-room-btn" style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                            <i class="fas fa-sign-in-alt"></i> Join
                        </button>
                    </div>
                    <div style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">
                        Room ID Anda: <span id="current-room-id" style="color: #4a6cf7; font-weight: bold;"></span>
                        <button id="copy-room-id" style="margin-left: 10px; background: none; border: none; color: #4a6cf7; cursor: pointer; font-size: 0.8rem;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <br><small>Bagikan Room ID ini ke orang lain untuk bergabung</small>
                    </div>
                </div>

                <div class="video-grid" id="video-grid">
                    <div class="video-item">
                        <video id="local-video" autoplay muted class="video-player"></video>
                        <div class="video-info">
                            Anda (Local)
                        </div>
                    </div>
                </div>

                <div class="call-controls">
                    <button class="call-btn" id="toggle-mic">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="call-btn" id="toggle-camera">
                        <i class="fas fa-video"></i>
                    </button>
                    <button class="call-btn" id="toggle-screen">
                        <i class="fas fa-desktop"></i>
                    </button>
                    <button class="call-btn end-call" id="end-call">
                        <i class="fas fa-phone-slash"></i>
                    </button>
                </div>
                
                <div class="chat-container" id="video-chat">
                    <div class="chatbox-messages" id="video-chat-messages">
                        <!-- Video chat messages will appear here -->
                    </div>
                    <div class="chatbox-input-container">
                        <input type="text" class="chatbox-input" id="video-chat-input" placeholder="Tulis pesan...">
                        <button class="chatbox-send" id="video-chat-send">Kirim</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- NEW: AI Assistant Modal -->
    <div class="modal" id="ai-assistant-modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2 class="modal-title">AI Assistant</h2>
                <button class="close-modal" id="close-ai-assistant">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="ai-assistant-container">
                <div class="ai-messages" id="ai-messages">
                    <div class="ai-message assistant">
                        <p>Halo! Saya AI Assistant. Saya bisa membantu Anda mengenal website ini lebih baik. Anda bisa bertanya tentang:</p>
                        <ul>
                            <li>Fitur-fitur yang tersedia</li>
                            <li>Cara menggunakan website</li>
                            <li>Tentang pemilik website</li>
                            <li>Tips dan trik</li>
                            <li>Dan banyak lagi!</li>
                        </ul>
                        <p>Apa yang bisa saya bantu?</p>
                    </div>
                </div>

                <div class="ai-question-choices" id="ai-question-choices">
                    <button class="ai-question-btn" data-question="fitur">Apa saja fitur yang tersedia?</button>
                    <button class="ai-question-btn" data-question="cara">Cara menggunakan website ini?</button>
                    <button class="ai-question-btn" data-question="pemilik">Siapa pemilik website ini?</button>
                    <button class="ai-question-btn" data-question="games">Bagaimana cara bermain games?</button>
                    <button class="ai-question-btn" data-question="kontak">Bagaimana cara menghubungi?</button>
                </div>

                <div class="ai-input-container">
                    <input type="text" class="ai-input" id="ai-input" placeholder="Tanyakan sesuatu tentang website ini...">
                    <button class="ai-send-btn" id="ai-send">Kirim</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Background Music -->
    <audio id="background-music" loop>
        <source src="musik.mp3" type="audio/mpeg">
        <source src="musik.ogg" type="audio/ogg">
    </audio>
    
    <!-- Jumpscare Sound -->
    <audio id="jumpscare-sound">
        <source src="jumpscare.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Particle.js Library -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    
    <script>
        // ==============================
        // DOM Elements & State Variables
        // ==============================
        
        // DOM Elements
        const loadingScreen = document.getElementById('loading-screen');
        const loadingPercentage = document.getElementById('loading-percentage');
        const loadingFill = document.getElementById('loading-fill');
        const loadingQuote = document.getElementById('loading-quote');
        const themeToggle = document.getElementById('theme-toggle');
        const musicControl = document.getElementById('music-control');
        const spotifyBtn = document.getElementById('spotify-btn');
        const favsongModal = document.getElementById('favsong-modal');
        const closeFavsongBtn = document.getElementById('close-favsong');
        const musicStatus = document.getElementById('music-status');
        const profileImg = document.getElementById('profile-img');
        const programmingBtn = document.getElementById('programming-btn');
        const programmingModal = document.getElementById('programming-modal');
        const closeProgrammingBtn = document.getElementById('close-programming');
        const favoritePersonBtn = document.getElementById('favorite-person-btn');
        const favoritePersonModal = document.getElementById('favorite-person-modal');
        const favoritePersonImage = document.getElementById('favorite-person-image');
        const closeFavoritePersonBtn = document.getElementById('close-favorite-person');
        const myselfBtn = document.getElementById('myself-btn');
        const friendBtn = document.getElementById('friend-btn');
        const randomizeBtn = document.getElementById('randomize-btn');
        const longingBtn = document.getElementById('longing-btn');
        const favoriteMusicianBtn = document.getElementById('favorite-musician-btn');
        const favoriteMusicianModal = document.getElementById('favorite-musician-modal');
        const closeFavoriteMusicianBtn = document.getElementById('close-favorite-musician');
        const familyBtn = document.getElementById('family-btn');
        const galleryBtn = document.getElementById('gallery-btn');
        const galleryModal = document.getElementById('gallery-modal');
        const closeGalleryBtn = document.getElementById('close-gallery');
        const closeGalleryBtn2 = document.getElementById('close-gallery-btn');
        const galleryTitle = document.getElementById('gallery-title');
        const mainGalleryImage = document.getElementById('main-gallery-image');
        const galleryNav = document.getElementById('gallery-nav');
        const backgroundMusic = document.getElementById('background-music');
        
        // Existing DOM Elements
        const oradevIntro = document.getElementById('oradev-intro');
        const jumpscareOverlay = document.getElementById('jumpscare-overlay');
        const jumpscareImage = jumpscareOverlay.querySelector('.jumpscare-image');
        const jumpscareSound = document.getElementById('jumpscare-sound');
        const sliderWrapper = document.getElementById('slider-wrapper');
        const slide1Btn = document.getElementById('slide-1-btn');
        const slide2Btn = document.getElementById('slide-2-btn');
        const slide3Btn = document.getElementById('slide-3-btn');
        const slideIndicator = document.getElementById('slide-indicator');
        const musicPlayerContainer = document.getElementById('music-player-container');
        const requestMusicBtn = document.getElementById('request-music-btn');
        const requestPictureBtn = document.getElementById('request-picture-btn');
        const galleryRequestModal = document.getElementById('gallery-request-modal');
        const closeGalleryRequestBtn = document.getElementById('close-gallery-request');
        const closeGalleryRequestBtn2 = document.getElementById('close-gallery-request-btn');
        const galleryRequestMessage = document.getElementById('gallery-request-message');
        const galleryRequestNav = document.getElementById('gallery-request-nav');
        
        // Upgrade DOM Elements
        const particlesToggle = document.getElementById('particles-toggle');
        const typingText = document.getElementById('typing-text');
        const deepseekEmbedBtn = document.getElementById('deepseek-embed-btn');
        const youtubeEmbedBtn = document.getElementById('youtube-embed-btn');
        const komikuEmbedBtn = document.getElementById('komiku-embed-btn');
        const deepseekEmbedModal = document.getElementById('deepseek-embed-modal');
        const youtubeEmbedModal = document.getElementById('youtube-embed-modal');
        const komikuEmbedModal = document.getElementById('komiku-embed-modal');
        const closeDeepseekBtn = document.getElementById('close-deepseek');
        const closeYoutubeBtn = document.getElementById('close-youtube');
        const closeKomikuBtn = document.getElementById('close-komiku');
        const youtubeSearchInput = document.getElementById('youtube-search');
        const youtubeSearchBtn = document.getElementById('youtube-search-btn');
        
        // NEW: Upgrade DOM Elements
        const announcementBtn = document.getElementById('announcement-btn');
        const announcementModal = document.getElementById('announcement-modal');
        const closeAnnouncementBtn = document.getElementById('close-announcement');
        const announcementList = document.getElementById('announcement-list');
        
        const chatboxBtn = document.getElementById('chatbox-btn');
        const chatboxModal = document.getElementById('chatbox-modal');
        const closeChatboxBtn = document.getElementById('close-chatbox');
        const chatboxMessages = document.getElementById('chatbox-messages');
        const chatboxNameInput = document.getElementById('chatbox-name-input');
        const chatboxInput = document.getElementById('chatbox-input');
        const chatboxSendBtn = document.getElementById('chatbox-send');
        const simulateChatBtn = document.getElementById('simulate-chat-btn');
        
        const clockContainer = document.getElementById('clock-container');
        const timeDisplay = document.getElementById('time-display');
        const dateDisplay = document.getElementById('date-display');
        
        const parallaxLayer1 = document.getElementById('parallax-layer-1');
        const parallaxLayer2 = document.getElementById('parallax-layer-2');
        
        
        // NEW: Online Badge Elements
        const onlineBadge = document.getElementById('online-badge');
        const statusContainer = document.getElementById('status-container');
        const statusText = document.getElementById('status-text');
        
        // NEW: Slide 3 Elements
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const fileSharingBtn = document.getElementById('file-sharing-btn');
        const videoCallBtn = document.getElementById('video-call-btn');
        const aiAssistantBtn = document.getElementById('ai-assistant-btn');
        const leaderboardBody = document.getElementById('leaderboard-body');
        
        // NEW: Game Elements
        const gameLoginModal = document.getElementById('game-login-modal');
        const closeGameLoginBtn = document.getElementById('close-game-login');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const showRegisterLink = document.getElementById('show-register');
        const showLoginLink = document.getElementById('show-login');
        const loginBtn = document.getElementById('login-btn');
        const registerBtn = document.getElementById('register-btn');
        const loginUsername = document.getElementById('login-username');
        const loginPassword = document.getElementById('login-password');
        const registerUsername = document.getElementById('register-username');
        const registerPassword = document.getElementById('register-password');
        const registerConfirmPassword = document.getElementById('register-confirm-password');
        
        // Game modals
        const reactionGameModal = document.getElementById('reaction-game-modal');
        const numberGameModal = document.getElementById('number-game-modal');
        const memoryGameModal = document.getElementById('memory-game-modal');
        const ticTacToeModal = document.getElementById('tic-tac-toe-modal');
        const typingGameModal = document.getElementById('typing-game-modal');
        const triviaGameModal = document.getElementById('trivia-game-modal');
        
        const closeReactionGameBtn = document.getElementById('close-reaction-game');
        const closeNumberGameBtn = document.getElementById('close-number-game');
        const closeMemoryGameBtn = document.getElementById('close-memory-game');
        const closeTicTacToeBtn = document.getElementById('close-tic-tac-toe');
        const closeTypingGameBtn = document.getElementById('close-typing-game');
        const closeTriviaGameBtn = document.getElementById('close-trivia-game');
        
        // NEW: File Sharing Elements
        const fileSharingModal = document.getElementById('file-sharing-modal');
        const closeFileSharingBtn = document.getElementById('close-file-sharing');
        const fileUploadArea = document.getElementById('file-upload-area');
        const fileInput = document.getElementById('file-input');
        const fileList = document.getElementById('file-list');
        
        // NEW: Video Conference Elements
        const videoConferenceModal = document.getElementById('video-conference-modal');
        const closeVideoConferenceBtn = document.getElementById('close-video-conference');
        const roomIdInput = document.getElementById('room-id-input');
        const joinRoomBtn = document.getElementById('join-room-btn');
        const currentRoomIdDisplay = document.getElementById('current-room-id');
        const copyRoomIdBtn = document.getElementById('copy-room-id');
        const videoGrid = document.getElementById('video-grid');
        const localVideo = document.getElementById('local-video');
        const toggleMicBtn = document.getElementById('toggle-mic');
        const toggleCameraBtn = document.getElementById('toggle-camera');
        const toggleScreenBtn = document.getElementById('toggle-screen');
        const endCallBtn = document.getElementById('end-call');
        const videoChatMessages = document.getElementById('video-chat-messages');
        const videoChatInput = document.getElementById('video-chat-input');
        const videoChatSendBtn = document.getElementById('video-chat-send');
        
        // NEW: AI Assistant Elements
        const aiAssistantModal = document.getElementById('ai-assistant-modal');
        const closeAiAssistantBtn = document.getElementById('close-ai-assistant');
        const aiMessages = document.getElementById('ai-messages');
        const aiInput = document.getElementById('ai-input');
        const aiSendBtn = document.getElementById('ai-send');
        
        // State variables
        let isDarkMode = true;
        let isMusicPlaying = false;
        let loadingProgress = 0;
        let musicFileExists = true;
        let currentGalleryType = 'gallery';
        let currentSlide = 1;
        let currentPlayingTrack = null;
        let audioElements = {};
        
        // Upgrade State Variables
        let particlesActive = true;
        let typingTextIndex = 0;
        let typingTextArray = ['Website Programming | UI/UX Designer | Vibecoding', 'Creating beautiful and functional web experiences', 'Passionate about coding and design'];
        let typingTextCurrent = 0;
        let typingCharIndex = 0;
        let isTypingDeleting = false;
        let typingSpeed = 100;
        
        // NEW: Upgrade State Variables
        const quotes = [
            "Peler Bapak kau...",
            "yang hilang orangnya, bukan perasaannya",
            "nias bujaaaaaanggggg",
            "tatapan tajam ferlin zaluhu",
            "hidup cuma sekali, jangan jadi orang biasa",
            "coding is my therapy",
            "vibes over everything",
            "simple but significant",
            "keep calm and code on",
            "yang penting vibe-nya nyala"
        ];
        
        let announcements = [];
        let chatMessages = [];
        let lastAnnouncementCheck = 0;
        let unreadAnnouncements = 0;
        let unreadMessages = 0;
        let userChatName = '';
        let chatMessageCounter = 0;
        
        
        // NEW: Online Status State
        let onlineStatus = 'online';
        let statusMessages = [
            'Available',
            'Coding...',
            'Designing...',
            'Listening to music',
            'Taking a break',
            'Working on new features',
            'Available for chat'
        ];
        let statusIndex = 0;
        
        // NEW: Game State
        let currentUser = null;
        let gameScores = {};
        let currentGame = null;
        
        // Reaction Game State
        let reactionStartTime = 0;
        let reactionGameActive = false;
        let reactionBestTime = 0;
        let reactionTries = 0;
        
        // Number Game State
        let targetNumber = 0;
        let numberAttempts = 0;
        let numberBestScore = localStorage.getItem('numberBestScore') || 0;
        
        // Memory Game State
        let memoryCards = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let memoryMoves = 0;
        let memoryStartTime = 0;
        let memoryTimer = null;
        
        // Tic-Tac-Toe State
        let tttBoard = ['', '', '', '', '', '', '', '', ''];
        let currentPlayer = 'X';
        let tttGameActive = true;
        let tttWins = 0;
        let tttLosses = 0;
        let tttDraws = 0;
        let tttVsComputer = false;
        
        // Typing Game State
        let typingTexts = [
            "The quick brown fox jumps over the lazy dog",
            "Programming is the process of creating a set of instructions that tell a computer how to perform a task",
            "JavaScript is a versatile programming language used for web development",
            "Practice makes perfect when it comes to improving typing speed",
            "Web development involves both frontend and backend technologies"
        ];
        let currentTypingText = '';
        let typingStartTime = 0;
        let typingTimer = null;
        let typingTimeLeft = 60;
        let typingCorrectChars = 0;
        let typingTotalChars = 0;
        
        // Trivia Game State
        let triviaQuestions = [
            {
                question: "Apa ibukota Indonesia?",
                options: ["Jakarta", "Surabaya", "Bandung", "Medan"],
                answer: 0
            },
            {
                question: "Siapa presiden pertama Indonesia?",
                options: ["Soeharto", "Joko Widodo", "Soekarno", "BJ Habibie"],
                answer: 2
            },
            {
                question: "Planet terdekat dengan matahari?",
                options: ["Venus", "Mars", "Mercury", "Bumi"],
                answer: 2
            },
            {
                question: "Warna pelangi pertama?",
                options: ["Merah", "Kuning", "Ungu", "Hijau"],
                answer: 0
            },
            {
                question: "Hewan tercepat di darat?",
                options: ["Singa", "Cheetah", "Harimau", "Rusa"],
                answer: 1
            }
        ];
        let currentTriviaIndex = 0;
        let triviaScore = 0;
        let triviaBestScore = localStorage.getItem('triviaBestScore') || 0;
        
        // NEW: File Sharing State
        let uploadedFiles = [];
        
        // NEW: Video Conference State (WebRTC with Firebase)
        let localStream = null;
        let peerConnection = null;
        let roomId = null;
        let isMicOn = true;
        let isCameraOn = true;
        let isScreenSharing = false;
        let isInitiator = false;
        let dataChannel = null;
        
        // NEW: AI Assistant State
        const aiResponses = {
            "fitur": "Website ini memiliki banyak fitur menarik: Portfolio pribadi, Mini Games, File Sharing, Video Conference, AI Assistant, Chatbox, dan banyak lagi!",
            "cara menggunakan": "Anda bisa navigasi menggunakan tombol slide di bawah. Setiap slide memiliki konten berbeda. Klik tombol untuk membuka fitur yang diinginkan.",
            "pemilik": "Website ini dibuat oleh Al'Majid, seorang UI/UX Designer dan Website Programmer yang passionate tentang coding dan design.",
            "games": "Tersedia 6 mini games: Reaction Time Test, Tebak Angka, Memory Card, Tic-Tac-Toe, Typing Speed Test, dan Trivia Quiz.",
            "kontak": "Anda bisa menghubungi Al'Majid melalui WhatsApp, Instagram, TikTok, Facebook, atau Email. Lihat tombol di slide pertama.",
            "teknologi": "Website ini dibangun dengan HTML, CSS, JavaScript, Firebase untuk database, dan berbagai library pendukung.",
            "tentang": "Website portfolio ini dibuat untuk showcase skill dan project Al'Majid. Juga sebagai tempat interaksi dan hiburan untuk pengunjung."
        };
        
        // Music tracks data
        const musicTracks = [
            {
                id: 1,
                image: 'fotolagu1.jpg',
                audio: 'musiklagu1.mp3',
                artist: 'Conan Gray',
                title: 'Heather',
                isAvailable: false
            },
            {
                id: 2,
                image: 'fotolagu2.jpg',
                audio: 'musiklagu2.mp3',
                artist: 'Neck Deep',
                title: 'December',
                isAvailable: false
            },
            {
                id: 3,
                image: 'fotolagu3.jpg',
                audio: 'musiklagu3.mp3',
                artist: 'Daniel Caesar',
                title: 'Innocence',
                isAvailable: false
            },
            {
                id: 4,
                image: 'fotolagu4.jpg',
                audio: 'musiklagu4.mp3',
                artist: 'Television Blonde',
                title: 'Freaks',
                isAvailable: false
            },
            {
                id: 5,
                image: 'fotolagu5.jpg',
                audio: 'musiklagu5.mp3',
                artist: 'Nama_Artis5',
                title: 'Judul_Lagu5',
                isAvailable: false
            }
        ];
        
        
        // ==============================
        // NEW: Online Status Functions
        // ==============================
        
        function initOnlineStatus() {
            // Show online badge with animation
            setTimeout(() => {
                onlineBadge.style.animation = 'fadeInUp 0.8s ease forwards';
                onlineBadge.style.opacity = '1';
                onlineBadge.style.transform = 'translateY(0)';
                
                // Show status after a delay
                setTimeout(() => {
                    statusContainer.style.display = 'block';
                    statusContainer.style.animation = 'fadeInUp 0.8s ease forwards';
                    statusContainer.style.opacity = '1';
                    statusContainer.style.transform = 'translateY(0)';
                    
                    // Start status rotation
                    rotateStatusMessages();
                }, 1000);
            }, 1500);
            
            // Make badge clickable
            onlineBadge.addEventListener('click', () => {
                statusContainer.style.display = statusContainer.style.display === 'block' ? 'none' : 'block';
            });
        }
        
        // NEW: Rotate Status Messages
        function rotateStatusMessages() {
            setInterval(() => {
                statusIndex = (statusIndex + 1) % statusMessages.length;
                statusText.textContent = statusMessages[statusIndex];
                
                // Add animation
                statusContainer.style.animation = 'none';
                setTimeout(() => {
                    statusContainer.style.animation = 'fadeInUp 0.5s ease';
                }, 10);
            }, 5000); // Change every 5 seconds
        }
        
        // ==============================
        // NEW: Parallax Effect Functions
        // ==============================
        
        function initParallax() {
            document.addEventListener('mousemove', (e) => {
                const x = (e.clientX / window.innerWidth) * 100;
                const y = (e.clientY / window.innerHeight) * 100;
                
                document.documentElement.style.setProperty('--mouse-x', `${x}%`);
                document.documentElement.style.setProperty('--mouse-y', `${y}%`);
                
                const moveX1 = (x - 50) * 0.02;
                const moveY1 = (y - 50) * 0.02;
                const moveX2 = (x - 50) * 0.05;
                const moveY2 = (y - 50) * 0.05;
                
                if (parallaxLayer1) {
                    parallaxLayer1.style.transform = `translate(${moveX1}px, ${moveY1}px)`;
                }
                if (parallaxLayer2) {
                    parallaxLayer2.style.transform = `translate(${moveX2}px, ${moveY2}px)`;
                }
            });
        }
        
        // ==============================
        // NEW: Random Quotes Functions
        // ==============================
        
        function initRandomQuotes() {
            const randomIndex = Math.floor(Math.random() * quotes.length);
            loadingQuote.textContent = `"${quotes[randomIndex]}"`;
            
            const quoteInterval = setInterval(() => {
                if (loadingProgress < 100) {
                    const newIndex = Math.floor(Math.random() * quotes.length);
                    loadingQuote.style.opacity = '0';
                    setTimeout(() => {
                        loadingQuote.textContent = `"${quotes[newIndex]}"`;
                        loadingQuote.style.opacity = '1';
                    }, 500);
                } else {
                    clearInterval(quoteInterval);
                }
            }, 3000);
        }
        
        // ==============================
        // NEW: Real-time Clock Functions
        // ==============================
        
        function initClock() {
            function updateClock() {
                const now = new Date();
                
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                const seconds = String(now.getSeconds()).padStart(2, '0');
                
                const days = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
                const months = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
                
                const dayName = days[now.getDay()];
                const date = String(now.getDate()).padStart(2, '0');
                const month = months[now.getMonth()];
                const year = now.getFullYear();
                
                timeDisplay.textContent = `${hours}:${minutes}:${seconds}`;
                dateDisplay.textContent = `${dayName}, ${date}/${String(now.getMonth() + 1).padStart(2, '0')}/${year}`;
            }
            
            updateClock();
            setInterval(updateClock, 1000);
        }
        
        // ==============================
        // NEW: Announcements Functions
        // ==============================
        
        function initAnnouncements() {
            const defaultAnnouncements = [
                {
                    id: 1,
                    date: "10/12/2025",
                    text: "Website di-update 10/12/2025",
                    isNew: true
                },
                {
                    id: 2,
                    date: "09/12/2025",
                    text: "Fitur baru: Mini Games Collection!",
                    isNew: true
                },
                {
                    id: 3,
                    date: "08/12/2025",
                    text: "Music Player diperbarui!",
                    isNew: true
                },
                {
                    id: 4,
                    date: "05/12/2025",
                    text: "Tambahan 5 lagu baru di playlist",
                    isNew: false
                },
                {
                    id: 5,
                    date: "01/12/2025",
                    text: "Sistem chatbox realtime telah aktif",
                    isNew: false
                },
                {
                    id: 6,
                    date: "11/12/2025",
                    text: "Fitur AI Assistant dengan pertanyaan cepat!",
                    isNew: true
                },
                {
                    id: 7,
                    date: "11/12/2025",
                    text: "File Sharing hingga 20MB sekarang tersedia!",
                    isNew: true
                },
                {
                    id: 8,
                    date: "11/12/2025",
                    text: "Video Conference untuk meeting online!",
                    isNew: true
                },
                {
                    id: 9,
                    date: "11/12/2025",
                    text: "Leaderboard global dan per-minigame!",
                    isNew: true
                },
                {
                    id: 10,
                    date: "11/12/2025",
                    text: "SEO metadata ditambahkan untuk visibilitas Google!",
                    isNew: true
                },
                {
                    id: 11,
                    date: "11/12/2025",
                    text: "Semua fitur sekarang tersedia secara global!",
                    isNew: true
                }
            ];

            if (window.firebaseDatabase) {
                const database = window.firebaseDatabase;
                const announcementsRef = window.firebaseRef(database, 'globalAnnouncements');

                // Set up real-time listener
                window.firebaseOnValue(announcementsRef, (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        announcements = Object.values(data).sort((a, b) => b.id - a.id);
                        checkNewAnnouncements();
                        renderAnnouncements();
                    } else {
                        // Save default announcements to Firebase
                        announcements = defaultAnnouncements;
                        announcements.forEach(announcement => {
                            window.firebasePush(announcementsRef, announcement);
                        });
                        checkNewAnnouncements();
                        renderAnnouncements();
                    }
                });
            } else {
                // Fallback to localStorage
                const savedAnnouncements = localStorage.getItem('announcements');
                if (savedAnnouncements) {
                    announcements = JSON.parse(savedAnnouncements);
                } else {
                    announcements = defaultAnnouncements;
                    localStorage.setItem('announcements', JSON.stringify(announcements));
                }
                checkNewAnnouncements();
                renderAnnouncements();
            }
        }
        
        // NEW: Render Announcements
        function renderAnnouncements() {
            announcementList.innerHTML = '';

            if (announcements.length === 0) {
                announcementList.innerHTML = '<p style="text-align: center; color: rgba(255,255,255,0.7);">Tidak ada pengumuman global</p>';
                return;
            }

            announcements.forEach(announcement => {
                const announcementElement = document.createElement('div');
                announcementElement.className = `announcement-item ${announcement.isNew ? 'announcement-new' : ''}`;

                announcementElement.innerHTML = `
                    <div class="announcement-date">${announcement.date}</div>
                    <div class="announcement-text">${announcement.text}</div>
                `;

                announcementList.appendChild(announcementElement);
            });

            updateAnnouncementBadge();
        }
        
        // NEW: Check for New Announcements
        function checkNewAnnouncements() {
            const lastCheck = localStorage.getItem('lastAnnouncementCheck') || 0;
            const currentTime = Date.now();

            announcementBtn.addEventListener('click', () => {
                if (window.firebaseDatabase) {
                    // Mark all as read in Firebase
                    const database = window.firebaseDatabase;
                    const announcementsRef = window.firebaseRef(database, 'globalAnnouncements');

                    window.firebaseGet(announcementsRef).then((snapshot) => {
                        const data = snapshot.val();
                        if (data) {
                            Object.keys(data).forEach(key => {
                                window.firebaseUpdate(window.firebaseRef(database, `globalAnnouncements/${key}`), { isNew: false });
                            });
                        }
                    });
                } else {
                    announcements.forEach(announcement => {
                        announcement.isNew = false;
                    });
                    localStorage.setItem('announcements', JSON.stringify(announcements));
                }
                unreadAnnouncements = 0;
                updateAnnouncementBadge();
            });

            if (currentTime - lastCheck > 6 * 60 * 60 * 1000) {
                const newAnnouncement = {
                    id: Date.now(),
                    date: new Date().toLocaleDateString('id-ID'),
                    text: "Update terbaru: Semua fitur sekarang global dan real-time!",
                    isNew: true
                };

                if (window.firebaseDatabase) {
                    const database = window.firebaseDatabase;
                    const announcementsRef = window.firebaseRef(database, 'globalAnnouncements');
                    window.firebasePush(announcementsRef, newAnnouncement);
                } else {
                    announcements.unshift(newAnnouncement);
                    localStorage.setItem('announcements', JSON.stringify(announcements));
                }

                localStorage.setItem('lastAnnouncementCheck', currentTime);
                unreadAnnouncements = announcements.filter(a => a.isNew).length;
                updateAnnouncementBadge();
            }
        }
        
        // NEW: Update Announcement Badge
        function updateAnnouncementBadge() {
            const newCount = announcements.filter(a => a.isNew).length;
            unreadAnnouncements = newCount;

            if (newCount > 0) {
                announcementBtn.classList.add('has-news');
                announcementBtn.title = `${newCount} pengumuman global baru`;
            } else {
                announcementBtn.classList.remove('has-news');
                announcementBtn.title = 'Global System Announcement';
            }
        }
        
        // ==============================
        // NEW: Chatbox Functions
        // ==============================
        
        function initChatbox() {
            // Load user name from localStorage
            const savedName = localStorage.getItem('chatUserName');
            if (savedName) {
                chatboxNameInput.value = savedName;
                userChatName = savedName;
            } else {
                userChatName = 'Pengunjung';
                localStorage.setItem('chatUserName', userChatName);
            }
            
            // Save name when changed
            chatboxNameInput.addEventListener('change', () => {
                userChatName = chatboxNameInput.value.trim() || 'Pengunjung';
                localStorage.setItem('chatUserName', userChatName);
            });
            
            // Load messages
            loadChatMessages();
            
            // Initialize Firebase if available
            if (window.firebaseDatabase) {
                initFirebaseChat();
            } else {
                console.log('Firebase not available, using localStorage for chat');
            }
            
            // Setup event listeners
            chatboxSendBtn.addEventListener('click', sendMessage);
            chatboxInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            simulateChatBtn.addEventListener('click', simulateRandomChat);
            
            updateChatboxBadge();
        }
        
        // NEW: Load Chat Messages
        function loadChatMessages() {
            if (window.firebaseDatabase) {
                const database = window.firebaseDatabase;
                const chatRef = window.firebaseRef(database, 'globalChat/messages');

                // Set up real-time listener
                window.firebaseOnValue(chatRef, (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        chatMessages = Object.values(data).sort((a, b) => a.id - b.id);
                        renderChatMessages();
                    } else {
                        // Add some default messages if no global messages exist
                        chatMessages = [
                            {
                                id: Date.now() - 3600000,
                                name: 'Al\'Majid',
                                text: 'Selamat datang di chatbox global! Silakan tinggalkan komentar.',
                                timestamp: new Date(Date.now() - 3600000).toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' }),
                                date: new Date(Date.now() - 3600000).toLocaleDateString('id-ID')
                            },
                            {
                                id: Date.now() - 1800000,
                                name: 'Oradev',
                                text: 'Website ini dibuat dengan menggunakan HTML, CSS, dan JavaScript!',
                                timestamp: new Date(Date.now() - 1800000).toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' }),
                                date: new Date(Date.now() - 1800000).toLocaleDateString('id-ID')
                            }
                        ];
                        // Save default messages to Firebase
                        chatMessages.forEach(msg => {
                            window.firebasePush(chatRef, msg);
                        });
                        renderChatMessages();
                    }
                });
            } else {
                // Fallback to localStorage
                const savedMessages = localStorage.getItem('chatMessages');
                if (savedMessages) {
                    try {
                        chatMessages = JSON.parse(savedMessages);
                        renderChatMessages();
                    } catch (e) {
                        console.error('Error loading chat messages:', e);
                        chatMessages = [];
                    }
                } else {
                    chatMessages = [
                        {
                            id: Date.now() - 3600000,
                            name: 'Al\'Majid',
                            text: 'Selamat datang di chatbox! Silakan tinggalkan komentar.',
                            timestamp: new Date(Date.now() - 3600000).toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' }),
                            date: new Date(Date.now() - 3600000).toLocaleDateString('id-ID')
                        }
                    ];
                    localStorage.setItem('chatMessages', JSON.stringify(chatMessages));
                    renderChatMessages();
                }
            }
        }

        // NEW: Save Chat Messages (only used for localStorage fallback)
        function saveChatMessages() {
            if (!window.firebaseDatabase) {
                localStorage.setItem('chatMessages', JSON.stringify(chatMessages));
            }
        }
        
        // NEW: Initialize Firebase Chat (now handled in loadChatMessages)
        function initFirebaseChat() {
            // Chat initialization is now handled in loadChatMessages
            console.log('Global Firebase chat initialized');
        }
        
        // NEW: Send Message
        function sendMessage() {
            const messageText = chatboxInput.value.trim();
            
            if (!messageText) {
                chatboxInput.focus();
                return;
            }
            
            if (messageText.length > 200) {
                alert('Pesan terlalu panjang! Max 200 karakter.');
                return;
            }
            
            const name = chatboxNameInput.value.trim() || 'Pengunjung';
            userChatName = name;
            localStorage.setItem('chatUserName', name);
            
            const message = {
                id: Date.now(),
                name: name,
                text: messageText,
                timestamp: new Date().toLocaleTimeString('id-ID', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: false 
                }),
                date: new Date().toLocaleDateString('id-ID')
            };
            
            // Add to local array
            chatMessages.push(message);

            // Send to Firebase
            if (window.firebaseDatabase) {
                try {
                    const database = window.firebaseDatabase;
                    const chatRef = window.firebaseRef(database, 'globalChat/messages');
                    window.firebasePush(chatRef, message);
                    showNotification('Pesan terkirim ke chat global!');
                } catch (error) {
                    console.error('Firebase send error:', error);
                    showNotification('Error mengirim pesan');
                }
            } else {
                // Fallback to localStorage
                saveChatMessages();
                renderChatMessages();
                showNotification('Pesan disimpan lokal');
            }
            
            // Clear input and focus
            chatboxInput.value = '';
            chatboxInput.focus();
            
            // Reset unread messages if modal is open
            if (chatboxModal.style.display === 'flex') {
                unreadMessages = 0;
                updateChatboxBadge();
            }
            
            // Show notification
            showNotification('Komentar berhasil dikirim!');
        }
        
        // NEW: Simulate Random Chat
        function simulateRandomChat() {
            const randomNames = ['Budi', 'Sari', 'Rina', 'Agus', 'Dewi', 'Fajar', 'Maya', 'Rudi', 'Lina', 'Hendra'];
            const randomMessages = [
                'Website keren banget!',
                'Efeknya mantap bro',
                'Musiknya enak didenger',
                'Desainnya modern banget',
                'Keren portfolio-nya',
                'Mantap jiwa!',
                'Keep it up bro',
                'Sukses selalu',
                'Kreatif banget nih',
                'Salut sama karyanya'
            ];
            
            const randomName = randomNames[Math.floor(Math.random() * randomNames.length)];
            const randomMessage = randomMessages[Math.floor(Math.random() * randomMessages.length)];
            
            const simulatedMessage = {
                id: Date.now(),
                name: randomName,
                text: randomMessage,
                timestamp: new Date().toLocaleTimeString('id-ID', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: false 
                }),
                date: new Date().toLocaleDateString('id-ID')
            };
            
            // Send to Firebase
            if (window.firebaseDatabase) {
                try {
                    const database = window.firebaseDatabase;
                    const chatRef = window.firebaseRef(database, 'globalChat/messages');
                    window.firebasePush(chatRef, simulatedMessage);
                    showNotification('Komentar simulasi ditambahkan ke global chat!');
                } catch (error) {
                    console.error('Firebase send error:', error);
                    showNotification('Error menambah komentar simulasi');
                }
            } else {
                // Fallback to localStorage
                chatMessages.push(simulatedMessage);
                saveChatMessages();
                renderChatMessages();
                showNotification('Komentar simulasi ditambahkan!');
            }
            
            // Show notification
            showNotification('Komentar simulasi berhasil ditambahkan!');
        }
        
        // NEW: Delete Message
        function deleteMessage(messageId) {
            if (confirm('Apakah Anda yakin ingin menghapus komentar ini dari global chat?')) {
                if (window.firebaseDatabase) {
                    // Find and delete from Firebase
                    const database = window.firebaseDatabase;
                    const chatRef = window.firebaseRef(database, 'globalChat/messages');

                    // Get all messages to find the key
                    window.firebaseGet(chatRef).then((snapshot) => {
                        const data = snapshot.val();
                        if (data) {
                            const keyToDelete = Object.keys(data).find(key => data[key].id === messageId);
                            if (keyToDelete) {
                                window.firebaseRemove(window.firebaseRef(database, `globalChat/messages/${keyToDelete}`));
                                showNotification('Komentar berhasil dihapus dari global chat!');
                            }
                        }
                    }).catch(error => {
                        console.error('Firebase delete error:', error);
                        showNotification('Error menghapus komentar');
                    });
                } else {
                    // Fallback to localStorage
                    chatMessages = chatMessages.filter(msg => msg.id !== messageId);
                    saveChatMessages();
                    renderChatMessages();
                    showNotification('Komentar berhasil dihapus!');
                }
            }
        }
        
        // NEW: Render Chat Messages
        function renderChatMessages() {
            chatboxMessages.innerHTML = '';
            
            if (chatMessages.length === 0) {
                chatboxMessages.innerHTML = '<p style="text-align: center; color: rgba(255,255,255,0.7); padding: 2rem;">Belum ada komentar. Jadilah yang pertama!</p>';
                return;
            }
            
            const sortedMessages = [...chatMessages].sort((a, b) => b.id - a.id);
            
            sortedMessages.forEach(msg => {
                const messageElement = document.createElement('div');
                messageElement.className = 'message-item';
                
                // Create delete button
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'message-delete';
                deleteBtn.innerHTML = '<i class="fas fa-times"></i>';
                deleteBtn.title = 'Hapus komentar';
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    deleteMessage(msg.id);
                });
                
                messageElement.innerHTML = `
                    <div class="message-header">
                        <div class="message-name">${msg.name}</div>
                        <div class="message-time">${msg.date} ${msg.timestamp}</div>
                    </div>
                    <div class="message-text">${msg.text}</div>
                `;
                
                messageElement.appendChild(deleteBtn);
                chatboxMessages.appendChild(messageElement);
            });
            
            // Auto scroll to bottom
            chatboxMessages.scrollTop = chatboxMessages.scrollHeight;
        }
        
        // NEW: Show Notification
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.position = 'fixed';
            notification.style.top = '20px';
            notification.style.right = '20px';
            notification.style.background = '#4a6cf7';
            notification.style.color = 'white';
            notification.style.padding = '12px 20px';
            notification.style.borderRadius = '8px';
            notification.style.zIndex = '9999';
            notification.style.boxShadow = '0 4px 12px rgba(0,0,0,0.3)';
            notification.style.animation = 'fadeInUp 0.3s ease';
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'fadeInUp 0.3s ease reverse';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }
        
        // NEW: Update Chatbox Badge
        function updateChatboxBadge() {
            if (unreadMessages > 0) {
                chatboxBtn.classList.add('has-messages');
                chatboxBtn.title = `${unreadMessages} pesan baru`;
            } else {
                chatboxBtn.classList.remove('has-messages');
                chatboxBtn.title = 'Chatbox Komentar';
            }
        }
        
        // ==============================
        // NEW: Game Functions
        // ==============================
        
        function initGames() {
            // Setup game login modal
            showRegisterLink.addEventListener('click', () => {
                loginForm.style.display = 'none';
                registerForm.style.display = 'block';
            });
            
            showLoginLink.addEventListener('click', () => {
                registerForm.style.display = 'none';
                loginForm.style.display = 'block';
            });
            
            loginBtn.addEventListener('click', handleLogin);
            registerBtn.addEventListener('click', handleRegister);
            
            // Load leaderboard
            loadLeaderboard();
            
            // Setup game buttons
            document.querySelectorAll('.play-game-btn[data-game]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const game = btn.getAttribute('data-game');
                    if (!currentUser) {
                        currentGame = game;
                        openModal(gameLoginModal);
                    } else {
                        startGame(game);
                    }
                });
            });
            
            // Setup game-specific event listeners
            setupReactionGame();
            setupNumberGame();
            setupMemoryGame();
            setupTicTacToe();
            setupTypingGame();
            setupTriviaGame();
        }
        
        function handleLogin() {
            const username = loginUsername.value.trim();
            const password = loginPassword.value;
            
            if (!username || !password) {
                showNotification('Harap isi semua field');
                return;
            }
            
            const savedUser = localStorage.getItem(`game_user_${username}`);
            if (savedUser) {
                const user = JSON.parse(savedUser);
                if (user.password === password) {
                    currentUser = user;
                    showNotification(`Selamat datang kembali, ${username}!`);
                    closeModal(gameLoginModal);
                    startGame(currentGame);
                    loginUsername.value = '';
                    loginPassword.value = '';
                } else {
                    showNotification('Password salah!');
                }
            } else {
                showNotification('Username tidak ditemukan!');
            }
        }
        
        function handleRegister() {
            const username = registerUsername.value.trim();
            const password = registerPassword.value;
            const confirmPassword = registerConfirmPassword.value;
            
            if (!username || !password || !confirmPassword) {
                showNotification('Harap isi semua field');
                return;
            }
            
            if (password !== confirmPassword) {
                showNotification('Password tidak cocok!');
                return;
            }
            
            if (localStorage.getItem(`game_user_${username}`)) {
                showNotification('Username sudah digunakan!');
                return;
            }
            
            const user = {
                username,
                password,
                scores: {}
            };
            
            localStorage.setItem(`game_user_${username}`, JSON.stringify(user));
            currentUser = user;
            
            showNotification(`Akun berhasil dibuat! Selamat bermain, ${username}!`);
            closeModal(gameLoginModal);
            startGame(currentGame);
            
            registerUsername.value = '';
            registerPassword.value = '';
            registerConfirmPassword.value = '';
        }
        
        function startGame(game) {
            switch(game) {
                case 'reaction':
                    openModal(reactionGameModal);
                    loadGameLeaderboard('reaction', 'reaction-leaderboard-body');
                    break;
                case 'number':
                    openModal(numberGameModal);
                    break;
                case 'memory':
                    openModal(memoryGameModal);
                    break;
                case 'tic-tac-toe':
                    openModal(ticTacToeModal);
                    break;
                case 'typing':
                    openModal(typingGameModal);
                    break;
                case 'trivia':
                    openModal(triviaGameModal);
                    break;
            }
        }
        
        function saveGameScore(game, score) {
            if (!currentUser) return;
            
            const userKey = `game_user_${currentUser.username}`;
            const user = JSON.parse(localStorage.getItem(userKey));
            
            if (!user.scores) user.scores = {};
            if (!user.scores[game] || score > user.scores[game]) {
                user.scores[game] = score;
                localStorage.setItem(userKey, JSON.stringify(user));
                
                // Save to leaderboard
                saveToLeaderboard(game, score);
            }
            
            // Update current user
            currentUser.scores = user.scores;
        }
        
        function saveToLeaderboard(game, score) {
            const leaderboardEntry = {
                username: currentUser.username,
                game: game,
                score: score,
                date: new Date().toLocaleDateString('id-ID'),
                timestamp: Date.now()
            };

            // Save to Firebase
            if (window.firebaseDatabase) {
                try {
                    const database = window.firebaseDatabase;
                    const leaderboardRef = window.firebaseRef(database, 'leaderboard');
                    window.firebasePush(leaderboardRef, leaderboardEntry);
                    showNotification('Skor berhasil disimpan ke leaderboard global!');
                } catch (error) {
                    console.error('Firebase save error:', error);
                    showNotification('Error menyimpan skor');
                }
            } else {
                // Fallback to localStorage if Firebase not available
                let leaderboard = JSON.parse(localStorage.getItem('leaderboard') || '[]');
                leaderboard.push(leaderboardEntry);
                leaderboard.sort((a, b) => b.score - a.score);
                leaderboard = leaderboard.slice(0, 50);
                localStorage.setItem('leaderboard', JSON.stringify(leaderboard));
                showNotification('Skor disimpan lokal (Firebase tidak tersedia)');
            }

            // Update leaderboard display
            loadLeaderboard();
        }
        
        function loadLeaderboard() {
            leaderboardBody.innerHTML = `
                <tr>
                    <td colspan="5" style="text-align: center; padding: 2rem;">
                        Memuat leaderboard global...
                    </td>
                </tr>
            `;

            if (window.firebaseDatabase) {
                const database = window.firebaseDatabase;
                const leaderboardRef = window.firebaseRef(database, 'leaderboard');

                // Set up real-time listener
                window.firebaseOnValue(leaderboardRef, (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        const leaderboard = Object.values(data);

                        // Group by username and get best score for each user
                        const userBestScores = {};
                        leaderboard.forEach(entry => {
                            if (!userBestScores[entry.username] || entry.score > userBestScores[entry.username].score) {
                                userBestScores[entry.username] = entry;
                            }
                        });

                        const globalLeaderboard = Object.values(userBestScores).sort((a, b) => b.score - a.score);

                        renderLeaderboard(globalLeaderboard.slice(0, 10));
                    } else {
                        renderLeaderboard([]);
                    }
                });
            } else {
                // Fallback to localStorage
                let leaderboard = JSON.parse(localStorage.getItem('leaderboard') || '[]');

                const userBestScores = {};
                leaderboard.forEach(entry => {
                    if (!userBestScores[entry.username] || entry.score > userBestScores[entry.username].score) {
                        userBestScores[entry.username] = entry;
                    }
                });

                const globalLeaderboard = Object.values(userBestScores).sort((a, b) => b.score - a.score);
                renderLeaderboard(globalLeaderboard.slice(0, 10));
            }
        }

        function renderLeaderboard(leaderboard) {
            leaderboardBody.innerHTML = '';

            if (leaderboard.length === 0) {
                leaderboardBody.innerHTML = `
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 2rem;">
                            Belum ada skor di leaderboard global. Jadilah yang pertama!
                        </td>
                    </tr>
                `;
                return;
            }

            leaderboard.forEach((entry, index) => {
                const row = document.createElement('tr');
                row.className = `rank-${index + 1}`;

                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${entry.username}</td>
                    <td>Global</td>
                    <td>${entry.score}</td>
                    <td>${entry.date}</td>
                `;

                leaderboardBody.appendChild(row);
            });
        }

        function loadGameLeaderboard(game, tbodyId) {
            const tbody = document.getElementById(tbodyId);
            if (!tbody) return;

            tbody.innerHTML = `
                <tr>
                    <td colspan="4" style="text-align: center; padding: 1rem;">
                        Memuat...
                    </td>
                </tr>
            `;

            if (window.firebaseDatabase) {
                const database = window.firebaseDatabase;
                const leaderboardRef = window.firebaseRef(database, 'leaderboard');

                window.firebaseOnValue(leaderboardRef, (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        const leaderboard = Object.values(data);
                        const gameEntries = leaderboard.filter(entry => entry.game === game).sort((a, b) => b.score - a.score);

                        renderGameLeaderboard(tbody, gameEntries.slice(0, 5));
                    } else {
                        renderGameLeaderboard(tbody, []);
                    }
                });
            } else {
                // Fallback to localStorage
                let leaderboard = JSON.parse(localStorage.getItem('leaderboard') || '[]');
                const gameEntries = leaderboard.filter(entry => entry.game === game).sort((a, b) => b.score - a.score);
                renderGameLeaderboard(tbody, gameEntries.slice(0, 5));
            }
        }

        function renderGameLeaderboard(tbody, gameEntries) {
            tbody.innerHTML = '';

            if (gameEntries.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="4" style="text-align: center; padding: 1rem;">
                            Belum ada skor untuk game ini
                        </td>
                    </tr>
                `;
                return;
            }

            gameEntries.forEach((entry, index) => {
                const row = document.createElement('tr');
                row.className = `rank-${index + 1}`;

                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${entry.username}</td>
                    <td>${entry.score}</td>
                    <td>${entry.date}</td>
                `;

                tbody.appendChild(row);
            });
        }
        
        function getGameName(gameKey) {
            const gameNames = {
                'reaction': 'Reaction Test',
                'number': 'Tebak Angka',
                'memory': 'Memory Card',
                'tic-tac-toe': 'Tic-Tac-Toe',
                'typing': 'Typing Test',
                'trivia': 'Trivia Quiz'
            };
            return gameNames[gameKey] || gameKey;
        }
        
        // ==============================
        // Game-Specific Functions
        // ==============================
        
        // Reaction Game
        function setupReactionGame() {
            const reactionBox = document.getElementById('reaction-box');
            const startBtn = document.getElementById('start-reaction');
            const scoreDisplay = document.getElementById('reaction-score');
            const bestDisplay = document.getElementById('reaction-best');
            const triesDisplay = document.getElementById('reaction-tries');
            
            startBtn.addEventListener('click', () => {
                reactionGameActive = true;
                reactionBox.className = 'reaction-box waiting';
                reactionBox.textContent = 'Tunggu...';
                startBtn.disabled = true;
                
                const waitTime = Math.random() * 3000 + 1000; // 1-4 seconds
                
                setTimeout(() => {
                    if (reactionGameActive) {
                        reactionBox.className = 'reaction-box ready';
                        reactionBox.textContent = 'KLIK SEKARANG!';
                        reactionStartTime = Date.now();
                    }
                }, waitTime);
            });
            
            reactionBox.addEventListener('click', () => {
                if (!reactionGameActive || reactionBox.className !== 'reaction-box ready') {
                    reactionBox.className = 'reaction-box too-fast';
                    reactionBox.textContent = 'Terlalu cepat!';
                    setTimeout(() => {
                        reactionBox.className = 'reaction-box waiting';
                        reactionBox.textContent = 'Tunggu...';
                        startBtn.disabled = false;
                    }, 1000);
                    return;
                }
                
                const reactionTime = Date.now() - reactionStartTime;
                reactionGameActive = false;
                reactionTries++;
                
                scoreDisplay.textContent = reactionTime;
                triesDisplay.textContent = reactionTries;
                
                if (reactionBestTime === 0 || reactionTime < reactionBestTime) {
                    reactionBestTime = reactionTime;
                    bestDisplay.textContent = reactionBestTime;
                    saveGameScore('reaction', 10000 - reactionTime); // Higher score for faster times
                }
                
                reactionBox.className = 'reaction-box waiting';
                reactionBox.textContent = `Reaksi: ${reactionTime}ms`;
                startBtn.disabled = false;
                
                // Save score
                saveGameScore('reaction', 10000 - reactionTime);
            });
        }
        
        // Number Game
        function setupNumberGame() {
            const guessInput = document.getElementById('number-guess');
            const submitBtn = document.getElementById('submit-guess');
            const newGameBtn = document.getElementById('new-number-game');
            const attemptsDisplay = document.getElementById('number-attempts');
            const hintDisplay = document.getElementById('number-hint');
            const bestDisplay = document.getElementById('number-best');
            
            function newGame() {
                targetNumber = Math.floor(Math.random() * 100) + 1;
                numberAttempts = 0;
                attemptsDisplay.textContent = numberAttempts;
                hintDisplay.textContent = '-';
                guessInput.value = '';
                guessInput.disabled = false;
                submitBtn.disabled = false;
                document.getElementById('number-instructions').textContent = 
                    'Komputer telah memilih angka antara 1-100. Coba tebak!';
                console.log('Target number:', targetNumber); // For debugging
            }
            
            newGameBtn.addEventListener('click', newGame);
            
            submitBtn.addEventListener('click', () => {
                const guess = parseInt(guessInput.value);
                
                if (isNaN(guess) || guess < 1 || guess > 100) {
                    showNotification('Masukkan angka antara 1-100!');
                    return;
                }
                
                numberAttempts++;
                attemptsDisplay.textContent = numberAttempts;
                
                if (guess === targetNumber) {
                    hintDisplay.textContent = 'TEPAT!';
                    guessInput.disabled = true;
                    submitBtn.disabled = true;
                    
                    const score = Math.max(1, 100 - numberAttempts * 5);
                    if (score > numberBestScore) {
                        numberBestScore = score;
                        bestDisplay.textContent = numberBestScore;
                        localStorage.setItem('numberBestScore', numberBestScore);
                    }
                    
                    saveGameScore('number', score);
                    showNotification(`Selamat! Anda menebak dalam ${numberAttempts} percobaan. Skor: ${score}`);
                    
                } else if (guess < targetNumber) {
                    hintDisplay.textContent = 'TERLALU RENDAH';
                    guessInput.value = '';
                    guessInput.focus();
                } else {
                    hintDisplay.textContent = 'TERLALU TINGGI';
                    guessInput.value = '';
                    guessInput.focus();
                }
            });
            
            guessInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    submitBtn.click();
                }
            });
            
            newGame();
        }
        
        // Memory Game
        function setupMemoryGame() {
            const memoryGrid = document.getElementById('memory-grid');
            const newGameBtn = document.getElementById('new-memory-game');
            const movesDisplay = document.getElementById('memory-moves');
            const matchesDisplay = document.getElementById('memory-matches');
            const timeDisplay = document.getElementById('memory-time');
            
            const symbols = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'];
            
            function newGame() {
                memoryGrid.innerHTML = '';
                memoryCards = [...symbols, ...symbols];
                memoryCards.sort(() => Math.random() - 0.5);
                flippedCards = [];
                matchedPairs = 0;
                memoryMoves = 0;
                memoryStartTime = Date.now();
                
                movesDisplay.textContent = memoryMoves;
                matchesDisplay.textContent = matchedPairs;
                
                clearInterval(memoryTimer);
                memoryTimer = setInterval(() => {
                    const elapsed = Math.floor((Date.now() - memoryStartTime) / 1000);
                    timeDisplay.textContent = elapsed;
                }, 1000);
                
                memoryCards.forEach((symbol, index) => {
                    const card = document.createElement('div');
                    card.className = 'memory-card';
                    card.dataset.symbol = symbol;
                    card.dataset.index = index;
                    
                    card.addEventListener('click', () => {
                        if (flippedCards.length >= 2 || card.classList.contains('flipped') || card.classList.contains('matched')) {
                            return;
                        }
                        
                        card.classList.add('flipped');
                        card.textContent = symbol;
                        flippedCards.push(card);
                        
                        if (flippedCards.length === 2) {
                            memoryMoves++;
                            movesDisplay.textContent = memoryMoves;
                            
                            const [card1, card2] = flippedCards;
                            
                            if (card1.dataset.symbol === card2.dataset.symbol) {
                                card1.classList.add('matched');
                                card2.classList.add('matched');
                                matchedPairs++;
                                matchesDisplay.textContent = matchedPairs;
                                flippedCards = [];
                                
                                if (matchedPairs === symbols.length) {
                                    clearInterval(memoryTimer);
                                    const elapsed = Math.floor((Date.now() - memoryStartTime) / 1000);
                                    const score = Math.max(1, 1000 - memoryMoves * 10 - elapsed);
                                    saveGameScore('memory', score);
                                    showNotification(`Selamat! Anda menyelesaikan dalam ${memoryMoves} gerakan dan ${elapsed} detik. Skor: ${score}`);
                                }
                            } else {
                                setTimeout(() => {
                                    card1.classList.remove('flipped');
                                    card2.classList.remove('flipped');
                                    card1.textContent = '';
                                    card2.textContent = '';
                                    flippedCards = [];
                                }, 1000);
                            }
                        }
                    });
                    
                    memoryGrid.appendChild(card);
                });
            }
            
            newGameBtn.addEventListener('click', newGame);
            newGame();
        }
        
        // Tic-Tac-Toe Game
        function setupTicTacToe() {
            const tttGrid = document.getElementById('tic-tac-toe-grid');
            const newGameBtn = document.getElementById('new-ttt-game');
            const vsComputerBtn = document.getElementById('ttt-vs-computer');
            const currentPlayerDisplay = document.getElementById('current-player');
            const winsDisplay = document.getElementById('ttt-wins');
            const lossesDisplay = document.getElementById('ttt-losses');
            const drawsDisplay = document.getElementById('ttt-draws');
            
            function newGame(vsComputer = false) {
                tttGrid.innerHTML = '';
                tttBoard = ['', '', '', '', '', '', '', '', ''];
                currentPlayer = 'X';
                tttGameActive = true;
                tttVsComputer = vsComputer;
                
                currentPlayerDisplay.textContent = currentPlayer;
                
                for (let i = 0; i < 9; i++) {
                    const cell = document.createElement('div');
                    cell.className = 'ttt-cell';
                    cell.dataset.index = i;
                    
                    cell.addEventListener('click', () => {
                        if (!tttGameActive || tttBoard[i] !== '') {
                            return;
                        }
                        
                        makeMove(i, 'X');
                        
                        if (tttVsComputer && tttGameActive) {
                            setTimeout(() => {
                                makeComputerMove();
                            }, 500);
                        }
                    });
                    
                    tttGrid.appendChild(cell);
                }
            }
            
            function makeMove(index, player) {
                tttBoard[index] = player;
                const cell = document.querySelector(`.ttt-cell[data-index="${index}"]`);
                cell.textContent = player;
                cell.classList.add(player.toLowerCase());
                
                if (checkWin(player)) {
                    tttGameActive = false;
                    if (player === 'X') {
                        tttWins++;
                        winsDisplay.textContent = tttWins;
                        saveGameScore('tic-tac-toe', 100);
                        showNotification('Anda menang!');
                    } else {
                        tttLosses++;
                        lossesDisplay.textContent = tttLosses;
                        showNotification('Komputer menang!');
                    }
                    return;
                }
                
                if (checkDraw()) {
                    tttGameActive = false;
                    tttDraws++;
                    drawsDisplay.textContent = tttDraws;
                    saveGameScore('tic-tac-toe', 50);
                    showNotification('Permainan seri!');
                    return;
                }
                
                currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
                currentPlayerDisplay.textContent = currentPlayer;
            }
            
            function makeComputerMove() {
                if (!tttGameActive) return;
                
                // Simple AI: Try to win, block, or random
                let move = findWinningMove('O');
                if (move === -1) move = findWinningMove('X'); // Block
                if (move === -1) {
                    // Random move
                    const emptyCells = tttBoard.map((cell, index) => cell === '' ? index : -1).filter(i => i !== -1);
                    move = emptyCells[Math.floor(Math.random() * emptyCells.length)];
                }
                
                if (move !== -1) {
                    makeMove(move, 'O');
                }
            }
            
            function findWinningMove(player) {
                const winPatterns = [
                    [0,1,2], [3,4,5], [6,7,8], // Rows
                    [0,3,6], [1,4,7], [2,5,8], // Columns
                    [0,4,8], [2,4,6] // Diagonals
                ];
                
                for (const pattern of winPatterns) {
                    const [a,b,c] = pattern;
                    const cells = [tttBoard[a], tttBoard[b], tttBoard[c]];
                    
                    if (cells.filter(cell => cell === player).length === 2 && cells.includes('')) {
                        return pattern[cells.indexOf('')];
                    }
                }
                
                return -1;
            }
            
            function checkWin(player) {
                const winPatterns = [
                    [0,1,2], [3,4,5], [6,7,8],
                    [0,3,6], [1,4,7], [2,5,8],
                    [0,4,8], [2,4,6]
                ];
                
                return winPatterns.some(pattern => {
                    const [a,b,c] = pattern;
                    return tttBoard[a] === player && tttBoard[b] === player && tttBoard[c] === player;
                });
            }
            
            function checkDraw() {
                return tttBoard.every(cell => cell !== '');
            }
            
            newGameBtn.addEventListener('click', () => newGame(false));
            vsComputerBtn.addEventListener('click', () => newGame(true));
            newGame(false);
        }
        
        // Typing Game
        function setupTypingGame() {
            const typingTextDisplay = document.getElementById('typing-text-display');
            const typingInput = document.getElementById('typing-input');
            const startBtn = document.getElementById('start-typing');
            const newTextBtn = document.getElementById('new-typing-text');
            const wpmDisplay = document.getElementById('typing-wpm');
            const accuracyDisplay = document.getElementById('typing-accuracy');
            const timeDisplay = document.getElementById('typing-time');
            
            function newText() {
                currentTypingText = typingTexts[Math.floor(Math.random() * typingTexts.length)];
                typingTextDisplay.textContent = currentTypingText;
                typingInput.value = '';
                typingInput.disabled = true;
                typingCorrectChars = 0;
                typingTotalChars = 0;
                wpmDisplay.textContent = '0';
                accuracyDisplay.textContent = '100%';
                timeDisplay.textContent = '60';
            }
            
            function startGame() {
                if (!currentTypingText) newText();
                
                typingInput.disabled = false;
                typingInput.focus();
                typingStartTime = Date.now();
                typingTimeLeft = 60;
                
                clearInterval(typingTimer);
                typingTimer = setInterval(() => {
                    typingTimeLeft--;
                    timeDisplay.textContent = typingTimeLeft;
                    
                    if (typingTimeLeft <= 0) {
                        endTypingGame();
                    }
                }, 1000);
                
                startBtn.disabled = true;
                newTextBtn.disabled = true;
            }
            
            function endTypingGame() {
                clearInterval(typingTimer);
                typingInput.disabled = true;
                startBtn.disabled = false;
                newTextBtn.disabled = false;
                
                const elapsedMinutes = (60 - typingTimeLeft) / 60;
                const wpm = Math.round((typingCorrectChars / 5) / elapsedMinutes);
                const accuracy = typingTotalChars === 0 ? 100 : Math.round((typingCorrectChars / typingTotalChars) * 100);
                
                wpmDisplay.textContent = wpm;
                accuracyDisplay.textContent = accuracy + '%';
                
                const score = wpm * accuracy;
                saveGameScore('typing', score);
                showNotification(`Game selesai! WPM: ${wpm}, Akurasi: ${accuracy}%, Skor: ${score}`);
            }
            
            typingInput.addEventListener('input', () => {
                if (!typingTimer) return;
                
                const input = typingInput.value;
                typingTotalChars = input.length;
                
                // Count correct characters
                let correct = 0;
                for (let i = 0; i < input.length; i++) {
                    if (i < currentTypingText.length && input[i] === currentTypingText[i]) {
                        correct++;
                    }
                }
                typingCorrectChars = correct;
                
                // Update WPM and accuracy
                const elapsedMinutes = (60 - typingTimeLeft) / 60;
                const wpm = Math.round((correct / 5) / elapsedMinutes);
                const accuracy = typingTotalChars === 0 ? 100 : Math.round((correct / typingTotalChars) * 100);
                
                wpmDisplay.textContent = wpm;
                accuracyDisplay.textContent = accuracy + '%';
                
                // Check if text is complete
                if (input === currentTypingText) {
                    endTypingGame();
                }
            });
            
            startBtn.addEventListener('click', startGame);
            newTextBtn.addEventListener('click', newText);
            newText();
        }
        
        // Trivia Game
        function setupTriviaGame() {
            const questionDisplay = document.getElementById('trivia-question');
            const optionsDisplay = document.getElementById('trivia-options');
            const nextBtn = document.getElementById('next-trivia');
            const newGameBtn = document.getElementById('new-trivia-game');
            const scoreDisplay = document.getElementById('trivia-score');
            const questionNumDisplay = document.getElementById('trivia-question-number');
            const bestDisplay = document.getElementById('trivia-best');
            
            function newGame() {
                currentTriviaIndex = 0;
                triviaScore = 0;
                scoreDisplay.textContent = triviaScore;
                bestDisplay.textContent = triviaBestScore;
                nextBtn.style.display = 'none';
                loadQuestion();
            }
            
            function loadQuestion() {
                if (currentTriviaIndex >= triviaQuestions.length) {
                    endTriviaGame();
                    return;
                }
                
                const question = triviaQuestions[currentTriviaIndex];
                questionDisplay.textContent = question.question;
                questionNumDisplay.textContent = `${currentTriviaIndex + 1}/${triviaQuestions.length}`;
                
                optionsDisplay.innerHTML = '';
                question.options.forEach((option, index) => {
                    const optionBtn = document.createElement('div');
                    optionBtn.className = 'trivia-option';
                    optionBtn.textContent = option;
                    optionBtn.dataset.index = index;
                    
                    optionBtn.addEventListener('click', () => {
                        if (nextBtn.style.display === 'block') return;
                        
                        const isCorrect = parseInt(optionBtn.dataset.index) === question.answer;
                        
                        if (isCorrect) {
                            triviaScore += 10;
                            scoreDisplay.textContent = triviaScore;
                            optionBtn.classList.add('correct');
                        } else {
                            optionBtn.classList.add('incorrect');
                            // Highlight correct answer
                            document.querySelector(`.trivia-option[data-index="${question.answer}"]`).classList.add('correct');
                        }
                        
                        // Disable all options
                        document.querySelectorAll('.trivia-option').forEach(opt => {
                            opt.style.pointerEvents = 'none';
                        });
                        
                        nextBtn.style.display = 'block';
                    });
                    
                    optionsDisplay.appendChild(optionBtn);
                });
            }
            
            function endTriviaGame() {
                questionDisplay.textContent = `Game selesai! Skor akhir: ${triviaScore}`;
                optionsDisplay.innerHTML = '';
                nextBtn.style.display = 'none';
                
                if (triviaScore > triviaBestScore) {
                    triviaBestScore = triviaScore;
                    bestDisplay.textContent = triviaBestScore;
                    localStorage.setItem('triviaBestScore', triviaBestScore);
                }
                
                saveGameScore('trivia', triviaScore);
                showNotification(`Trivia Quiz selesai! Skor: ${triviaScore}`);
            }
            
            nextBtn.addEventListener('click', () => {
                currentTriviaIndex++;
                nextBtn.style.display = 'none';
                loadQuestion();
            });
            
            newGameBtn.addEventListener('click', newGame);
            newGame();
        }
        
        // ==============================
        // NEW: File Sharing Functions
        // ==============================
        
        function initFileSharing() {
            fileUploadArea.addEventListener('click', () => {
                fileInput.click();
            });
            
            fileInput.addEventListener('change', handleFileUpload);
            
            // Drag and drop
            fileUploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                fileUploadArea.classList.add('dragover');
            });
            
            fileUploadArea.addEventListener('dragleave', () => {
                fileUploadArea.classList.remove('dragover');
            });
            
            fileUploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                fileUploadArea.classList.remove('dragover');
                
                if (e.dataTransfer.files.length) {
                    handleFileUpload({ target: { files: e.dataTransfer.files } });
                }
            });
            
            loadFiles();
        }
        
        function handleFileUpload(e) {
            const files = Array.from(e.target.files);

            files.forEach(file => {
                if (file.size > 20 * 1024 * 1024) { // 20MB limit
                    showNotification(`File ${file.name} terlalu besar (max 20MB)`);
                    return;
                }

                // Upload to Firebase Storage if available
                if (window.firebaseStorage) {
                    uploadFileToFirebase(file);
                } else {
                    // Fallback to local storage
                    uploadedFiles.push({
                        id: Date.now() + Math.random(),
                        name: file.name,
                        size: formatFileSize(file.size),
                        type: file.type,
                        url: URL.createObjectURL(file),
                        date: new Date().toLocaleDateString('id-ID'),
                        uploadedBy: 'Local User'
                    });

                    saveFiles();
                    renderFiles();
                    showNotification(`File ${file.name} berhasil diupload (lokal)`);
                }
            });

            fileInput.value = '';
        }

        async function uploadFileToFirebase(file) {
            try {
                const storage = window.firebaseStorage;
                const storageRef = window.firebaseStorageRef(storage, `sharedFiles/${Date.now()}_${file.name}`);

                const snapshot = await window.firebaseUploadBytes(storageRef, file);
                const downloadURL = await window.firebaseGetDownloadURL(snapshot.ref);

                const fileData = {
                    id: Date.now() + Math.random(),
                    name: file.name,
                    size: formatFileSize(file.size),
                    type: file.type,
                    url: downloadURL,
                    date: new Date().toLocaleDateString('id-ID'),
                    uploadedBy: 'Global User'
                };

                uploadedFiles.push(fileData);
                saveFiles();
                renderFiles();
                showNotification(`File ${file.name} berhasil diupload ke global storage!`);

            } catch (error) {
                console.error('Firebase upload error:', error);
                showNotification('Error upload file ke global storage');
            }
        }
        
        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' bytes';
            else if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
            else return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
        }
        
        function saveFiles() {
            if (window.firebaseDatabase) {
                const database = window.firebaseDatabase;
                const filesRef = window.firebaseRef(database, 'sharedFiles');
                window.firebaseSet(filesRef, uploadedFiles);
            } else {
                // Fallback to localStorage
                localStorage.setItem('uploadedFiles', JSON.stringify(uploadedFiles));
            }
        }

        function loadFiles() {
            if (window.firebaseDatabase) {
                const database = window.firebaseDatabase;
                const filesRef = window.firebaseRef(database, 'sharedFiles');

                window.firebaseOnValue(filesRef, (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        uploadedFiles = data;
                        renderFiles();
                    } else {
                        uploadedFiles = [];
                        renderFiles();
                    }
                });
            } else {
                // Fallback to localStorage
                const savedFiles = localStorage.getItem('uploadedFiles');
                if (savedFiles) {
                    uploadedFiles = JSON.parse(savedFiles);
                    renderFiles();
                }
            }
        }
        
        function renderFiles() {
            fileList.innerHTML = '';

            if (uploadedFiles.length === 0) {
                fileList.innerHTML = `
                    <div style="text-align: center; color: rgba(255,255,255,0.6); padding: 2rem;">
                        Belum ada file yang diupload secara global
                    </div>
                `;
                return;
            }

            uploadedFiles.forEach(file => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';

                const icon = getFileIcon(file.type);

                fileItem.innerHTML = `
                    <div class="file-icon">
                        <i class="${icon}"></i>
                    </div>
                    <div class="file-info">
                        <div class="file-name">${file.name}</div>
                        <div class="file-size">${file.size}  ${file.date}  ${file.uploadedBy || 'Unknown'}</div>
                    </div>
                    <div class="file-actions">
                        <button class="file-action-btn download-btn" data-id="${file.id}">
                            <i class="fas fa-download"></i>
                        </button>
                        <button class="file-action-btn delete-btn" data-id="${file.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;

                fileList.appendChild(fileItem);
            });

            // Add event listeners for buttons
            document.querySelectorAll('.download-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const fileId = e.target.closest('.download-btn').dataset.id;
                    const file = uploadedFiles.find(f => f.id == fileId);
                    if (file) {
                        const a = document.createElement('a');
                        a.href = file.url;
                        a.download = file.name;
                        a.click();
                        showNotification(`Mengunduh ${file.name}`);
                    }
                });
            });

            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const fileId = e.target.closest('.delete-btn').dataset.id;
                    if (confirm('Apakah Anda yakin ingin menghapus file ini dari global storage?')) {
                        uploadedFiles = uploadedFiles.filter(f => f.id != fileId);
                        saveFiles();
                        renderFiles();
                        showNotification('File berhasil dihapus dari global storage');
                    }
                });
            });
        }
        
        function getFileIcon(fileType) {
            if (fileType.includes('image')) return 'fas fa-file-image';
            if (fileType.includes('pdf')) return 'fas fa-file-pdf';
            if (fileType.includes('word') || fileType.includes('document')) return 'fas fa-file-word';
            if (fileType.includes('excel') || fileType.includes('spreadsheet')) return 'fas fa-file-excel';
            if (fileType.includes('video')) return 'fas fa-file-video';
            if (fileType.includes('audio')) return 'fas fa-file-audio';
            return 'fas fa-file';
        }
        
        // ==============================
        // NEW: Video Conference Functions
        // ==============================
        
        function initVideoConference() {
            // Generate unique numeric room ID
            roomId = generateUniqueRoomId();
            currentRoomIdDisplay.textContent = roomId;

            // Event listeners
            joinRoomBtn.addEventListener('click', joinRoom);
            copyRoomIdBtn.addEventListener('click', copyRoomId);
            toggleMicBtn.addEventListener('click', toggleMic);
            toggleCameraBtn.addEventListener('click', toggleCamera);
            toggleScreenBtn.addEventListener('click', toggleScreenShare);
            endCallBtn.addEventListener('click', endCall);
            videoChatSendBtn.addEventListener('click', sendVideoChatMessage);
            videoChatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendVideoChatMessage();
            });

            roomIdInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') joinRoom();
            });

            // Initialize WebRTC
            console.log('WebRTC video conference initialized with Firebase signaling');
            showNotification('Video conference siap! ID Room: ' + roomId);
        }

        function joinRoom() {
            const newRoomId = roomIdInput.value.trim();
            if (!newRoomId || !/^\d{6}$/.test(newRoomId)) {
                showNotification('Masukkan Room ID 6 digit angka yang valid');
                return;
            }

            // Close existing connection
            if (peerConnection) {
                peerConnection.close();
                peerConnection = null;
            }

            roomId = newRoomId;
            currentRoomIdDisplay.textContent = roomId;

            // Join the room
            joinRoomWithWebRTC(roomId);
            roomIdInput.value = '';
        }

        async function joinRoomWithWebRTC(roomId) {
            if (!window.firebaseDatabase) {
                showNotification('Firebase tidak tersedia');
                return;
            }

            const database = window.firebaseDatabase;
            const roomRef = window.firebaseRef(database, `rooms/${roomId}`);

            try {
                // Check if room exists
                const roomSnapshot = await window.firebaseGet(roomRef);
                if (roomSnapshot.exists()) {
                    // Room exists, join as second participant
                    isInitiator = false;
                    await joinExistingRoom(roomId);
                } else {
                    // Create new room
                    isInitiator = true;
                    await createRoom(roomId);
                }
            } catch (error) {
                console.error('Error joining room:', error);
                showNotification('Error joining room');
            }
        }

        async function createRoom(roomId) {
            console.log('Creating room:', roomId);
            showNotification('Membuat room ' + roomId + '...');

            const database = window.firebaseDatabase;
            const roomRef = window.firebaseRef(database, `rooms/${roomId}`);

            // Create peer connection
            peerConnection = createPeerConnection(roomId);

            // Add local stream if available
            if (localStream) {
                localStream.getTracks().forEach(track => {
                    peerConnection.addTrack(track, localStream);
                });
            }

            // Create offer
            const offer = await peerConnection.createOffer();
            await peerConnection.setLocalDescription(offer);

            // Save offer to Firebase
            await window.firebaseSet(roomRef, {
                offer: {
                    type: offer.type,
                    sdp: offer.sdp
                },
                createdAt: Date.now()
            });

            // Listen for answer
            window.firebaseOnValue(window.firebaseRef(database, `rooms/${roomId}/answer`), (snapshot) => {
                const answer = snapshot.val();
                if (answer && !peerConnection.currentRemoteDescription) {
                    peerConnection.setRemoteDescription(new RTCSessionDescription(answer));
                }
            });

            showNotification('Room ' + roomId + ' dibuat! Tunggu orang lain join');
        }

        async function joinExistingRoom(roomId) {
            console.log('Joining existing room:', roomId);
            showNotification('Bergabung ke room ' + roomId + '...');

            const database = window.firebaseDatabase;
            const roomRef = window.firebaseRef(database, `rooms/${roomId}`);

            // Get offer from Firebase
            const roomSnapshot = await window.firebaseGet(roomRef);
            const roomData = roomSnapshot.val();

            if (!roomData || !roomData.offer) {
                showNotification('Room tidak valid');
                return;
            }

            // Create peer connection
            peerConnection = createPeerConnection(roomId);

            // Add local stream if available
            if (localStream) {
                localStream.getTracks().forEach(track => {
                    peerConnection.addTrack(track, localStream);
                });
            }

            // Set remote description (offer)
            await peerConnection.setRemoteDescription(new RTCSessionDescription(roomData.offer));

            // Create answer
            const answer = await peerConnection.createAnswer();
            await peerConnection.setLocalDescription(answer);

            // Save answer to Firebase
            await window.firebaseSet(window.firebaseRef(database, `rooms/${roomId}/answer`), {
                type: answer.type,
                sdp: answer.sdp
            });

            showNotification('Berhasil bergabung ke room ' + roomId);
        }

        function createPeerConnection(roomId) {
            const pc = new RTCPeerConnection({
                iceServers: [
                    { urls: 'stun:stun.l.google.com:19302' },
                    { urls: 'stun:stun1.l.google.com:19302' }
                ]
            });

            // Handle ICE candidates
            pc.onicecandidate = (event) => {
                if (event.candidate) {
                    const database = window.firebaseDatabase;
                    const candidateRef = window.firebaseRef(database, `rooms/${roomId}/candidates/${Date.now()}`);
                    window.firebaseSet(candidateRef, {
                        candidate: event.candidate.candidate,
                        sdpMid: event.candidate.sdpMid,
                        sdpMLineIndex: event.candidate.sdpMLineIndex
                    });
                }
            };

            // Handle remote stream
            pc.ontrack = (event) => {
                console.log('Received remote stream');
                addVideoStream(event.streams[0], 'remote-peer');
            };

            // Handle data channel
            pc.ondatachannel = (event) => {
                dataChannel = event.channel;
                setupDataChannel();
            };

            // Listen for ICE candidates from Firebase
            const database = window.firebaseDatabase;
            window.firebaseOnValue(window.firebaseRef(database, `rooms/${roomId}/candidates`), (snapshot) => {
                const candidates = snapshot.val();
                if (candidates) {
                    Object.values(candidates).forEach(candidateData => {
                        if (candidateData.candidate) {
                            pc.addIceCandidate(new RTCIceCandidate({
                                candidate: candidateData.candidate,
                                sdpMid: candidateData.sdpMid,
                                sdpMLineIndex: candidateData.sdpMLineIndex
                            }));
                        }
                    });
                }
            });

            // Create data channel if initiator
            if (isInitiator) {
                dataChannel = pc.createDataChannel('chat');
                setupDataChannel();
            }

            return pc;
        }

        function setupDataChannel() {
            if (!dataChannel) return;

            dataChannel.onopen = () => {
                console.log('Data channel opened');
            };

            dataChannel.onmessage = (event) => {
                const data = JSON.parse(event.data);
                handleVideoChatMessage(data);
            };
        }

        function generateUniqueRoomId() {
            // Generate a unique 6-digit numeric room ID
            let id;
            do {
                id = Math.floor(100000 + Math.random() * 900000); // 6-digit number
            } while (localStorage.getItem('used_room_' + id)); // Ensure uniqueness

            // Mark this ID as used
            localStorage.setItem('used_room_' + id, 'true');

            return id.toString();
        }

        function copyRoomId() {
            navigator.clipboard.writeText(roomId).then(() => {
                showNotification('Room ID berhasil disalin!');
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = roomId;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showNotification('Room ID berhasil disalin!');
            });
        }
        
        async function startVideoConference() {
            try {
                localStream = await navigator.mediaDevices.getUserMedia({
                    video: true,
                    audio: true
                });

                localVideo.srcObject = localStream;

                // Add local video to grid
                const localVideoItem = document.querySelector('.video-item');
                localVideoItem.style.display = 'block';

                // If we have a peer connection, add the stream to it
                if (peerConnection) {
                    localStream.getTracks().forEach(track => {
                        peerConnection.addTrack(track, localStream);
                    });
                }

                showNotification('Video conference dimulai!');

            } catch (error) {
                console.error('Error accessing media devices:', error);
                showNotification('Tidak dapat mengakses kamera/mikrofon');
            }
        }
        
        function toggleMic() {
            if (localStream) {
                const audioTrack = localStream.getAudioTracks()[0];
                if (audioTrack) {
                    audioTrack.enabled = !audioTrack.enabled;
                    isMicOn = audioTrack.enabled;
                    toggleMicBtn.innerHTML = `<i class="fas fa-microphone${isMicOn ? '' : '-slash'}"></i>`;
                    showNotification(`Mikrofon ${isMicOn ? 'diaktifkan' : 'dimatikan'}`);
                }
            }
        }
        
        function toggleCamera() {
            if (localStream) {
                const videoTrack = localStream.getVideoTracks()[0];
                if (videoTrack) {
                    videoTrack.enabled = !videoTrack.enabled;
                    isCameraOn = videoTrack.enabled;
                    toggleCameraBtn.innerHTML = `<i class="fas fa-video${isCameraOn ? '' : '-slash'}"></i>`;
                    showNotification(`Kamera ${isCameraOn ? 'diaktifkan' : 'dimatikan'}`);
                }
            }
        }
        
        async function toggleScreenShare() {
            if (!isScreenSharing) {
                try {
                    const screenStream = await navigator.mediaDevices.getDisplayMedia({
                        video: true
                    });
                    
                    // Replace video track
                    const videoTrack = screenStream.getVideoTracks()[0];
                    const sender = localStream.getVideoTracks()[0];
                    if (sender) {
                        localStream.removeTrack(sender);
                        localStream.addTrack(videoTrack);
                        localVideo.srcObject = localStream;
                        
                        // Update connections
                        connections.forEach(conn => {
                            if (conn.peerConnection) {
                                const videoSender = conn.peerConnection.getSenders().find(s => s.track && s.track.kind === 'video');
                                if (videoSender) {
                                    videoSender.replaceTrack(videoTrack);
                                }
                            }
                        });
                    }
                    
                    isScreenSharing = true;
                    toggleScreenBtn.classList.add('active');
                    showNotification('Screen sharing diaktifkan');
                    
                    // Handle when user stops sharing
                    videoTrack.onended = () => {
                        toggleScreenShare();
                    };
                    
                } catch (error) {
                    console.error('Error sharing screen:', error);
                }
            } else {
                // Switch back to camera
                try {
                    const cameraStream = await navigator.mediaDevices.getUserMedia({
                        video: true
                    });
                    
                    const cameraTrack = cameraStream.getVideoTracks()[0];
                    const sender = localStream.getVideoTracks()[0];
                    if (sender) {
                        localStream.removeTrack(sender);
                        localStream.addTrack(cameraTrack);
                        localVideo.srcObject = localStream;
                        
                        // Update connections
                        connections.forEach(conn => {
                            if (conn.peerConnection) {
                                const videoSender = conn.peerConnection.getSenders().find(s => s.track && s.track.kind === 'video');
                                if (videoSender) {
                                    videoSender.replaceTrack(cameraTrack);
                                }
                            }
                        });
                    }
                    
                    isScreenSharing = false;
                    toggleScreenBtn.classList.remove('active');
                    showNotification('Screen sharing dimatikan');
                    
                } catch (error) {
                    console.error('Error switching to camera:', error);
                }
            }
        }
        
        function addVideoStream(stream, peerId) {
            // Remove existing remote video if any
            const existingRemote = document.getElementById('remote-video-item');
            if (existingRemote) {
                existingRemote.remove();
            }

            const videoItem = document.createElement('div');
            videoItem.className = 'video-item';
            videoItem.id = 'remote-video-item';

            const video = document.createElement('video');
            video.className = 'video-player';
            video.autoplay = true;
            video.playsInline = true;
            video.srcObject = stream;

            const videoInfo = document.createElement('div');
            videoInfo.className = 'video-info';
            videoInfo.textContent = `Remote User`;

            videoItem.appendChild(video);
            videoItem.appendChild(videoInfo);
            videoGrid.appendChild(videoItem);

            showNotification('Remote user terhubung!');
        }
        
        function sendVideoChatMessage() {
            const message = videoChatInput.value.trim();
            if (!message) return;

            const messageData = {
                type: 'chat',
                sender: 'Anda',
                message: message,
                timestamp: new Date().toLocaleTimeString()
            };

            // Display locally
            addVideoChatMessage(messageData);

            // Send via data channel
            if (dataChannel && dataChannel.readyState === 'open') {
                dataChannel.send(JSON.stringify(messageData));
            }

            videoChatInput.value = '';
        }

        function handleVideoChatMessage(data) {
            if (typeof data === 'string') {
                data = JSON.parse(data);
            }

            if (data.type === 'chat') {
                addVideoChatMessage(data);
            }
        }
        
        function addVideoChatMessage(data) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message-item';
            
            messageDiv.innerHTML = `
                <div class="message-header">
                    <div class="message-name">${data.sender}</div>
                    <div class="message-time">${data.timestamp}</div>
                </div>
                <div class="message-text">${data.message}</div>
            `;
            
            videoChatMessages.appendChild(messageDiv);
            videoChatMessages.scrollTop = videoChatMessages.scrollHeight;
        }
        
        function endCall() {
            if (localStream) {
                localStream.getTracks().forEach(track => track.stop());
                localStream = null;
            }

            if (peerConnection) {
                peerConnection.close();
                peerConnection = null;
            }

            if (dataChannel) {
                dataChannel.close();
                dataChannel = null;
            }

            // Clean up Firebase room data
            if (roomId && window.firebaseDatabase) {
                const database = window.firebaseDatabase;
                const roomRef = window.firebaseRef(database, `rooms/${roomId}`);
                window.firebaseRemove(roomRef);
            }

            videoGrid.innerHTML = `
                <div class="video-item">
                    <video id="local-video" autoplay muted class="video-player"></video>
                    <div class="video-info">
                        Anda (Local)
                    </div>
                </div>
            `;

            videoChatMessages.innerHTML = '';
            localVideo.srcObject = null;

            closeModal(videoConferenceModal);
            showNotification('Video conference diakhiri');
        }
        
        // ==============================
        // NEW: AI Assistant Functions
        // ==============================
        
        function initAIAssistant() {
            aiSendBtn.addEventListener('click', sendAIMessage);
            aiInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendAIMessage();
            });

            // Handle question choice buttons
            document.querySelectorAll('.ai-question-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const question = btn.getAttribute('data-question');
                    aiInput.value = getQuestionText(question);
                    sendAIMessage();
                });
            });
        }

        function getQuestionText(key) {
            const questions = {
                'fitur': 'Apa saja fitur yang tersedia di website ini?',
                'cara': 'Bagaimana cara menggunakan website ini?',
                'pemilik': 'Siapa pemilik website ini?',
                'games': 'Bagaimana cara bermain mini games?',
                'kontak': 'Bagaimana cara menghubungi Al\'Majid?'
            };
            return questions[key] || '';
        }
        
        function sendAIMessage() {
            const message = aiInput.value.trim();
            if (!message) return;
            
            // Add user message
            addAIMessage(message, 'user');
            
            // Get AI response
            const response = getAIResponse(message.toLowerCase());
            
            // Simulate typing delay
            setTimeout(() => {
                addAIMessage(response, 'assistant');
            }, 500);
            
            aiInput.value = '';
        }
        
        function addAIMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `ai-message ${sender}`;
            messageDiv.innerHTML = `<p>${text}</p>`;
            
            aiMessages.appendChild(messageDiv);
            aiMessages.scrollTop = aiMessages.scrollHeight;
        }
        
        function getAIResponse(message) {
            for (const [keyword, response] of Object.entries(aiResponses)) {
                if (message.includes(keyword)) {
                    return response;
                }
            }
            
            // Default responses
            const defaultResponses = [
                "Saya bisa membantu Anda mengenal website ini. Coba tanyakan tentang fitur, cara menggunakan, atau tentang pemilik website.",
                "Maaf, saya tidak mengerti pertanyaan Anda. Coba tanyakan tentang fitur website ini.",
                "Saya AI Assistant untuk website portfolio Al'Majid. Apa yang bisa saya bantu?",
                "Anda bisa bertanya tentang berbagai fitur yang tersedia di website ini."
            ];
            
            return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
        }
        
        // ==============================
        // NEW: Particles.js Functions
        // ==============================
        
        function initParticles() {
            if (typeof particlesJS !== 'undefined') {
                particlesJS('particles-js', {
                    particles: {
                        number: {
                            value: 80,
                            density: {
                                enable: true,
                                value_area: 800
                            }
                        },
                        color: {
                            value: "#4a6cf7"
                        },
                        shape: {
                            type: "circle",
                            stroke: {
                                width: 0,
                                color: "#000000"
                            }
                        },
                        opacity: {
                            value: 0.5,
                            random: true,
                            anim: {
                                enable: true,
                                speed: 1,
                                opacity_min: 0.1,
                                sync: false
                            }
                        },
                        size: {
                            value: 3,
                            random: true,
                            anim: {
                                enable: true,
                                speed: 2,
                                size_min: 0.1,
                                sync: false
                            }
                        },
                        line_linked: {
                            enable: true,
                            distance: 150,
                            color: "#4a6cf7",
                            opacity: 0.2,
                            width: 1
                        },
                        move: {
                            enable: true,
                            speed: 1,
                            direction: "none",
                            random: true,
                            straight: false,
                            out_mode: "out",
                            bounce: false,
                            attract: {
                                enable: false,
                                rotateX: 600,
                                rotateY: 1200
                            }
                        }
                    },
                    interactivity: {
                        detect_on: "canvas",
                        events: {
                            onhover: {
                                enable: true,
                                mode: "grab"
                            },
                            onclick: {
                                enable: true,
                                mode: "push"
                            },
                            resize: true
                        },
                        modes: {
                            grab: {
                                distance: 140,
                                line_linked: {
                                    opacity: 0.3
                                }
                            },
                            bubble: {
                                distance: 400,
                                size: 40,
                                duration: 2,
                                opacity: 8,
                                speed: 3
                            },
                            repulse: {
                                distance: 200,
                                duration: 0.4
                            },
                            push: {
                                particles_nb: 4
                            },
                            remove: {
                                particles_nb: 2
                            }
                        }
                    },
                    retina_detect: true
                });
            }
        }
        
        // Toggle Particles
        function toggleParticles() {
            particlesActive = !particlesActive;
            const particlesContainer = document.getElementById('particles-js');
            
            if (particlesActive) {
                particlesContainer.style.display = 'block';
                particlesToggle.classList.add('active');
                particlesToggle.innerHTML = '<i class="fas fa-star"></i>';
            } else {
                particlesContainer.style.display = 'none';
                particlesToggle.classList.remove('active');
                particlesToggle.innerHTML = '<i class="far fa-star"></i>';
            }
        }
        
        // ==============================
        // NEW: Typing Effect Functions
        // ==============================
        
        function initTypingEffect() {
            function type() {
                const currentText = typingTextArray[typingTextCurrent];
                
                if (!isTypingDeleting && typingCharIndex < currentText.length) {
                    typingText.textContent = currentText.substring(0, typingCharIndex + 1);
                    typingCharIndex++;
                    typingSpeed = 100;
                } else if (isTypingDeleting && typingCharIndex > 0) {
                    typingText.textContent = currentText.substring(0, typingCharIndex - 1);
                    typingCharIndex--;
                    typingSpeed = 50;
                }
                
                if (!isTypingDeleting && typingCharIndex === currentText.length) {
                    isTypingDeleting = true;
                    typingSpeed = 1500;
                } else if (isTypingDeleting && typingCharIndex === 0) {
                    isTypingDeleting = false;
                    typingTextCurrent = (typingTextCurrent + 1) % typingTextArray.length;
                    typingSpeed = 500;
                }
                
                setTimeout(type, typingSpeed);
            }
            
            setTimeout(type, 1000);
        }
        
        // ==============================
        // NEW: Scroll Reveal Functions
        // ==============================
        
        function initScrollReveal() {
            const scrollRevealElements = document.querySelectorAll('.scroll-reveal');
            
            function checkScroll() {
                scrollRevealElements.forEach(element => {
                    const elementTop = element.getBoundingClientRect().top;
                    const elementVisible = 150;
                    
                    if (elementTop < window.innerHeight - elementVisible) {
                        element.classList.add('revealed');
                    }
                });
            }
            
            window.addEventListener('load', checkScroll);
            window.addEventListener('scroll', checkScroll);
            checkScroll();
        }
        
        // ==============================
        // Loading Animation Functions
        // ==============================
        
        function simulateLoading() {
            // Add loading class to body to prevent scrolling
            document.body.classList.add('loading');
            
            initRandomQuotes();
            
            const interval = setInterval(() => {
                loadingProgress += Math.random() * 15 + 5;
                
                if (loadingProgress > 100) {
                    loadingProgress = 100;
                    clearInterval(interval);
                    
                    loadingPercentage.textContent = '100%';
                    loadingFill.style.width = '100%';
                    
                    setTimeout(() => {
                        loadingScreen.style.opacity = '0';
                        loadingScreen.style.visibility = 'hidden';
                        
                        showOradevIntro();
                    }, 500);
                } else {
                    loadingPercentage.textContent = Math.floor(loadingProgress) + '%';
                    loadingFill.style.width = loadingProgress + '%';
                }
            }, 100);
        }
        
        // ==============================
        // Oradev Intro Functions
        // ==============================
        
        function showOradevIntro() {
            const logoContainer = document.querySelector('.oradev-logo-container');
            const oradevText = document.querySelector('.oradev-text');
            
            logoContainer.style.animation = 'oradev-roll-in 1.2s ease-out forwards, oradev-return-center .6s 1.2s ease-in-out forwards, oradev-grow-logo .8s 1.8s ease-out forwards, oradev-move-left .5s 2.6s ease-out forwards';
            oradevText.style.animation = 'oradev-text-slide 1s 2.6s ease-out forwards';
            
            const logoImg = document.querySelector('.oradev-logo');
            logoImg.onerror = function() {
                this.src = 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120"><circle cx="60" cy="60" r="60" fill="%23ffd700"/></svg>';
            };
            
            logoImg.addEventListener('click', triggerJumpscare);
            
            setTimeout(() => {
                oradevIntro.classList.add('fade-out');
                
                setTimeout(() => {
                    oradevIntro.style.display = 'none';
                    
                    // Remove loading class to enable scrolling
                    document.body.classList.remove('loading');
                    
                    initMusicTracks();
                    animateElements();
                    
                    // Initialize all new features
                    initParticles();
                    initTypingEffect();
                    initScrollReveal();
                    initParallax();
                    initClock();
                    initAnnouncements();
                    initChatbox();
                    initOnlineStatus();
                    initGames(); // NEW: Initialize games
                    initFileSharing(); // NEW: Initialize file sharing
                    initVideoConference(); // NEW: Initialize video conference
                    initAIAssistant(); // NEW: Initialize AI assistant
                }, 800);
            }, 4000);
        }
        
        // ==============================
        // Animation Functions
        // ==============================
        
        function animateElements() {
            const buttons = document.querySelectorAll('.btn');
            buttons.forEach((btn, index) => {
                setTimeout(() => {
                    btn.style.animation = `fadeInUp 0.8s ease forwards`;
                    btn.style.opacity = '1';
                    btn.style.transform = 'translateY(0)';
                }, 100 + (index * 50));
            });
            
            const elementsToAnimate = [
                { selector: '.theme-toggle', delay: 200 },
                { selector: '.music-control-btn', delay: 300 },
                { selector: '.slider-nav-btn', delay: 400 },
                { selector: '.slide-indicator', delay: 500 },
                { selector: '.particles-control-btn', delay: 600 },
                { selector: '.announcement-btn', delay: 700 },
                { selector: '.chatbox-btn', delay: 800 },
                { selector: '.clock-container', delay: 900 }
            ];
            
            elementsToAnimate.forEach(item => {
                const element = document.querySelector(item.selector);
                if (element) {
                    setTimeout(() => {
                        element.style.animation = `fadeInUp 0.8s ease forwards`;
                        element.style.opacity = '1';
                        element.style.transform = 'translateY(0)';
                    }, item.delay);
                }
            });
            
            if (currentSlide === 2) {
                animateSlide2Elements();
            } else if (currentSlide === 3) {
                animateSlide3Elements();
            }
        }
        
        function animateSlide2Elements() {
            const slide2Title = document.querySelector('.slide-2-title');
            const appBtns = document.querySelectorAll('.app-btn');
            const musicSectionTitle = document.querySelector('.music-section-title');
            const musicTracks = document.querySelectorAll('.music-track');
            const requestButtons = document.querySelector('.request-buttons');
            
            if (slide2Title) {
                setTimeout(() => {
                    slide2Title.style.animation = 'fadeInUp 0.8s ease forwards';
                    slide2Title.style.opacity = '1';
                    slide2Title.style.transform = 'translateY(0)';
                }, 300);
            }
            
            appBtns.forEach((btn, index) => {
                setTimeout(() => {
                    btn.style.animation = 'fadeInUp 0.8s ease forwards';
                    btn.style.opacity = '1';
                    btn.style.transform = 'translateY(0)';
                }, 400 + (index * 100));
            });
            
            if (musicSectionTitle) {
                setTimeout(() => {
                    musicSectionTitle.style.animation = 'fadeInUp 0.8s ease forwards';
                    musicSectionTitle.style.opacity = '1';
                    musicSectionTitle.style.transform = 'translateY(0)';
                }, 1000);
            }
            
            musicTracks.forEach((track, index) => {
                setTimeout(() => {
                    track.style.animation = 'fadeInUp 0.8s ease forwards';
                    track.style.opacity = '1';
                    track.style.transform = 'translateY(0)';
                }, 1100 + (index * 100));
            });
            
            if (requestButtons) {
                setTimeout(() => {
                    requestButtons.style.animation = 'fadeInUp 0.8s ease forwards';
                    requestButtons.style.opacity = '1';
                    requestButtons.style.transform = 'translateY(0)';
                }, 2100);
            }
        }
        
        function animateSlide3Elements() {
            const slide3Title = document.querySelector('.slide-3-title');
            const gameCards = document.querySelectorAll('.game-card');
            const featureItems = document.querySelectorAll('.feature-item');
            const requestButtons = document.querySelector('.request-buttons');
            
            if (slide3Title) {
                setTimeout(() => {
                    slide3Title.style.animation = 'fadeInUp 0.8s ease forwards';
                    slide3Title.style.opacity = '1';
                    slide3Title.style.transform = 'translateY(0)';
                }, 300);
            }
            
            gameCards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.animation = 'fadeInUp 0.8s ease forwards';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, 400 + (index * 100));
            });
            
            featureItems.forEach((item, index) => {
                setTimeout(() => {
                    item.style.animation = 'fadeInUp 0.8s ease forwards';
                    item.style.opacity = '1';
                    item.style.transform = 'translateY(0)';
                }, 1000 + (index * 100));
            });
            
            if (requestButtons) {
                setTimeout(() => {
                    requestButtons.style.animation = 'fadeInUp 0.8s ease forwards';
                    requestButtons.style.opacity = '1';
                    requestButtons.style.transform = 'translateY(0)';
                }, 1600);
            }
        }
        
        // ==============================
        // Music Functions
        // ==============================
        
        function initMusicTracks() {
            musicPlayerContainer.innerHTML = '';
            
            if (musicTracks.length === 0) {
                const noTracksElement = document.createElement('div');
                noTracksElement.className = 'empty-gallery-message';
                noTracksElement.textContent = 'Belum ada lagu yang tersedia. Gunakan tombol "Minta Tambahin Musikmu" untuk request lagu.';
                musicPlayerContainer.appendChild(noTracksElement);
                return;
            }
            
            audioElements = {};
            
            musicTracks.forEach(track => {
                checkFileExists(track.audio, (audioExists) => {
                    checkFileExists(track.image, (imageExists) => {
                        track.isAvailable = audioExists;
                        
                        const trackElement = document.createElement('div');
                        trackElement.className = 'music-track';
                        trackElement.dataset.trackId = track.id;
                        
                        const imageUrl = imageExists ? track.image : `https://ui-avatars.com/api/?name=${encodeURIComponent(track.artist)}&background=4a6cf7&color=fff&size=100&bold=true`;
                        const artistName = track.artist.startsWith('Nama_Artis') ? 'Coming Soon' : track.artist;
                        const songTitle = track.title.startsWith('Judul_Lagu') ? 'Coming Soon' : track.title;
                        
                        trackElement.innerHTML = `
                            <img src="${imageUrl}" class="track-image" alt="${songTitle}" onerror="this.src='https://ui-avatars.com/api/?name=${encodeURIComponent(track.artist)}&background=4a6cf7&color=fff&size=100&bold=true'">
                            <div class="track-info">
                                <div class="track-title">${songTitle}</div>
                                <div class="track-artist">${artistName}</div>
                            </div>
                            <div class="track-controls">
                                <button class="play-btn ${track.isAvailable ? '' : 'disabled'}" ${track.isAvailable ? '' : 'disabled'}>
                                    <i class="fas ${track.isAvailable ? 'fa-play' : 'fa-clock'}"></i>
                                </button>
                            </div>
                        `;
                        
                        if (!track.isAvailable) {
                            trackElement.querySelector('.play-btn').title = 'Lagu belum tersedia';
                        }
                        
                        musicPlayerContainer.appendChild(trackElement);
                        
                        const playBtn = trackElement.querySelector('.play-btn');
                        if (playBtn && track.isAvailable) {
                            playBtn.addEventListener('click', function() {
                                const trackId = parseInt(trackElement.dataset.trackId);
                                playTrack(trackId, this);
                            });
                        }
                        
                        if (track.isAvailable) {
                            const audio = new Audio(track.audio);
                            audio.id = `audio-${track.id}`;
                            audio.volume = 0.7;
                            audioElements[track.id] = audio;
                            
                            audio.addEventListener('ended', () => {
                                const playButton = document.querySelector(`.music-track[data-track-id="${track.id}"] .play-btn`);
                                if (playButton) {
                                    playButton.classList.remove('playing');
                                    playButton.innerHTML = '<i class="fas fa-play"></i>';
                                }
                                currentPlayingTrack = null;
                            });
                            
                            audio.addEventListener('error', () => {
                                console.log(`Error loading audio: ${track.audio}`);
                                track.isAvailable = false;
                                const playButton = document.querySelector(`.music-track[data-track-id="${track.id}"] .play-btn`);
                                if (playButton) {
                                    playButton.classList.add('disabled');
                                    playButton.disabled = true;
                                    playButton.innerHTML = '<i class="fas fa-exclamation-circle"></i>';
                                    playButton.title = 'Error loading audio';
                                }
                            });
                        }
                    });
                });
            });
        }
        
        // Check if a file exists
        function checkFileExists(url, callback) {
            fetch(url, { method: 'HEAD' })
                .then(response => {
                    callback(response.ok);
                })
                .catch(() => {
                    callback(false);
                });
        }
        
        // Play a specific track
        function playTrack(trackId, playButton) {
            const track = musicTracks.find(t => t.id === trackId);
            
            if (!track || !track.isAvailable) return;
            
            const audio = audioElements[trackId];
            if (!audio) return;
            
            if (currentPlayingTrack && currentPlayingTrack !== trackId) {
                const currentAudio = audioElements[currentPlayingTrack];
                if (currentAudio) {
                    currentAudio.pause();
                    currentAudio.currentTime = 0;
                }
                
                const prevPlayButton = document.querySelector(`.music-track[data-track-id="${currentPlayingTrack}"] .play-btn`);
                if (prevPlayButton) {
                    prevPlayButton.classList.remove('playing');
                    prevPlayButton.innerHTML = '<i class="fas fa-play"></i>';
                }
            }
            
            if (audio.paused) {
                if (isMusicPlaying) {
                    backgroundMusic.pause();
                    musicControl.classList.remove('playing');
                    musicControl.innerHTML = '<i class="fas fa-music"></i>';
                    isMusicPlaying = false;
                }
                
                const playPromise = audio.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        playButton.classList.add('playing');
                        playButton.innerHTML = '<i class="fas fa-pause"></i>';
                        currentPlayingTrack = trackId;
                    }).catch(error => {
                        console.log("Autoplay prevented for track:", error);
                        musicStatus.textContent = 'Klik tombol play lagi untuk memutar lagu';
                        musicStatus.classList.add('show');
                        setTimeout(() => {
                            musicStatus.classList.remove('show');
                        }, 3000);
                    });
                }
            } else {
                audio.pause();
                playButton.classList.remove('playing');
                playButton.innerHTML = '<i class="fas fa-play"></i>';
                currentPlayingTrack = null;
            }
        }
        
        // Stop all music
        function stopAllMusic() {
            if (isMusicPlaying) {
                backgroundMusic.pause();
                musicControl.classList.remove('playing');
                musicControl.innerHTML = '<i class="fas fa-music"></i>';
                isMusicPlaying = false;
            }
            
            if (currentPlayingTrack && audioElements[currentPlayingTrack]) {
                audioElements[currentPlayingTrack].pause();
                audioElements[currentPlayingTrack].currentTime = 0;
                
                const playButton = document.querySelector(`.music-track[data-track-id="${currentPlayingTrack}"] .play-btn`);
                if (playButton) {
                    playButton.classList.remove('playing');
                    playButton.innerHTML = '<i class="fas fa-play"></i>';
                }
                currentPlayingTrack = null;
            }
        }
        
        // ==============================
        // Jumpscare Function
        // ==============================
        
        function triggerJumpscare() {
            stopAllMusic();
            
            jumpscareOverlay.style.display = 'flex';
            
            jumpscareImage.onerror = function() {
                this.src = 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400"><rect width="400" height="400" fill="%23000"/><text x="200" y="200" text-anchor="middle" fill="red" font-family="Arial" font-size="40" font-weight="bold">BOO!</text></svg>';
            };
            
            jumpscareSound.currentTime = 0;
            const playPromise = jumpscareSound.play();
            
            if (playPromise !== undefined) {
                playPromise.catch(error => {
                    console.log("Autoplay prevented for jumpscare sound");
                });
            }
            
            setTimeout(() => {
                jumpscareOverlay.style.display = 'none';
                jumpscareSound.pause();
                jumpscareSound.currentTime = 0;
            }, 5000);
        }
        
        // ==============================
        // Theme Toggle Function
        // ==============================
        
        themeToggle.addEventListener('click', () => {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('light-mode', !isDarkMode);
            
            const icon = themeToggle.querySelector('i');
            icon.className = isDarkMode ? 'fas fa-moon' : 'fas fa-sun';
            
            if (profileImg.src.includes('ui-avatars.com')) {
                const name = 'Al Majid';
                profileImg.src = `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=4a6cf7&color=fff&size=400&bold=true`;
            }
        });
        
        // ==============================
        // Music Control Functions
        // ==============================
        
        function checkMusicFile() {
            fetch('musik.mp3')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Music file not found');
                    }
                    musicFileExists = true;
                })
                .catch(error => {
                    console.log("File musik tidak ditemukan, menyembunyikan tombol musik");
                    musicFileExists = false;
                    musicControl.style.display = 'none';
                });
        }
        
        musicControl.addEventListener('click', () => {
            if (!musicFileExists) return;
            
            if (isMusicPlaying) {
                backgroundMusic.pause();
                musicControl.classList.remove('playing');
                musicControl.innerHTML = '<i class="fas fa-music"></i>';
                
                musicStatus.textContent = 'Musik dimatikan';
                musicStatus.classList.add('show');
                setTimeout(() => {
                    musicStatus.classList.remove('show');
                }, 2000);
            } else {
                stopAllMusic();
                
                const playPromise = backgroundMusic.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        musicControl.classList.add('playing');
                        musicControl.innerHTML = '<i class="fas fa-volume-up"></i>';
                        
                        musicStatus.textContent = 'Musik dinyalakan';
                        musicStatus.classList.add('show');
                        setTimeout(() => {
                            musicStatus.classList.remove('show');
                        }, 2000);
                    }).catch(error => {
                        console.log("Autoplay dicegah, user harus interaksi dulu");
                        musicStatus.textContent = 'Klik tombol musik untuk memulai';
                        musicStatus.classList.add('show');
                        setTimeout(() => {
                            musicStatus.classList.remove('show');
                        }, 3000);
                    });
                }
            }
            isMusicPlaying = !isMusicPlaying;
        });
        
        // Handle audio errors
        backgroundMusic.addEventListener('error', (e) => {
            console.log("Error audio:", e);
            musicFileExists = false;
            musicControl.style.display = 'none';
        });
        
        // ==============================
        // Slide Navigation Functions
        // ==============================
        
        function goToSlide(slideNumber) {
            currentSlide = slideNumber;
            
            if (slideNumber === 1) {
                sliderWrapper.classList.remove('slide-2', 'slide-3');
                slide1Btn.classList.add('active');
                slide2Btn.classList.remove('active');
                slide3Btn.classList.remove('active');
                slideIndicator.textContent = 'Slide 1/3';
            } else if (slideNumber === 2) {
                sliderWrapper.classList.add('slide-2');
                sliderWrapper.classList.remove('slide-3');
                slide1Btn.classList.remove('active');
                slide2Btn.classList.add('active');
                slide3Btn.classList.remove('active');
                slideIndicator.textContent = 'Slide 2/3';
                
                setTimeout(animateSlide2Elements, 300);
                
                setTimeout(() => {
                    const scrollRevealElements = document.querySelectorAll('.scroll-reveal');
                    scrollRevealElements.forEach(element => {
                        element.classList.add('revealed');
                    });
                }, 500);
            } else if (slideNumber === 3) {
                sliderWrapper.classList.add('slide-3');
                sliderWrapper.classList.remove('slide-2');
                slide1Btn.classList.remove('active');
                slide2Btn.classList.remove('active');
                slide3Btn.classList.add('active');
                slideIndicator.textContent = 'Slide 3/3';
                
                setTimeout(animateSlide3Elements, 300);
                
                setTimeout(() => {
                    const scrollRevealElements = document.querySelectorAll('.scroll-reveal');
                    scrollRevealElements.forEach(element => {
                        element.classList.add('revealed');
                    });
                }, 500);
            }
        }
        
        slide1Btn.addEventListener('click', () => {
            goToSlide(1);
            stopAllMusic();
        });
        
        slide2Btn.addEventListener('click', () => {
            goToSlide(2);
            stopAllMusic();
        });
        
        slide3Btn.addEventListener('click', () => {
            goToSlide(3);
            stopAllMusic();
        });
        
        // ==============================
        // Request Music Button Function
        // ==============================
        
        requestMusicBtn.addEventListener('click', () => {
            const message = encodeURIComponent(`https://almajid.vercel.app/\nbang, request lagu "judul"`);
            window.open(`https://wa.me/6283853185739?text=${message}`, '_blank');
        });
        
        // ==============================
        // Request Picture Button Function
        // ==============================
        
        requestPictureBtn.addEventListener('click', () => {
            openGalleryRequestModal();
        });
        
        // Gallery Request Modal
        function openGalleryRequestModal() {
            const galleryImages = getGalleryImages('gallery');
            
            if (galleryImages.length === 0) {
                galleryRequestMessage.innerHTML = `
                    <h3>Gallery Kosong</h3>
                    <p>Belum ada foto di gallery. Gunakan tombol di bawah untuk request tambahan foto.</p>
                    <button class="request-btn" id="request-picture-wa-btn" style="margin-top: 1.5rem;">
                        <i class="fab fa-whatsapp"></i>
                        <span>Request Picture via WhatsApp</span>
                    </button>
                `;
                
                galleryRequestNav.innerHTML = '';
            } else {
                galleryRequestMessage.innerHTML = `
                    <h3>Gallery Tersedia</h3>
                    <p>Ada ${galleryImages.length} foto di gallery. Scroll untuk melihat.</p>
                `;
                
                galleryRequestNav.innerHTML = '';
                galleryImages.forEach((imageSrc, index) => {
                    const thumbnail = document.createElement('img');
                    thumbnail.className = 'gallery-thumbnail';
                    thumbnail.alt = `Gambar ${index + 1}`;
                    thumbnail.src = imageSrc;
                    
                    thumbnail.onerror = function() {
                        this.style.display = 'none';
                    };
                    
                    galleryRequestNav.appendChild(thumbnail);
                });
                
                const requestBtnContainer = document.createElement('div');
                requestBtnContainer.style.marginTop = '1.5rem';
                requestBtnContainer.innerHTML = `
                    <button class="request-btn" id="request-picture-wa-btn">
                        <i class="fab fa-whatsapp"></i>
                        <span>Request Picture via WhatsApp</span>
                    </button>
                `;
                galleryRequestNav.appendChild(requestBtnContainer);
            }
            
            openModal(galleryRequestModal);
            
            setTimeout(() => {
                const requestPictureWaBtn = document.getElementById('request-picture-wa-btn');
                if (requestPictureWaBtn) {
                    requestPictureWaBtn.addEventListener('click', () => {
                        const message = encodeURIComponent(`https://almajid.vercel.app/\n"Bang, tambahin foto ini"`);
                        window.open(`https://wa.me/6283853185739?text=${message}`, '_blank');
                    });
                }
            }, 100);
        }
        
        // ==============================
        // Modal Management Functions
        // ==============================
        
        function openModal(modal) {
            // Add modal-open class to body to prevent scrolling
            document.body.classList.add('modal-open');
            
            modal.style.display = 'flex';
            stopAllMusic();
            
            setTimeout(() => {
                const modalContent = modal.querySelector('.modal-content');
                if (modalContent) {
                    modalContent.style.animation = 'fadeInUp 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards';
                    modalContent.style.opacity = '1';
                }
            }, 10);
            
            if (modal === chatboxModal) {
                unreadMessages = 0;
                updateChatboxBadge();
                chatboxInput.focus();
                
                // Render messages when modal opens
                renderChatMessages();
            } else if (modal === videoConferenceModal) {
                startVideoConference();
            }
        }
        
        function closeModal(modal) {
            // Remove modal-open class from body to re-enable scrolling
            document.body.classList.remove('modal-open');
            
            modal.style.display = 'none';
            
            if (modal === videoConferenceModal) {
                endCall();
            }
        }
        
        function setupModalClose(modal, closeBtn) {
            closeBtn.addEventListener('click', () => closeModal(modal));
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal(modal);
                }
            });
        }
        
        // ==============================
        // Spotify Button Function
        // ==============================
        
        spotifyBtn.addEventListener('click', () => openModal(favsongModal));
        
        // ==============================
        // Programming Languages Button Function
        // ==============================
        
        programmingBtn.addEventListener('click', () => openModal(programmingModal));
        
        // ==============================
        // Favorite Person Button Function
        // ==============================
        
        favoritePersonBtn.addEventListener('click', () => {
            const imageExtensions = ['.jpeg', '.jpg', '.webp', '.png', '.gif'];
            let formatIndex = 0;
            
            function tryNextImageFormat() {
                if (formatIndex < imageExtensions.length) {
                    const baseName = 'favoriteperson';
                    favoritePersonImage.src = baseName + imageExtensions[formatIndex];
                    formatIndex++;
                } else {
                    favoritePersonImage.alt = 'My Favorite Person';
                    favoritePersonImage.style.display = 'none';
                    const fallbackText = document.createElement('p');
                    fallbackText.textContent = 'Gambar favoriteperson tidak ditemukan';
                    fallbackText.style.textAlign = 'center';
                    fallbackText.style.color = '#fff';
                    favoritePersonModal.querySelector('.modal-content').appendChild(fallbackText);
                }
            }
            
            favoritePersonImage.onerror = tryNextImageFormat;
            favoritePersonImage.src = 'favoriteperson.jpeg';
            openModal(favoritePersonModal);
        });
        
        // ==============================
        // Gallery Management Functions
        // ==============================
        
        function getGalleryImages(type) {
            const galleries = {
                'gallery': [
                    'foto1.jpeg',
                    'foto2.jpeg',
                    'foto3.jpeg'
                ],
                'myself': [
                    'myfoto1.jpeg',
                    'myfoto2.jpeg',
                    'myfoto3.jpeg',
                    'myfoto4.jpeg',
                    'myfoto5.jpeg',
                    'myfoto6.jpeg',
                    'myfoto7.jpeg',
                    'myfoto8.jpeg',
                    'myfoto9.jpeg',
                    'myfoto10.jpeg'
                ],
                'friend': [
                    'friendfoto1.jpeg',
                    'friendfoto2.jpeg',
                    'friendfoto3.jpeg',
                    'friendfoto4.jpeg',
                    'friendfoto5.jpeg',
                    'friendfoto6.jpeg',
                    'friendfoto7.jpeg',
                    'friendfoto8.jpeg'
                ],
                'randomize': [
                    'Random1.jpeg',
                    'Random2.jpeg',
                    'Random3.jpeg',
                    'Random4.jpeg',
                    'Random5.jpeg',
                    'Random6.jpeg',
                    'Random7.jpeg',
                    'Random8.jpeg',
                    'Random9.jpeg',
                    'Random10.jpeg'
                ],
                'longing': [
                    'chat1.jpeg',
                    'chat2.jpeg',
                    'chat3.jpeg'
                ],
                'family': [
                    'keluarga1.jpeg',
                    'keluarga2.jpeg',
                    'keluarga3.jpeg',
                    'keluarga4.jpeg'
                ]
            };
            
            return galleries[type] || [];
        }
        
        function initGallery(type, title) {
            currentGalleryType = type;
            galleryTitle.textContent = title;
            galleryNav.innerHTML = '';
            
            const galleryImages = getGalleryImages(type);
            
            if (galleryImages.length === 0) {
                mainGalleryImage.style.display = 'none';
                const noImagesText = document.createElement('p');
                noImagesText.textContent = 'Tidak ada gambar yang ditemukan';
                noImagesText.style.textAlign = 'center';
                noImagesText.style.color = '#fff';
                galleryNav.appendChild(noImagesText);
                return;
            }
            
            galleryImages.forEach((imageSrc, index) => {
                const thumbnail = document.createElement('img');
                thumbnail.className = 'gallery-thumbnail';
                thumbnail.alt = `Gambar ${index + 1}`;
                thumbnail.src = imageSrc;
                
                thumbnail.onerror = function() {
                    this.style.display = 'none';
                    console.log(`Gambar tidak ditemukan: ${imageSrc}`);
                };
                
                if (index === 0) {
                    thumbnail.classList.add('active');
                    mainGalleryImage.src = imageSrc;
                    mainGalleryImage.alt = `Gambar ${index + 1}`;
                    mainGalleryImage.style.display = 'block';
                    
                    mainGalleryImage.onerror = function() {
                        this.src = 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300"><rect width="400" height="300" fill="%234a6cf7"/><text x="200" y="150" text-anchor="middle" fill="white" font-family="Arial" font-size="20">Gambar tidak ditemukan</text></svg>';
                        console.log(`Gambar utama tidak ditemukan: ${imageSrc}`);
                    };
                }
                
                thumbnail.addEventListener('click', () => {
                    mainGalleryImage.src = imageSrc;
                    mainGalleryImage.alt = `Gambar ${index + 1}`;
                    
                    document.querySelectorAll('.gallery-thumbnail').forEach(thumb => {
                        thumb.classList.remove('active');
                    });
                    thumbnail.classList.add('active');
                });
                
                galleryNav.appendChild(thumbnail);
            });
            
            const countInfo = document.createElement('p');
            countInfo.textContent = `Total: ${galleryImages.length} foto`;
            countInfo.style.textAlign = 'center';
            countInfo.style.color = '#4a6cf7';
            countInfo.style.marginTop = '10px';
            countInfo.style.fontWeight = '500';
            galleryNav.appendChild(countInfo);
        }
        
        // Gallery Buttons
        galleryBtn.addEventListener('click', () => {
            initGallery('gallery', 'Gallery (3 foto)');
            openModal(galleryModal);
        });
        
        myselfBtn.addEventListener('click', () => {
            initGallery('myself', 'My Self (10 foto)');
            openModal(galleryModal);
        });
        
        friendBtn.addEventListener('click', () => {
            initGallery('friend', 'My Friend (8 foto)');
            openModal(galleryModal);
        });
        
        randomizeBtn.addEventListener('click', () => {
            initGallery('randomize', 'Randomize (10 foto)');
            openModal(galleryModal);
        });
        
        longingBtn.addEventListener('click', () => {
            initGallery('longing', 'My Longing (3 foto)');
            openModal(galleryModal);
        });
        
        familyBtn.addEventListener('click', () => {
            initGallery('family', 'Family (4 foto)');
            openModal(galleryModal);
        });
        
        // ==============================
        // Favorite Musician Button Function
        // ==============================
        
        favoriteMusicianBtn.addEventListener('click', () => openModal(favoriteMusicianModal));
        
        // ==============================
        // Embed Buttons Functions
        // ==============================
        
        deepseekEmbedBtn.addEventListener('click', () => openModal(deepseekEmbedModal));
        youtubeEmbedBtn.addEventListener('click', () => openModal(youtubeEmbedModal));
        komikuEmbedBtn.addEventListener('click', () => openModal(komikuEmbedModal));
        
        // YouTube Search Functionality
        youtubeSearchBtn.addEventListener('click', () => {
            const searchTerm = youtubeSearchInput.value.trim();
            if (searchTerm) {
                const encodedSearch = encodeURIComponent(searchTerm);
                const iframe = youtubeEmbedModal.querySelector('iframe');
                iframe.src = `https://www.youtube.com/embed?listType=search&list=${encodedSearch}`;
            }
        });
        
        youtubeSearchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                youtubeSearchBtn.click();
            }
        });
        
        // ==============================
        // NEW: Setup New Modals Functions
        // ==============================
        
        announcementBtn.addEventListener('click', () => openModal(announcementModal));
        chatboxBtn.addEventListener('click', () => openModal(chatboxModal));
        
        // NEW: Setup new feature buttons
        fileSharingBtn.addEventListener('click', () => openModal(fileSharingModal));
        videoCallBtn.addEventListener('click', () => openModal(videoConferenceModal));
        aiAssistantBtn.addEventListener('click', () => openModal(aiAssistantModal));
        
        // Setup modal close events
        setupModalClose(favsongModal, closeFavsongBtn);
        setupModalClose(programmingModal, closeProgrammingBtn);
        setupModalClose(favoritePersonModal, closeFavoritePersonBtn);
        setupModalClose(favoriteMusicianModal, closeFavoriteMusicianBtn);
        setupModalClose(galleryModal, closeGalleryBtn);
        setupModalClose(galleryRequestModal, closeGalleryRequestBtn);
        setupModalClose(deepseekEmbedModal, closeDeepseekBtn);
        setupModalClose(youtubeEmbedModal, closeYoutubeBtn);
        setupModalClose(komikuEmbedModal, closeKomikuBtn);
        setupModalClose(announcementModal, closeAnnouncementBtn);
        setupModalClose(chatboxModal, closeChatboxBtn);
        
        // NEW: Setup game modal close events
        setupModalClose(gameLoginModal, closeGameLoginBtn);
        setupModalClose(reactionGameModal, closeReactionGameBtn);
        setupModalClose(numberGameModal, closeNumberGameBtn);
        setupModalClose(memoryGameModal, closeMemoryGameBtn);
        setupModalClose(ticTacToeModal, closeTicTacToeBtn);
        setupModalClose(typingGameModal, closeTypingGameBtn);
        setupModalClose(triviaGameModal, closeTriviaGameBtn);
        
        // NEW: Setup new feature modal close events
        setupModalClose(fileSharingModal, closeFileSharingBtn);
        setupModalClose(videoConferenceModal, closeVideoConferenceBtn);
        setupModalClose(aiAssistantModal, closeAiAssistantBtn);
        
        closeGalleryBtn2.addEventListener('click', () => closeModal(galleryModal));
        closeGalleryRequestBtn2.addEventListener('click', () => closeModal(galleryRequestModal));
        
        // ==============================
        // Particles Toggle Function
        // ==============================
        
        particlesToggle.addEventListener('click', toggleParticles);
        
        // ==============================
        // Jumpscare Event to Profile Image
        // ==============================
        
        profileImg.addEventListener('click', triggerJumpscare);
        
        // ==============================
        // Hover Effects
        // ==============================
        
        // Add hover effect to all buttons
        document.querySelectorAll('.btn').forEach(button => {
            button.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-3px)';
            });
            
            button.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });
        
        // Add hover effect to role tags
        document.querySelectorAll('.role-tag').forEach(tag => {
            tag.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
            });
            
            tag.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });
        
        // Add hover effect to language items
        document.querySelectorAll('.language-item').forEach(item => {
            item.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
                this.style.backgroundColor = 'rgba(74, 108, 247, 0.2)';
            });
            
            item.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.backgroundColor = '';
            });
        });
        
        // Add hover effect to app buttons
        document.querySelectorAll('.app-btn').forEach(button => {
            button.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-3px)';
            });
            
            button.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });
        
        // ==============================
        // Initialize on Page Load
        // ==============================
        
        window.addEventListener('load', function() {
            simulateLoading();
            
            profileImg.onerror = function() {
                const name = 'Al Majid';
                this.src = `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=4a6cf7&color=fff&size=400&bold=true`;
            };
            
            const profileFormats = ['profil.jpg', 'profil.webp', 'profil.png', 'profil.jpeg'];
            let currentFormatIndex = 0;
            
            function tryNextProfileFormat() {
                if (currentFormatIndex < profileFormats.length) {
                    profileImg.src = profileFormats[currentFormatIndex];
                    currentFormatIndex++;
                }
            }
            
            profileImg.onerror = tryNextProfileFormat;
            
            checkMusicFile();
        });
        
        // ==============================
        // NEW: Handle Window Resize for Responsive Design
        // ==============================
        
        window.addEventListener('resize', () => {
            // Handle resize if needed
        });
    </script>
</body>
</html>
